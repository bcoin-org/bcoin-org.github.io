<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="A list of all emitted events throughout the bcoin library.
Which functions call them, what data they return, which objects catch and re-emit them,
and which events are available over websocket connection.">
	<meta name="author" content="Matthew Zipkin">

	<title>Bcoin Guide | Events and Sockets</title>

	<!-- Favicons -->
	<!-- old
	<link rel="shortcut icon" href="../assets/images/bcoin-ico.png">-->

	<!-- generated from http://www.favicon-generator.org/ -->
	<link rel="apple-touch-icon" sizes="57x57" href="../assets/images/apple-icon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="../assets/images/apple-icon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="../assets/images/apple-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="../assets/images/apple-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="../assets/images/apple-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="../assets/images/apple-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="../assets/images/apple-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="../assets/images/apple-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="../assets/images/apple-icon-180x180.png">
	<link rel="icon" type="image/png" sizes="192x192"  href="../assets/images/android-icon-192x192.png">
	<link rel="icon" type="image/png" sizes="32x32" href="../assets/images/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="../assets/images/favicon-96x96.png">
	<link rel="icon" type="image/png" sizes="16x16" href="../assets/images/favicon-16x16.png">
	<link rel="manifest" href="../assets/images/manifest.json">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="msapplication-TileImage" content="../assets/images/ms-icon-144x144.png">
	<meta name="theme-color" content="#ffffff">

	<!-- Web Fonts -->
	<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400italic,400,600,700' rel='stylesheet'>
	<link href='https://fonts.googleapis.com/css?family=Montserrat:700' rel='stylesheet' type='text/css'>

	<!-- Bootstrap core CSS -->
	<link href="../assets/bootstrap/css/bootstrap.min.css" rel="stylesheet">

	<!-- Code Snippet CSS -->
	<link href="../assets/css/prism.css" rel="stylesheet">

	<link href="../assets/css/custom.css" rel="stylesheet">

	<!-- Icon Fonts -->
	<link href="../assets/css/font-awesome.min.css" rel="stylesheet">
	<link href="../assets/css/simple-line-icons.css" rel="stylesheet">

	<!-- Plugins -->
	<link href="../assets/css/magnific-popup.css" rel="stylesheet">
	<link href="../assets/css/owl.carousel.css" rel="stylesheet">
	<link href="../assets/css/flexslider.css" rel="stylesheet">
	<link href="../assets/css/animate.min.css" rel="stylesheet">

	<!-- Template core CSS -->
	<link href="../assets/css/vertical.min.css" rel="stylesheet">
	<link href="../assets/css/template.css" rel="stylesheet">

	<!-- Google Analytics Tracking -->
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-96446060-1', 'auto');
        ga('send', 'pageview');
    </script>
</head>
<body>

	<!-- PRELOADER -->
	<div class="page-loader">
		<div class="img-loader">Loading...
			<!-- Bcoin logo in SVG -->
			<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
				viewBox="0 0 200 56" style="enable-background:new 0 0 200 56;" xml:space="preserve">
			<g id="XMLID_108_">
				<g id="XMLID_123_">
					<path id="XMLID_124_" d="M8.4,51.8H3.2V4.2h5.2v19.2h0.8c1.2-2,2.8-3.6,4.8-4.7c2-1.1,4.3-1.6,6.7-1.6c2,0,4,0.4,5.8,1.2
						c1.8,0.8,3.4,1.9,4.8,3.3c1.4,1.5,2.5,3.2,3.3,5.4s1.2,4.6,1.2,7.3v1.4c0,2.8-0.4,5.2-1.2,7.4c-0.8,2.1-1.9,3.9-3.3,5.4
						c-1.4,1.5-3,2.6-4.9,3.3s-3.8,1.1-5.9,1.1c-1.1,0-2.2-0.1-3.3-0.4c-1.1-0.3-2.2-0.6-3.2-1.2c-1-0.5-1.9-1.2-2.8-1.9
						c-0.8-0.7-1.6-1.6-2.1-2.7H8.4V51.8z M19.4,47.7c1.6,0,3.1-0.3,4.4-0.9c1.3-0.6,2.5-1.4,3.5-2.4c1-1,1.8-2.3,2.3-3.8
						c0.6-1.5,0.8-3.2,0.8-5v-1.4c0-1.8-0.3-3.5-0.8-4.9c-0.6-1.5-1.3-2.7-2.3-3.8c-1-1.1-2.2-1.9-3.5-2.5c-1.4-0.6-2.8-0.9-4.4-0.9
						c-1.6,0-3,0.3-4.3,0.9c-1.3,0.6-2.5,1.5-3.5,2.6c-1,1.1-1.8,2.4-2.4,3.9c-0.6,1.5-0.9,3.2-0.9,5v0.8c0,1.9,0.3,3.6,0.9,5.1
						c0.6,1.5,1.4,2.8,2.4,3.9s2.2,1.9,3.5,2.5C16.4,47.4,17.9,47.7,19.4,47.7z"/>
				</g>
				<g id="XMLID_120_">
					<path id="XMLID_121_" d="M76.1,39.8c-0.4,1.9-1,3.6-1.8,5.2c-0.9,1.6-2,3-3.3,4.1s-2.9,2.1-4.7,2.7c-1.8,0.6-3.8,1-5.9,1
						c-2.3,0-4.5-0.4-6.6-1.2c-2.1-0.8-3.9-1.9-5.4-3.4c-1.6-1.5-2.8-3.3-3.7-5.4c-0.9-2.1-1.4-4.6-1.4-7.4v-0.8c0-2.7,0.5-5.2,1.4-7.4
						c0.9-2.2,2.1-4,3.7-5.5c1.6-1.5,3.4-2.7,5.4-3.5c2.1-0.8,4.3-1.2,6.6-1.2c2.1,0,4,0.3,5.8,1c1.8,0.6,3.3,1.5,4.7,2.7
						c1.4,1.2,2.5,2.5,3.3,4.1c0.9,1.6,1.5,3.3,1.8,5.2l-5.2,1.2c-0.1-1.2-0.5-2.3-1-3.4c-0.5-1.1-1.2-2.1-2.1-2.9
						c-0.9-0.8-1.9-1.5-3.2-2c-1.2-0.5-2.7-0.7-4.3-0.7c-1.6,0-3.1,0.3-4.5,0.9c-1.4,0.6-2.6,1.5-3.7,2.6c-1.1,1.1-1.9,2.4-2.5,4
						c-0.6,1.5-0.9,3.2-0.9,5v0.8c0,1.9,0.3,3.6,0.9,5.1c0.6,1.5,1.4,2.8,2.5,3.8c1.1,1,2.3,1.8,3.7,2.4c1.4,0.6,3,0.9,4.6,0.9
						s3.1-0.3,4.3-0.8c1.2-0.5,2.3-1.2,3.1-2c0.9-0.8,1.6-1.8,2.1-2.9c0.5-1.1,0.9-2.2,1-3.4L76.1,39.8z"/>
				</g>
				<g id="XMLID_116_">
					<path id="XMLID_117_" d="M117.2,35.4c0,2.8-0.5,5.3-1.4,7.5c-0.9,2.2-2.1,4-3.6,5.4c-1.5,1.5-3.3,2.6-5.3,3.4
						c-2,0.8-4.1,1.2-6.3,1.2c-2.2,0-4.3-0.4-6.3-1.2c-2-0.8-3.8-1.9-5.3-3.4c-1.5-1.5-2.7-3.3-3.6-5.4c-0.9-2.2-1.4-4.6-1.4-7.5v-0.8
						c0-2.8,0.5-5.2,1.4-7.4c0.9-2.2,2.1-4,3.7-5.5c1.5-1.5,3.3-2.6,5.3-3.4c2-0.8,4.1-1.2,6.3-1.2c2.2,0,4.3,0.4,6.3,1.2
						c2,0.8,3.8,1.9,5.3,3.4c1.5,1.5,2.8,3.3,3.7,5.5c0.9,2.2,1.4,4.6,1.4,7.4V35.4z M100.6,47.7c1.6,0,3.1-0.3,4.4-0.9
						c1.4-0.6,2.5-1.4,3.6-2.5c1-1.1,1.8-2.4,2.4-3.9c0.6-1.5,0.9-3.2,0.9-5.1v-0.8c0-1.8-0.3-3.5-0.9-5c-0.6-1.5-1.4-2.8-2.4-3.9
						c-1-1.1-2.2-1.9-3.6-2.6c-1.4-0.6-2.8-0.9-4.4-0.9c-1.6,0-3,0.3-4.4,0.9c-1.4,0.6-2.6,1.5-3.6,2.6c-1,1.1-1.8,2.4-2.4,3.9
						c-0.6,1.5-0.9,3.2-0.9,5v0.8c0,1.9,0.3,3.6,0.9,5.1c0.6,1.5,1.4,2.8,2.4,3.9c1,1.1,2.2,1.9,3.6,2.5C97.5,47.5,99,47.7,100.6,47.7z
						"/>
				</g>
				<g id="XMLID_112_">
					<path id="XMLID_113_" d="M127.6,46.9h11.6V23h-10.4v-4.9h15.6v28.9h10.8v4.9h-27.6V46.9z M137.1,8c0-1.3,0.5-2.4,1.4-3.4
						c0.9-0.9,2-1.4,3.3-1.4c1.3,0,2.4,0.5,3.3,1.4c0.9,0.9,1.4,2.1,1.4,3.4c0,1.3-0.5,2.4-1.4,3.4c-0.9,0.9-2,1.4-3.3,1.4
						c-1.3,0-2.4-0.5-3.3-1.4C137.5,10.4,137.1,9.3,137.1,8z"/>
				</g>
				<g id="XMLID_109_">
					<path id="XMLID_110_" d="M172.8,51.8h-5.2V18.1h5.2v5.7h0.8c2-4.4,5.6-6.7,10.7-6.7c3.8,0,6.9,1.2,9.1,3.6
						c2.3,2.4,3.4,6.1,3.4,10.9v20.2h-5.2V32.8c0-3.5-0.8-6.2-2.3-8c-1.6-1.8-3.7-2.7-6.3-2.7c-3.2,0-5.6,1.1-7.4,3.3s-2.7,5.1-2.7,8.8
						V51.8z"/>
				</g>
			</g>
			</svg>


		</div>
	</div>
	<!-- END PRELOADER -->

	<!-- HEADER -->
	<header class="header js-stick">
			<div class="container">
				<!-- YOUR LOGO HERE -->
				<div class="inner-header">
					<a class="inner-brand" href="../index.html">
						<img class="brand-light" src="../assets/images/logo-light.png" width="100" alt="">
						<img class="brand-dark" src="../assets/images/logo-dark.png" width="100" alt="">
					</a>
				</div>

				<!-- OPEN MOBILE MENU -->
				<div class="main-nav-toggle">
					<div class="nav-icon-toggle" data-toggle="collapse" data-target="#custom-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</div>
				</div>

				<!-- WIDGETS MENU -->
				<div class="inner-header pull-right hide-me">
					<div class="menu-extras clearfix">

						<!-- TELEGRAM LINK -->
						<div class="menu-item">
							<div class="">
								<a href="https://t.me/bcoinorg" target="_blank" id="" data-toggle="tooltip" title="" data-placement="bottom" data-original-title="Join us on Telegram!">
									<img src="../assets/images/telegram-app.svg" width="18" height="18"/>
									<span class=""></span>
								</a>
                            </div>
						</div>

						<!-- STACK EXCHANGE LINK -->
						<div class="menu-item">
							<div class="">
								<a href="https://bitcoin.stackexchange.com/questions/tagged/bcoin" target="_blank" id="" data-toggle="tooltip" title="" data-placement="bottom" data-original-title="Questions! Checkout Stack Exchange.">
									<img src="../assets/images/stack-exchange-icon.svg" width="18" height="18"/>
									<span class=""></span>
								</a>
                            </div>
						</div>

						<!-- GITHUB STUFF -->
						<div class="menu-item">
							<div class="">
								<a href="https://github.com/bcoin-org/bcoin" target="_blank" id="" data-toggle="tooltip" title="" data-placement="bottom" data-original-title="Visit bcoin on GitHub to see the code!">
									<img src="../assets/images/github_icon.svg" width="18" height="18"/>
									<span class=""></span>
								</a>
                            </div>
						</div>

						<div class="menu-item">
                            <div class="ghbuttons">
                                <a class="github-button" href="https://github.com/bcoin-org/bcoin" data-icon="octicon-star" data-count-href="/bcoin-org/bcoin/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star bcoin-org/bcoin on GitHub">Star</a>
                                <a class="github-button" href="https://github.com/bcoin-org/bcoin/fork" data-icon="octicon-repo-forked" data-count-href="/bcoin-org/bcoin/network" data-show-count="true" data-count-aria-label="# forks on GitHub" aria-label="Fork bcoin-org/bcoin on GitHub">Fork</a>
                            </div>
                        </div>




					</div>
				</div>

				<!-- MAIN MENU -->
				<nav id="custom-collapse" class="main-nav collapse clearfix">
					<ul class="inner-nav pull-right">

						<!-- HOME -->
						<li><a href="../index.html">Home</a></li>
						<!-- END HOME -->

						<!-- FEATURES -->
						<li><a href="../index.html#features">What is Bcoin</a></li>
						<!-- END FEATURES -->

						<!-- GUIDES -->
						<li><a href="../guides.html">Guides</a></li>
						<!-- GUIDES -->

						<!-- API REFERENCE - newer, how to interact once you're setup -->
						<li><a href="../api-docs/index.html">API Docs</a></li>
						<!-- END API -->

						<!-- FULL DOCS - older, full reference
						<li><a href="https://bcoin.io/docs/index.html">Docs</a></li> -->
						<!-- END DOCS -->

						<!-- DIVIDER
						<li><a>&nbsp;</a></li>

						<li><a href="#">All Demos</a></li>-->

					</ul>
				</nav>

			</div>
		</header>
	<!-- END HEADER -->

	<!-- WRAPPER -->
	<div class="wrapper">

		<!-- PAGE TITLE -->
		<section class="module-sm bg-white-dark" data-background="../assets/images/bg-header.jpg">
			<div class="container">

				<div class="row">
					<div class="col-sm-12 text-center">

						<h2 class="montserrat text-uppercase m-b-10"><span class="text-highlight-black" style="line-height: 1.5;">&nbsp;Guides &nbsp;and &nbsp;Videos&nbsp;</span></h2>

					</div>
				</div>

			</div>
		</section>
		<!-- END PAGE TITLE -->

		<!-- GUIDES/TUTORIALS -->
		<section class="module" style="padding-top:70px !important;">
			<div class="container">

				<div class="row">
					<!-- START OF ARTICLE CONTAINER -->
					<div class="col-sm-9 blog-content post-thumbnail">
						<!-- POST IMAGE -->
						<article class="post format-image">
							<div class="row">
								<!--<div class="col-sm-5">
									<div class="post-preview">
										<a href="#"><img src="../assets/images/guides/get-started.png" alt=""></a>
									</div>
								</div>-->

								<!-- after re-enabling the above code, change the col-sm below to col-sm-7 -->
								<div class="panel-group">
									<div class="col-sm-12 panel panel-default">
										<div class="post-content" style="color:#000;">
					<!-- START OF GUIDE -->
<style>
table, tr, td, th { border: 1px solid black; padding: 5px; text-align: center;}
code { white-space: nowrap;}
</style>

<h2 class="post-title panel-title" id="events-and-sockets">Events and Sockets</h2><ul class="post-meta"><li class="author">By Matthew Zipkin</li></ul><h2 id="listen-for-events">Listen for Events</h2><p>To listen for and react to events in bcoin, a listener must be added in the runtime script.
If you are running a full node (for example) you might already be familiar with <a href="https://github.com/bcoin-org/bcoin/blob/master/bin/node">the bcoin
full node launch script</a>, which
instantiates a <code>FullNode</code> object, adds a wallet, and begins the connection and synchronization process.
The script ends with an <code>async</code> function that actually starts these processes, and this is
a good place to add event listeners. <a href="#events-directory">Using the table below</a> you can discover which object needs
to be listened <code>on</code> for each event type. Notice that because the wallet is added as a plugin,
its object hierarchy path is a little... awkward :-)</p>
<pre class="snippet line-numbers language-javascript "><code class="line-numbers language-javascript"><span class="token comment">// Based on https://github.com/bcoin-org/bcoin/blob/master/bin/node</span>

<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> node<span class="token punctuation">.</span><span class="token function">ensure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> node<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> node<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  node<span class="token punctuation">.</span><span class="token function">startSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// add event listeners after everything is open, connected, and started</span>

  <span class="token comment">// NODE</span>
  node<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'tx'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>details<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">' -- node tx -- \n'</span><span class="token punctuation">,</span> details<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  node<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'block'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>details<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">' -- node block -- \n'</span><span class="token punctuation">,</span> details<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// MEMPOOL</span>
  node<span class="token punctuation">.</span>mempool<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'confirmed'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>details<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">' -- mempool confirmed -- \n'</span><span class="token punctuation">,</span> details<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// WALLET</span>
  node<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span>walletdb<span class="token punctuation">.</span>wdb<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'balance'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>details<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">' -- wallet balance -- \n'</span><span class="token punctuation">,</span> details<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  node<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span>walletdb<span class="token punctuation">.</span>wdb<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'confirmed'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>details<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">' -- wallet confirmed -- \n'</span><span class="token punctuation">,</span> details<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  node<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span>walletdb<span class="token punctuation">.</span>wdb<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'address'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>details<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">' -- wallet address -- \n'</span><span class="token punctuation">,</span> details<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>stack<span class="token punctuation">)</span><span class="token punctuation">;</span>
  process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><button class="copy-button"><img src="../assets/images/clippy.svg" alt="Copy to clipboard"></button></pre><h2 id="events-directory">Events Directory</h2><p>This list is comprehensive for all Bitcoin transaction, wallet, and blockchain activity.
Events regarding errors, socket connections and peer connections have been omitted for clarity.
Notice that certain methods emit the same events but with different return objects,
and not all re-emitters return everything they receive.</p>
<table>
<thead>
<tr>
<th>Event</th>
<th>Returns</th>
<th>Origin</th>
<th>Re-Emitters</th>
</tr>
</thead>
<tbody><tr>
<td><code>tip</code></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chainentry.js">ChainEntry</a></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chain.js">Chain</a>: <code>open()</code>, <code>disconnect()</code>, <code>reconnect()</code>, <code>setBestChain()</code>, <code>reset()</code></td>
<td></td>
</tr>
<tr>
<td><code>connect</code></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chainentry.js">ChainEntry</a>, <a href="https://github.com/bcoin-org/bcoin/blob/master/lib/primitives/block.js">Block</a>, <a href="https://github.com/bcoin-org/bcoin/blob/master/lib/coins/coinview.js">CoinView</a></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chain.js">Chain</a>: <code>setBestChain()</code>, <code>reconnect()</code></td>
<td><em>chain</em>&#8594;<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/node/fullnode.js">FullNode</a> (returns&nbsp;ChainEntry,&nbsp;Block&nbsp;only)<br><em>chain</em>&#8594;<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/node/spvnode.js">SPVNode</a> (returns&nbsp;ChainEntry,&nbsp;Block&nbsp;only)<br><em>SPVNode</em>,&nbsp;<em>FullNode</em>&#8594;<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/nodeclient.js">NodeClient</a> (emits as <code>block connect</code>, returns&nbsp;ChainEntry,&nbsp;Block.txs&nbsp;only)</td>
</tr>
<tr>
<td><code>disconnect</code></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chainentry.js">ChainEntry</a>, <a href="https://github.com/bcoin-org/bcoin/blob/master/lib/primitives/headers.js">Headers</a>, <a href="https://github.com/bcoin-org/bcoin/blob/master/lib/coins/coinview.js">CoinView</a></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chain.js">Chain</a>: <code>reorganizeSPV()</code></td>
<td><em>chain</em>&#8594;<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/node/fullnode.js">FullNode</a> (returns&nbsp;ChainEntry,&nbsp;Headers&nbsp;only)<br><em>chain</em>&#8594;<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/node/spvnode.js">SPVNode</a> (returns&nbsp;ChainEntry,&nbsp;Headers&nbsp;only)<br><em>SPVNode</em>,&nbsp;<em>FullNode</em>&#8594;<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/nodeclient.js">NodeClient</a> (emits as <code>block disconnect</code>, returns&nbsp;ChainEntry&nbsp;only)</td>
</tr>
<tr>
<td><code>disconnect</code></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chainentry.js">ChainEntry</a>, <a href="https://github.com/bcoin-org/bcoin/blob/master/lib/primitives/block.js">Block</a>, <a href="https://github.com/bcoin-org/bcoin/blob/master/lib/coins/coinview.js">CoinView</a></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chain.js">Chain</a>: <code>disconnect()</code></td>
<td><em>chain</em>&#8594;<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/node/fullnode.js">FullNode</a> (returns&nbsp;ChainEntry,&nbsp;Block&nbsp;only)<br><em>chain</em>&#8594;<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/node/spvnode.js">SPVNode</a> (returns&nbsp;ChainEntry,&nbsp;Block&nbsp;only)<br><em>SPVNode</em>,&nbsp;<em>FullNode</em>&#8594;<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/nodeclient.js">NodeClient</a> (emits as <code>block disconnect</code>, returns&nbsp;ChainEntry&nbsp;only)</td>
</tr>
<tr>
<td><code>reconnect</code></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chainentry.js">ChainEntry</a>, <a href="https://github.com/bcoin-org/bcoin/blob/master/lib/primitives/block.js">Block</a></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chain.js">Chain</a>: <code>reconnect()</code></td>
<td></td>
</tr>
<tr>
<td><code>reorganize</code></td>
<td>tip (<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chainentry.js">ChainEntry</a>), competitor (<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chainentry.js">ChainEntry</a>)</td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chain.js">Chain</a>: <code>reorganize()</code>, <code>reorganizeSPV()</code></td>
<td><em>chain</em>&#8594;<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/node/fullnode.js">FullNode</a><br><em>chain</em>&#8594;<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/node/spvnode.js">SPVNode</a></td>
</tr>
<tr>
<td><code>block</code></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/primitives/block.js">Block</a>, <a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chainentry.js">ChainEntry</a></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chain.js">Chain</a>: <code>setBestChain()</code><br><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/mining/cpuminer.js">CPUMiner</a>: <code>_start()</code></td>
<td><em>chain</em>&#8594;<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/net/pool.js">Pool</a><br> <em>chain</em>&#8594;<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/node/fullnode.js">FullNode</a> (returns&nbsp;Block&nbsp;only)<br> <em>chain</em>&#8594;<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/node/spvnode.js">SPVNode</a> (returns&nbsp;Block&nbsp;only)</td>
</tr>
<tr>
<td><code>competitor</code></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/primitives/block.js">Block</a>, <a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chainentry.js">ChainEntry</a></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chain.js">Chain</a>: <code>saveAlternate()</code></td>
<td></td>
</tr>
<tr>
<td><code>bad orphan</code></td>
<td>Error, ID</td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chain.js">Chain</a>: <code>handleOrphans()</code><br><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/mempool/mempool.js">Mempool</a>: <code>handleOrphans()</code></td>
<td></td>
</tr>
<tr>
<td><code>resolved</code></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/primitives/block.js">Block</a>, <a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chainentry.js">ChainEntry</a></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chain.js">Chain</a>: <code>handleOrphans()</code></td>
<td></td>
</tr>
<tr>
<td><code>checkpoint</code></td>
<td>Hash, Height</td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chain.js">Chain</a>: <code>verifyCheckpoint()</code></td>
<td></td>
</tr>
<tr>
<td><code>orphan</code></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/primitives/block.js">Block</a></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chain.js">Chain</a>: <code>storeOrphan()</code></td>
<td></td>
</tr>
<tr>
<td><code>full</code></td>
<td></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chain.js">Chain</a>: <code>maybeSync()</code></td>
<td><em>chain</em>&#8594;<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/net/pool.js">Pool</a></td>
</tr>
<tr>
<td><code>confirmed</code></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/primitives/tx.js">TX</a>, <a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chainentry.js">ChainEntry</a></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/mempool/mempool.js">Mempool</a>: <code>_addBlock()</code></td>
<td></td>
</tr>
<tr>
<td><code>confirmed</code></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/primitives/tx.js">TX</a>, <a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/txdb.js">Details</a></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/txdb.js">TXDB</a>: <code>confirm()</code></td>
<td><em>txdb</em>&#8594;<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/walletdb.js">WalletDB</a> (also&nbsp;returns&nbsp;Wallet)<br><em>txdb</em>&#8594;<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/wallet.js">Wallet</a></td>
</tr>
<tr>
<td><code>unconfirmed</code></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/primitives/tx.js">TX</a>, <a href="https://github.com/bcoin-org/bcoin/blob/master/lib/primitives/block.js">Block</a></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/mempool/mempool.js">Mempool</a>: <code>_removeBlock()</code></td>
<td></td>
</tr>
<tr>
<td><code>unconfirmed</code></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/primitives/tx.js">TX</a>, <a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/txdb.js">Details</a></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/txdb.js">TXDB</a>: <code>disconnect()</code></td>
<td><em>txdb</em>&#8594;<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/walletdb.js">WalletDB</a> (also&nbsp;returns&nbsp;Wallet)<br><em>txdb</em>&#8594;<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/wallet.js">Wallet</a></td>
</tr>
<tr>
<td><code>conflict</code></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/primitives/tx.js">TX</a></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/mempool/mempool.js">Mempool</a>: <code>_removeBlock()</code></td>
<td></td>
</tr>
<tr>
<td><code>conflict</code></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/primitives/tx.js">TX</a>, <a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/txdb.js">Details</a></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/txdb.js">TXDB</a>: <code>disconnect()</code></td>
<td><em>txdb</em>&#8594;<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/walletdb.js">WalletDB</a> (also&nbsp;returns&nbsp;Wallet)<br><em>txdb</em>&#8594;<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/wallet.js">Wallet</a></td>
</tr>
<tr>
<td><code>tx</code></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/primitives/tx.js">TX</a>, <a href="https://github.com/bcoin-org/bcoin/blob/master/lib/coins/coinview.js">CoinView</a></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/mempool/mempool.js">Mempool</a>: <code>addEntry()</code></td>
<td><em>mempool</em>&#8594;<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/net/pool.js">Pool</a> (returns&nbsp;TX&nbsp;only)<br> <em>mempool</em>&#8594;<em>pool</em>&#8594;<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/node/spvnode.js">SPVNode</a> (returns&nbsp;TX&nbsp;only)<br> <em>mempool</em>&#8594;<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/node/fullnode.js">FullNode</a> (returns&nbsp;TX&nbsp;only)<br><em>SPVNode</em>,&nbsp;<em>FullNode</em>&#8594;<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/nodeclient.js">NodeClient</a> (returns&nbsp;TX&nbsp;only)</td>
</tr>
<tr>
<td><code>tx</code></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/primitives/tx.js">TX</a></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/net/pool.js">Pool</a>: <code>_handleTX()</code><br>(only if there is no mempool, i.e. SPV)</td>
<td><em>pool</em>&#8594;<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/node/spvnode.js">SPVNode</a></td>
</tr>
<tr>
<td><code>tx</code></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/primitives/tx.js">TX</a>, <a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/txdb.js">Details</a></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/txdb.js">TXDB</a>: <code>insert()</code></td>
<td><em>txdb</em>&#8594;<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/walletdb.js">WalletDB</a> (also&nbsp;returns&nbsp;Wallet)<br><em>txdb</em>&#8594;<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/wallet.js">Wallet</a></td>
</tr>
<tr>
<td><code>double spend</code></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/mempool/mempoolentry.js">MempoolEntry</a></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/mempool/mempool.js">Mempool</a>: <code>removeDoubleSpends()</code></td>
<td></td>
</tr>
<tr>
<td><code>balance</code></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/txdb.js">Balance</a></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/txdb.js">TXDB</a>: <code>insert()</code>, <code>confirm()</code>, <code>disconnect()</code>, <code>erase()</code></td>
<td><em>txdb</em>&#8594;<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/walletdb.js">WalletDB</a> (also&nbsp;returns&nbsp;Wallet)<br><em>txdb</em>&#8594;<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/wallet.js">Wallet</a></td>
</tr>
<tr>
<td><code>address</code></td>
<td>[<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/walletkey.js">WalletKey</a>]</td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/wallet.js">Wallet</a>: <code>_add()</code>,</td>
<td><em>wallet</em>&#8594;<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/walletdb.js">WalletDB</a> (returns&nbsp;parent&nbsp;Wallet,&nbsp;[WalletKey])</td>
</tr>
</tbody></table>
<h2 id="socket-events">Socket Events</h2><p>Websocket connections in bcoin are handled by two servers, one for <code>Node</code> and one for <code>Wallet</code>.
Those servers each have child objects such as <code>Chain</code>, <code>Mempool</code>, <code>Pool</code>, and <code>WalletDB</code>, and
relay events from them out the socket. To receive an event, the socket client must watch a
channel (such as <code>chain</code>, <code>mempool</code>, or <code>auth</code>) or join a wallet
(which would be user-defined like <code>primary</code>, <code>hot-wallet</code>, or <code>multisig1</code>). All wallets can be
joined at once by joining <code>&#39;*&#39;</code>. </p>
<h3 id="listen-for-socket-events-with-bsock">Listen for Socket Events with bsock</h3><p>To make a socket connection to bcoin, you need to run a websocket client.
Luckily the bcoin developers have developed <a href="https://github.com/bcoin-org/bsock">bsock</a>, 
a minimal websocket-only implementation of the socket.io protocol. By default, bsock listens on
<code>localhost</code>, and you only need to pass it a port number to connect to one of the bcoin servers.
The example below illustrates how to establish the socket connection, authenticate with your
user-defined <a href="https://bcoin.io/api-docs/#authentication">API key</a> and then send and receive events!
<a href="#socket-events-directory">See the tables below for a complete list of calls and events available in bcoin.</a></p>
<pre class="snippet line-numbers language-javascript "><code class="line-numbers language-javascript"><span class="token comment">// bsock-example.js</span>

<span class="token keyword">const</span> bsock <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bsock'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>Network<span class="token punctuation">,</span> ChainEntry<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bcoin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> network <span class="token operator">=</span> Network<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'regtest'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> apiKey <span class="token operator">=</span> <span class="token string">'api-key'</span><span class="token punctuation">;</span>

nodeSocket <span class="token operator">=</span> bsock<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>network<span class="token punctuation">.</span>rpcPort<span class="token punctuation">)</span><span class="token punctuation">;</span>
walletSocket <span class="token operator">=</span> bsock<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>network<span class="token punctuation">.</span>walletPort<span class="token punctuation">)</span><span class="token punctuation">;</span>

nodeSocket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'connect'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Node - Connect event:\n'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// `auth` must be called before any other actions</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Node - Attempting auth:\n'</span><span class="token punctuation">,</span> <span class="token keyword">await</span> nodeSocket<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'auth'</span><span class="token punctuation">,</span> apiKey<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// `watch chain` subscirbes us to chain events like `block`</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Node - Attempting watch chain:\n'</span><span class="token punctuation">,</span> <span class="token keyword">await</span> nodeSocket<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'watch chain'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Some calls simply request information from the server like an http request</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Node - Attempting get tip:'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> tip <span class="token operator">=</span> <span class="token keyword">await</span> nodeSocket<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'get tip'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ChainEntry<span class="token punctuation">.</span><span class="token function">fromRaw</span><span class="token punctuation">(</span>tip<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Node - Connection Error:\n'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// listen for new blocks</span>
nodeSocket<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'chain connect'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>raw<span class="token punctuation">,</span> txs<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Node - Chain Connect Event:\n'</span><span class="token punctuation">,</span> ChainEntry<span class="token punctuation">.</span><span class="token function">fromRaw</span><span class="token punctuation">(</span>raw<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

walletSocket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'connect'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Wallet - Connect event:\n'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// `auth` is required before proceeding</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Wallet - Attempting auth:\n'</span><span class="token punctuation">,</span> <span class="token keyword">await</span> walletSocket<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'auth'</span><span class="token punctuation">,</span> apiKey<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// here we join all wallets, but we could also just join `primary` or any other wallet</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Wallet - Attempting join *:\n'</span><span class="token punctuation">,</span> <span class="token keyword">await</span> walletSocket<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'join'</span><span class="token punctuation">,</span> <span class="token string">'*'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Wallet - Connection Error:\n'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// listen for new wallet transactions</span>
walletSocket<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'tx'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>wallet<span class="token punctuation">,</span> tx<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Wallet - TX Event -- wallet:\n'</span><span class="token punctuation">,</span> wallet<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Wallet - TX Event -- tx:\n'</span><span class="token punctuation">,</span> tx<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// listen for new address events</span>
<span class="token comment">// (only fired when current account address receives a transaction)</span>
walletSocket<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'address'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>wallet<span class="token punctuation">,</span> json<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Wallet - Address Event -- wallet:\n'</span><span class="token punctuation">,</span> wallet<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Wallet - Address Event -- json:\n'</span><span class="token punctuation">,</span> json<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><button class="copy-button"><img src="../assets/images/clippy.svg" alt="Copy to clipboard"></button></pre><p>To see this script in action, first start bcoin however you usually do:</p>
<pre class="snippet line-numbers language-bash "><code class="line-numbers language-bash">bcoin --daemon --network<span class="token operator">=</span>regtest</code><button class="copy-button"><img src="../assets/images/clippy.svg" alt="Copy to clipboard"></button></pre><p>Run the script (this is where the event output will be printed):</p>
<pre class="snippet line-numbers language-bash "><code class="line-numbers language-bash">node bsock-example.js</code><button class="copy-button"><img src="../assets/images/clippy.svg" alt="Copy to clipboard"></button></pre><p>Then, in a separate terminal window, run some commands to trigger the events!</p>
<pre class="snippet line-numbers language-bash "><code class="line-numbers language-bash">bcoin-cli rpc generatetoaddress 1  RJ14p2tpf5ANiFJBpKrTSPTgFnzScsDAhN</code><button class="copy-button"><img src="../assets/images/clippy.svg" alt="Copy to clipboard"></button></pre><h3 id="sockets-made-easy-bclient">Sockets made easy: bclient</h3><p><code>bsock</code> is a great low-level library for dealing with sockets, but we also have
<a href="https://github.com/bcoin-org/bclient">bclient</a> which simplifies both socket and regular http
connections. A simple one-line command in the terminal can listen to all wallet events and
print all the returned data:</p>
<pre class="snippet line-numbers language-bash "><code class="line-numbers language-bash">bwallet-cli listen</code><button class="copy-button"><img src="../assets/images/clippy.svg" alt="Copy to clipboard"></button></pre><p><code>bclient</code> can also be used in a script to listen for events. If you&#39;re already familiar with
the <a href="https://bcoin.io/api-docs">bclient API</a> this will look very familiar. Here&#39;s part of the
script above re-written using <code>bclient</code> instead of <code>bsock</code>:</p>
<pre class="snippet line-numbers language-javascript "><code class="line-numbers language-javascript"><span class="token keyword">const</span> <span class="token punctuation">{</span>NodeClient<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bclient'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>Network<span class="token punctuation">,</span> ChainEntry<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bcoin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> network <span class="token operator">=</span> Network<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'regtest'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> clientOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
  network<span class="token punctuation">:</span> network<span class="token punctuation">.</span>type<span class="token punctuation">,</span>
  port<span class="token punctuation">:</span> network<span class="token punctuation">.</span>rpcPort<span class="token punctuation">,</span>
  apiKey<span class="token punctuation">:</span> <span class="token string">'api-key'</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NodeClient</span><span class="token punctuation">(</span>clientOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token comment">// bclient handles the connection, the auth, and the channel subscriptions</span>
  <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// use socket connection to request data</span>
  <span class="token keyword">const</span> tip <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">getTip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tip<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// listen for new blocks</span>
client<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'chain connect'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>raw<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Node - Chain Connect Event:\n'</span><span class="token punctuation">,</span> ChainEntry<span class="token punctuation">.</span><span class="token function">fromRaw</span><span class="token punctuation">(</span>raw<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><button class="copy-button"><img src="../assets/images/clippy.svg" alt="Copy to clipboard"></button></pre><h2 id="socket-events-directory">Socket Events Directory</h2><h3 id="wallet">Wallet</h3><p>All wallet events are emitted by a <code>WalletDB</code> object, which may have been triggered by its parent
<code>TXDB</code> or <code>Wallet</code>. The socket emits the event along with the wallet ID, and the same &quot;Returns&quot; as listed above.</p>
<table>
<thead>
<tr>
<th>Event</th>
<th>Returns</th>
</tr>
</thead>
<tbody><tr>
<td><code>tx</code></td>
<td>WalletID, <a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/txdb.js">TX Details</a></td>
</tr>
<tr>
<td><code>confirmed</code></td>
<td>WalletID, <a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/txdb.js">TX Details</a></td>
</tr>
<tr>
<td><code>unconfirmed</code></td>
<td>WalletID, <a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/txdb.js">TX Details</a></td>
</tr>
<tr>
<td><code>conflict</code></td>
<td>WalletID, <a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/txdb.js">TX Details</a></td>
</tr>
<tr>
<td><code>balance</code></td>
<td>WalletID, <a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/txdb.js">Balance</a></td>
</tr>
<tr>
<td><code>address</code></td>
<td>WalletID, [<a href="https://github.com/bcoin-org/bcoin/blob/master/lib/wallet/walletkey.js">WalletKey</a>]</td>
</tr>
</tbody></table>
<h3 id="node">Node</h3><table>
<thead>
<tr>
<th>Event</th>
<th>Returns</th>
<th>Channel</th>
<th>Origin</th>
<th>Original Event</th>
</tr>
</thead>
<tbody><tr>
<td><code>chain connect</code></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chainentry.js">ChainEntry</a><em>.toRaw()</em></td>
<td><code>chain</code></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chain.js">Chain</a></td>
<td><code>connect</code></td>
</tr>
<tr>
<td><code>block connect</code></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chainentry.js">ChainEntry</a><em>.toRaw()</em>, <a href="https://github.com/bcoin-org/bcoin/blob/master/lib/primitives/block.js">Block</a><em>.txs</em></td>
<td><code>chain</code></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chain.js">Chain</a></td>
<td><code>connect</code></td>
</tr>
<tr>
<td><code>chain disconnect</code></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chainentry.js">ChainEntry</a><em>.toRaw()</em></td>
<td><code>chain</code></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chain.js">Chain</a></td>
<td><code>disconnect</code></td>
</tr>
<tr>
<td><code>block disconnect</code></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chainentry.js">ChainEntry</a><em>.toRaw()</em></td>
<td><code>chain</code></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chain.js">Chain</a></td>
<td><code>disconnect</code></td>
</tr>
<tr>
<td><code>tx</code></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/primitives/tx.js">TX</a><em>.toRaw()</em></td>
<td><code>mempool</code></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/net/pool.js">Pool</a></td>
<td><code>tx</code></td>
</tr>
</tbody></table>
<h2 id="server-hooks">Server Hooks</h2><p>Certain events can also be sent back to the server from the client to request new data
or trigger a server action. The client action is a &quot;call&quot; and the server waits with a &quot;hook&quot;.</p>
<h3 id="wallet">Wallet</h3><table>
<thead>
<tr>
<th>Event</th>
<th>Args</th>
<th>Returns</th>
</tr>
</thead>
<tbody><tr>
<td><code>auth</code></td>
<td>1. <em>api key</em></td>
<td><em>null</em></td>
</tr>
<tr>
<td><code>join</code></td>
<td>1. <em>wallet id</em> <br>2. <em>wallet token</em></td>
<td><em>null</em></td>
</tr>
<tr>
<td><code>leave</code></td>
<td>1. <em>wallet id</em></td>
<td><em>null</em></td>
</tr>
</tbody></table>
<h3 id="node">Node</h3><table>
<thead>
<tr>
<th>Event</th>
<th>Args</th>
<th>Returns</th>
</tr>
</thead>
<tbody><tr>
<td><code>auth</code></td>
<td>1. <em>api key</em></td>
<td><em>null</em></td>
</tr>
<tr>
<td><code>watch chain</code></td>
<td>(none)</td>
<td><em>null</em></td>
</tr>
<tr>
<td><code>unwatch chain</code></td>
<td>(none)</td>
<td><em>null</em></td>
</tr>
<tr>
<td><code>watch mempool</code></td>
<td>(none)</td>
<td><em>null</em></td>
</tr>
<tr>
<td><code>unwatch mempool</code></td>
<td>(none)</td>
<td><em>null</em></td>
</tr>
<tr>
<td><code>set filter</code></td>
<td>1. <em>Bloom filter</em> (Buffer)</td>
<td><em>null</em></td>
</tr>
<tr>
<td><code>get tip</code></td>
<td>(none)</td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chainentry.js">ChainEntry</a><em>.toRaw()</em></td>
</tr>
<tr>
<td><code>get entry</code></td>
<td>1. <em>hash</em></td>
<td><a href="https://github.com/bcoin-org/bcoin/blob/master/lib/blockchain/chainentry.js">ChainEntry</a><em>.toRaw()</em></td>
</tr>
<tr>
<td><code>get hashes</code></td>
<td>1. <em>start</em> (int)<br>2. <em>end</em> (int)</td>
<td>[hashes]</td>
</tr>
<tr>
<td><code>add filter</code></td>
<td>1. <em>filter</em> ([Buffer])</td>
<td><em>null</em></td>
</tr>
<tr>
<td><code>reset filter</code></td>
<td>(none)</td>
<td><em>null</em></td>
</tr>
<tr>
<td><code>estimate fee</code></td>
<td>1. <em>blocks</em> (int)</td>
<td><em>fee rate</em> (float)</td>
</tr>
<tr>
<td><code>send</code></td>
<td>1. <em>tx</em> (Buffer)</td>
<td><em>null</em></td>
</tr>
<tr>
<td><code>rescan</code></td>
<td>1. <em>hash</em></td>
<td><em>null</em></td>
</tr>
</tbody></table>


					<!-- END OF GUIDE -->
									</div>
								</div>
							</div>
						</div>
					</article>
					<!-- END OF ARTICLE CONTAINER -->

					</div>
					<!-- END BLOG CONTENT -->

					<!-- START SIDEBAR -->
<div class="col-sm-3 sidebar">
  <!-- TEXT WIDGET -->
  <div class="widget">
    <h6 class="montserrat text-uppercase bottom-line">Installation</h6>
      <p>
        <a href="https://github.com/bcoin-org/bcoin/blob/master/docs/getting-started.md">
          See the "Getting Started" guide in the repository documents directory.
        </a>
      </p>
  </div>
  <!-- END TEXT WIDGET -->

  <!-- CATEGORIES WIDGET -->
<div class="widget guide-list">
<h6 class="montserrat text-uppercase bottom-line">Guides</h6>
<ul class="icons-list">
<!-- GUIDES-LIST -->
<li><a href="working-with-txs.html">Working with transactions</a></li>
<li><a href="webapp.html">Building web applications with the bcoin library</a></li>
<li><a href="wallets.html">Wallets and Accounts and Keys, Oh My!</a></li>
<li><a href="swaps.html">Cross-Chain Atomic Swaps</a></li>
<li><a href="segwit.html">Segwit and Bcoin</a></li>
<li><a href="scripting.html">Intro to Scripting</a></li>
<li><a href="op_return.html">Store Data on the Blockchain</a></li>
<li><a href="multisig-tx.html">Creating Multisignature Transactions</a></li>
<li><a href="multisig-cli.html">Multisig on the command line</a></li>
<li><a href="generate-address.html">Generate an Address</a></li>
<li><a href="events.html">Events and Sockets</a></li>
<li><a href="crowdfund-tx.html">Create a Crowdfunding Transaction</a></li>
<li><a href="connect-local-nodes.html">Connect two local nodes</a></li>
<li><a href="cltv.html">Time Locked Bitcoin Transactions w/ CLTV</a></li>
<li><a href="building-plugins.html">Building Awesome bcoin Plugins</a></li>
<li><a href="browser.html">Run a bcoin full node in a web browser</a></li>
<li><a href="bcoin-clock.html">Make your own Bcoin Block Clock!</a></li>
<!-- /GUIDES-LIST -->
</ul>
</div>
  <!-- END CATEGORIES WIDGET -->

  <!-- TEXT WIDGET -->
  <div class="widget">
    <h6 class="montserrat text-uppercase bottom-line">Looking for Docs?</h6>
    <p>Checkout our <a href="../api-docs/index.html">API Docs</a> or the <a href="https://bcoin.io/docs/index.html">Full Documentation</a></p>
  </div>
  <!-- END TEXT WIDGET -->

  <!-- TEXT WIDGET -->
  <div class="widget">
    <h6 class="montserrat text-uppercase bottom-line">Get Involved</h6>
    <p>If you think you've got what it takes to make your own bcoin guides and tutorials, head on over to our <a href="https://github.com/bcoin-org/bcoin-org.github.io">GitHub repo</a> to see how you can make a request or contribute your own and earn bounties! You can also reach out to us on <a href="https://t.me/bcoinorg"> Telegram.</a></p>
  </div>
  <!-- END TEXT WIDGET -->
</div>

					<!-- END SIDEBAR -->

				</div><!-- .row -->

			</div>
		</section>
		<!-- END NEW BLOGS -->

				</div><!-- .row -->

			</div>
		</section>
		<!-- END BLOGS -->


		<!-- PARALLAX DOCS CTA -->
		<section class="module bg-white-alfa-30 parallax color-white" data-background="../assets/images/bg-header.jpg">
			<div class="container">

				<div class="row">
					<div class="col-sm-12">
						<div class="text-center">
							<h2 class="montserrat text-uppercase m-b-30">Ready to start building? Read the docs!</h2>
							<a href="https://bcoin.io/docs/index.html" target="_blank" class="btn btn-lg btn-purple">Documentation</a>
						</div>
					</div>
				</div><!-- .row -->

			</div>
		</section>
		<!-- END PARALLAX DOCS CTA -->

		<!-- FOOTER -->
		<footer id="footer" class="footer-minimal">
			<div class="container">

				<div class="row">
					<div class="col-sm-12">
						<ul class="social-icons social-icons-circle text-center m-b-35">
							<li><a href="https://twitter.com/bcoin"><i class="fa fa-twitter"></i></a></li>
							<li><a href="https://github.com/bcoin-org/bcoin"><i class="fa fa-github"></i></a></li>


							<li><a href="https://t.me/bcoinorg" target="_blank"><img src="assets/images/telegram-app.svg"></a></li>
						</ul>
					</div>
				</div>
				<div class="row">
					<div class="col-sm-12 text-center m-b-35">
						<img class="m-b-35 QR-code" src="../assets/images/donation_QR.png"/>
						<p class="m-0"><strong>Bcoin Development Donation Address:</strong><br />3Bi9H1hzCHWJoFEjc4xzVzEMywi35dyvsV</p>

					</div>
				</div>
				<div class="row">
					<div class="col-sm-12 text-center">
						<p class="m-0">Copyright <a href="#">bcoin.io, Purse</a>, 2018, All Rights Reserved.</p>

					</div>
				</div>

			</div>
		</footer>
		<!-- END FOOTER -->

	</div>
	<!-- /WRAPPER -->

	<!-- JAVASCRIPT FILES -->

	<script src="../assets/js/jquery-2.2.3.min.js"></script>
	<script src="https://maps.googleapis.com/maps/api/js?v=3"></script>
	<script src="../assets/bootstrap/js/bootstrap.min.js"></script>
	<script src="../assets/js/plugins.min.js"></script>
	<script src="../assets/js/stickyfill.min.js"></script>
	<script src="../assets/js/custom.min.js"></script>
	<script src="../assets/js/clipboard.min.js"></script>
	<script async defer src="../assets/js/prism.js"></script>
	<script>
		var copyCode = new Clipboard('.copy-button', {
		    target: function(trigger) {
		        return trigger.previousElementSibling;
		    }
		});

		copyCode.on('success', function(event) {
		    event.trigger.classList.add('success');
		    event.clearSelection();
		    // event.trigger.textContent = 'Copied!';
		    window.setTimeout(function() {
		        event.trigger.classList.remove('success');
		    }, 2000);
		});
	</script>

  <!-- github button js -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>

</body>
</html>
