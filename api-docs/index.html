
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Bcoin API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
  background-color: #272822;
}
.highlight .nn {
  color: #ffffff;
  background-color: #272822;
}
.highlight .nl {
  color: #ffffff;
  background-color: #272822;
}
.highlight .ni {
  color: #ffffff;
  background-color: #272822;
}
.highlight .bp {
  color: #ffffff;
  background-color: #272822;
}
.highlight .vg {
  color: #ffffff;
  background-color: #272822;
}
.highlight .vi {
  color: #ffffff;
  background-color: #272822;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
  background-color: #272822;
}
.highlight .w {
  color: #ffffff;
  background-color: #272822;
}
.highlight {
  color: #ffffff;
  background-color: #272822;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
  background-color: #272822;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell--curl&quot;,&quot;shell--cli&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
        <a href="https://bcoin.io">
      <img src="images/logo.png" class="logo" alt="" />
        </a>
        <div class="lang-selector">
              <a href="#" data-language-name="shell--curl">cURL</a>
              <a href="#" data-language-name="shell--cli">CLI</a>
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#auth" class="toc-h2 toc-link" data-title="Authentication">Auth</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#configuring-clients" class="toc-h1 toc-link" data-title="Configuring Clients">Configuring Clients</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#default-listeners" class="toc-h2 toc-link" data-title="Configuring Clients">Default Listeners</a>
                  </li>
                  <li>
                    <a href="#configuring-bcoin-cli" class="toc-h2 toc-link" data-title="Configuring Clients">Configuring bcoin-cli</a>
                  </li>
                  <li>
                    <a href="#using-javascript-clients" class="toc-h2 toc-link" data-title="Configuring Clients">Using Javascript Clients</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#bcoin-node" class="toc-h1 toc-link" data-title="bcoin - Node">bcoin - Node</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#bcoin-client-requests" class="toc-h2 toc-link" data-title="bcoin - Node">bcoin client requests</a>
                  </li>
                  <li>
                    <a href="#get-server-info" class="toc-h2 toc-link" data-title="bcoin - Node">Get server info</a>
                  </li>
                  <li>
                    <a href="#get-mempool-snapshot" class="toc-h2 toc-link" data-title="bcoin - Node">Get mempool snapshot</a>
                  </li>
                  <li>
                    <a href="#get-block-by-hash-or-height" class="toc-h2 toc-link" data-title="bcoin - Node">Get block by hash or height</a>
                  </li>
                  <li>
                    <a href="#get-block-header-by-hash-or-height" class="toc-h2 toc-link" data-title="bcoin - Node">Get block header by hash or height</a>
                  </li>
                  <li>
                    <a href="#get-block-filter-by-hash-or-height" class="toc-h2 toc-link" data-title="bcoin - Node">Get block filter by hash or height</a>
                  </li>
                  <li>
                    <a href="#broadcast-transaction" class="toc-h2 toc-link" data-title="bcoin - Node">Broadcast transaction</a>
                  </li>
                  <li>
                    <a href="#estimate-fee" class="toc-h2 toc-link" data-title="bcoin - Node">Estimate fee</a>
                  </li>
                  <li>
                    <a href="#reset-blockchain" class="toc-h2 toc-link" data-title="bcoin - Node">Reset blockchain</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#bcoin-coins" class="toc-h1 toc-link" data-title="bcoin - Coins">bcoin - Coins</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-coin-by-outpoint" class="toc-h2 toc-link" data-title="bcoin - Coins">Get coin by Outpoint</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#bcoin-transactions" class="toc-h1 toc-link" data-title="bcoin - Transactions">bcoin - Transactions</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-tx-by-hash" class="toc-h2 toc-link" data-title="bcoin - Transactions">Get tx by hash</a>
                  </li>
                  <li>
                    <a href="#get-tx-by-address" class="toc-h2 toc-link" data-title="bcoin - Transactions">Get tx by address</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#rpc-calls-node" class="toc-h1 toc-link" data-title="RPC Calls - Node">RPC Calls - Node</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#post-parameters-rpc" class="toc-h2 toc-link" data-title="RPC Calls - Node">POST Parameters RPC</a>
                  </li>
                  <li>
                    <a href="#stop" class="toc-h2 toc-link" data-title="RPC Calls - Node">stop</a>
                  </li>
                  <li>
                    <a href="#getinfo" class="toc-h2 toc-link" data-title="RPC Calls - Node">getinfo</a>
                  </li>
                  <li>
                    <a href="#getmemoryinfo" class="toc-h2 toc-link" data-title="RPC Calls - Node">getmemoryinfo</a>
                  </li>
                  <li>
                    <a href="#setloglevel" class="toc-h2 toc-link" data-title="RPC Calls - Node">setloglevel</a>
                  </li>
                  <li>
                    <a href="#validateaddress" class="toc-h2 toc-link" data-title="RPC Calls - Node">validateaddress</a>
                  </li>
                  <li>
                    <a href="#createmultisig" class="toc-h2 toc-link" data-title="RPC Calls - Node">createmultisig</a>
                  </li>
                  <li>
                    <a href="#createwitnessaddress" class="toc-h2 toc-link" data-title="RPC Calls - Node">createwitnessaddress</a>
                  </li>
                  <li>
                    <a href="#signmessagewithprivkey" class="toc-h2 toc-link" data-title="RPC Calls - Node">signmessagewithprivkey</a>
                  </li>
                  <li>
                    <a href="#verifymessage" class="toc-h2 toc-link" data-title="RPC Calls - Node">verifymessage</a>
                  </li>
                  <li>
                    <a href="#setmocktime" class="toc-h2 toc-link" data-title="RPC Calls - Node">setmocktime</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#rpc-calls-chain" class="toc-h1 toc-link" data-title="RPC Calls - Chain">RPC Calls - Chain</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#pruneblockchain" class="toc-h2 toc-link" data-title="RPC Calls - Chain">pruneblockchain</a>
                  </li>
                  <li>
                    <a href="#invalidateblock" class="toc-h2 toc-link" data-title="RPC Calls - Chain">invalidateblock</a>
                  </li>
                  <li>
                    <a href="#reconsiderblock" class="toc-h2 toc-link" data-title="RPC Calls - Chain">reconsiderblock</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#rpc-calls-block" class="toc-h1 toc-link" data-title="RPC Calls - Block">RPC Calls - Block</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#getblockchaininfo" class="toc-h2 toc-link" data-title="RPC Calls - Block">getblockchaininfo</a>
                  </li>
                  <li>
                    <a href="#getbestblockhash" class="toc-h2 toc-link" data-title="RPC Calls - Block">getbestblockhash</a>
                  </li>
                  <li>
                    <a href="#getblockcount" class="toc-h2 toc-link" data-title="RPC Calls - Block">getblockcount</a>
                  </li>
                  <li>
                    <a href="#getblock" class="toc-h2 toc-link" data-title="RPC Calls - Block">getblock</a>
                  </li>
                  <li>
                    <a href="#getblockbyheight" class="toc-h2 toc-link" data-title="RPC Calls - Block">getblockbyheight</a>
                  </li>
                  <li>
                    <a href="#getblockhash" class="toc-h2 toc-link" data-title="RPC Calls - Block">getblockhash</a>
                  </li>
                  <li>
                    <a href="#getblockheader" class="toc-h2 toc-link" data-title="RPC Calls - Block">getblockheader</a>
                  </li>
                  <li>
                    <a href="#getchaintips" class="toc-h2 toc-link" data-title="RPC Calls - Block">getchaintips</a>
                  </li>
                  <li>
                    <a href="#getdifficulty" class="toc-h2 toc-link" data-title="RPC Calls - Block">getdifficulty</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#rpc-calls-mempool" class="toc-h1 toc-link" data-title="RPC Calls - Mempool">RPC Calls - Mempool</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#getmempoolinfo" class="toc-h2 toc-link" data-title="RPC Calls - Mempool">getmempoolinfo</a>
                  </li>
                  <li>
                    <a href="#getmempoolancestors" class="toc-h2 toc-link" data-title="RPC Calls - Mempool">getmempoolancestors</a>
                  </li>
                  <li>
                    <a href="#getmempooldescendants" class="toc-h2 toc-link" data-title="RPC Calls - Mempool">getmempooldescendants</a>
                  </li>
                  <li>
                    <a href="#getmempoolentry" class="toc-h2 toc-link" data-title="RPC Calls - Mempool">getmempoolentry</a>
                  </li>
                  <li>
                    <a href="#getrawmempool" class="toc-h2 toc-link" data-title="RPC Calls - Mempool">getrawmempool</a>
                  </li>
                  <li>
                    <a href="#prioritisetransaction" class="toc-h2 toc-link" data-title="RPC Calls - Mempool">prioritisetransaction</a>
                  </li>
                  <li>
                    <a href="#estimatefee" class="toc-h2 toc-link" data-title="RPC Calls - Mempool">estimatefee</a>
                  </li>
                  <li>
                    <a href="#estimatepriority" class="toc-h2 toc-link" data-title="RPC Calls - Mempool">estimatepriority</a>
                  </li>
                  <li>
                    <a href="#estimatesmartfee" class="toc-h2 toc-link" data-title="RPC Calls - Mempool">estimatesmartfee</a>
                  </li>
                  <li>
                    <a href="#estimatesmartpriority" class="toc-h2 toc-link" data-title="RPC Calls - Mempool">estimatesmartpriority</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#rpc-calls-transactions" class="toc-h1 toc-link" data-title="RPC Calls - Transactions">RPC Calls - Transactions</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#gettxout" class="toc-h2 toc-link" data-title="RPC Calls - Transactions">gettxout</a>
                  </li>
                  <li>
                    <a href="#gettxoutsetinfo" class="toc-h2 toc-link" data-title="RPC Calls - Transactions">gettxoutsetinfo</a>
                  </li>
                  <li>
                    <a href="#getrawtransaction" class="toc-h2 toc-link" data-title="RPC Calls - Transactions">getrawtransaction</a>
                  </li>
                  <li>
                    <a href="#decoderawtransaction" class="toc-h2 toc-link" data-title="RPC Calls - Transactions">decoderawtransaction</a>
                  </li>
                  <li>
                    <a href="#decodescript" class="toc-h2 toc-link" data-title="RPC Calls - Transactions">decodescript</a>
                  </li>
                  <li>
                    <a href="#sendrawtransaction" class="toc-h2 toc-link" data-title="RPC Calls - Transactions">sendrawtransaction</a>
                  </li>
                  <li>
                    <a href="#createrawtransaction" class="toc-h2 toc-link" data-title="RPC Calls - Transactions">createrawtransaction</a>
                  </li>
                  <li>
                    <a href="#signrawtransaction" class="toc-h2 toc-link" data-title="RPC Calls - Transactions">signrawtransaction</a>
                  </li>
                  <li>
                    <a href="#gettxoutproof" class="toc-h2 toc-link" data-title="RPC Calls - Transactions">gettxoutproof</a>
                  </li>
                  <li>
                    <a href="#verifytxoutproof" class="toc-h2 toc-link" data-title="RPC Calls - Transactions">verifytxoutproof</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#rpc-calls-mining" class="toc-h1 toc-link" data-title="RPC Calls - Mining">RPC Calls - Mining</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#getnetworkhashps" class="toc-h2 toc-link" data-title="RPC Calls - Mining">getnetworkhashps</a>
                  </li>
                  <li>
                    <a href="#getmininginfo" class="toc-h2 toc-link" data-title="RPC Calls - Mining">getmininginfo</a>
                  </li>
                  <li>
                    <a href="#getwork" class="toc-h2 toc-link" data-title="RPC Calls - Mining">getwork</a>
                  </li>
                  <li>
                    <a href="#getworklp" class="toc-h2 toc-link" data-title="RPC Calls - Mining">getworklp</a>
                  </li>
                  <li>
                    <a href="#getblocktemplate" class="toc-h2 toc-link" data-title="RPC Calls - Mining">getblocktemplate</a>
                  </li>
                  <li>
                    <a href="#submitblock" class="toc-h2 toc-link" data-title="RPC Calls - Mining">submitblock</a>
                  </li>
                  <li>
                    <a href="#verifyblock" class="toc-h2 toc-link" data-title="RPC Calls - Mining">verifyblock</a>
                  </li>
                  <li>
                    <a href="#setgenerate" class="toc-h2 toc-link" data-title="RPC Calls - Mining">setgenerate</a>
                  </li>
                  <li>
                    <a href="#getgenerate" class="toc-h2 toc-link" data-title="RPC Calls - Mining">getgenerate</a>
                  </li>
                  <li>
                    <a href="#generate" class="toc-h2 toc-link" data-title="RPC Calls - Mining">generate</a>
                  </li>
                  <li>
                    <a href="#generatetoaddress" class="toc-h2 toc-link" data-title="RPC Calls - Mining">generatetoaddress</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#rpc-calls-network" class="toc-h1 toc-link" data-title="RPC Calls - Network">RPC Calls - Network</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#getconnectioncount" class="toc-h2 toc-link" data-title="RPC Calls - Network">getconnectioncount</a>
                  </li>
                  <li>
                    <a href="#ping" class="toc-h2 toc-link" data-title="RPC Calls - Network">ping</a>
                  </li>
                  <li>
                    <a href="#getpeerinfo" class="toc-h2 toc-link" data-title="RPC Calls - Network">getpeerinfo</a>
                  </li>
                  <li>
                    <a href="#addnode" class="toc-h2 toc-link" data-title="RPC Calls - Network">addnode</a>
                  </li>
                  <li>
                    <a href="#disconnectnode" class="toc-h2 toc-link" data-title="RPC Calls - Network">disconnectnode</a>
                  </li>
                  <li>
                    <a href="#getaddednodeinfo" class="toc-h2 toc-link" data-title="RPC Calls - Network">getaddednodeinfo</a>
                  </li>
                  <li>
                    <a href="#getnettotals" class="toc-h2 toc-link" data-title="RPC Calls - Network">getnettotals</a>
                  </li>
                  <li>
                    <a href="#getnetworkinfo" class="toc-h2 toc-link" data-title="RPC Calls - Network">getnetworkinfo</a>
                  </li>
                  <li>
                    <a href="#setban" class="toc-h2 toc-link" data-title="RPC Calls - Network">setban</a>
                  </li>
                  <li>
                    <a href="#listbanned" class="toc-h2 toc-link" data-title="RPC Calls - Network">listbanned</a>
                  </li>
                  <li>
                    <a href="#clearbanned" class="toc-h2 toc-link" data-title="RPC Calls - Network">clearbanned</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#wallet" class="toc-h1 toc-link" data-title="Wallet">Wallet</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#the-wallet-client" class="toc-h2 toc-link" data-title="Wallet">The Wallet Client</a>
                  </li>
                  <li>
                    <a href="#configuration" class="toc-h2 toc-link" data-title="Wallet">Configuration</a>
                  </li>
                  <li>
                    <a href="#wallet-authentication" class="toc-h2 toc-link" data-title="Wallet">Wallet Authentication</a>
                  </li>
                  <li>
                    <a href="#the-walletdb-and-object" class="toc-h2 toc-link" data-title="Wallet">The WalletDB and Object</a>
                  </li>
                  <li>
                    <a href="#create-a-wallet" class="toc-h2 toc-link" data-title="Wallet">Create A Wallet</a>
                  </li>
                  <li>
                    <a href="#reset-authentication-token" class="toc-h2 toc-link" data-title="Wallet">Reset Authentication Token</a>
                  </li>
                  <li>
                    <a href="#get-wallet-info" class="toc-h2 toc-link" data-title="Wallet">Get Wallet Info</a>
                  </li>
                  <li>
                    <a href="#get-master-hd-key" class="toc-h2 toc-link" data-title="Wallet">Get Master HD Key</a>
                  </li>
                  <li>
                    <a href="#change-passphrase" class="toc-h2 toc-link" data-title="Wallet">Change Passphrase</a>
                  </li>
                  <li>
                    <a href="#send-a-transaction" class="toc-h2 toc-link" data-title="Wallet">Send a transaction</a>
                  </li>
                  <li>
                    <a href="#create-a-transaction" class="toc-h2 toc-link" data-title="Wallet">Create a Transaction</a>
                  </li>
                  <li>
                    <a href="#sign-transaction" class="toc-h2 toc-link" data-title="Wallet">Sign Transaction</a>
                  </li>
                  <li>
                    <a href="#zap-transactions" class="toc-h2 toc-link" data-title="Wallet">Zap Transactions</a>
                  </li>
                  <li>
                    <a href="#unlock-wallet" class="toc-h2 toc-link" data-title="Wallet">Unlock Wallet</a>
                  </li>
                  <li>
                    <a href="#lock-wallet" class="toc-h2 toc-link" data-title="Wallet">Lock Wallet</a>
                  </li>
                  <li>
                    <a href="#import-public-private-key" class="toc-h2 toc-link" data-title="Wallet">Import Public/Private Key</a>
                  </li>
                  <li>
                    <a href="#import-address" class="toc-h2 toc-link" data-title="Wallet">Import Address</a>
                  </li>
                  <li>
                    <a href="#get-blocks-with-wallet-txs" class="toc-h2 toc-link" data-title="Wallet">Get Blocks with Wallet Txs</a>
                  </li>
                  <li>
                    <a href="#get-wallet-block-by-height" class="toc-h2 toc-link" data-title="Wallet">Get Wallet Block by Height</a>
                  </li>
                  <li>
                    <a href="#add-xpubkey-multisig" class="toc-h2 toc-link" data-title="Wallet">Add xpubkey (Multisig)</a>
                  </li>
                  <li>
                    <a href="#remove-xpubkey-multisig" class="toc-h2 toc-link" data-title="Wallet">Remove xpubkey (Multisig)</a>
                  </li>
                  <li>
                    <a href="#get-public-key-by-address" class="toc-h2 toc-link" data-title="Wallet">Get Public Key By Address</a>
                  </li>
                  <li>
                    <a href="#get-private-key-by-address" class="toc-h2 toc-link" data-title="Wallet">Get Private Key By Address</a>
                  </li>
                  <li>
                    <a href="#generate-receiving-address" class="toc-h2 toc-link" data-title="Wallet">Generate Receiving Address</a>
                  </li>
                  <li>
                    <a href="#generate-change-address" class="toc-h2 toc-link" data-title="Wallet">Generate Change Address</a>
                  </li>
                  <li>
                    <a href="#derive-nested-address" class="toc-h2 toc-link" data-title="Wallet">Derive Nested Address</a>
                  </li>
                  <li>
                    <a href="#get-balance" class="toc-h2 toc-link" data-title="Wallet">Get Balance</a>
                  </li>
                  <li>
                    <a href="#list-all-coins" class="toc-h2 toc-link" data-title="Wallet">List all Coins</a>
                  </li>
                  <li>
                    <a href="#lock-coin-outpoints" class="toc-h2 toc-link" data-title="Wallet">Lock Coin/Outpoints</a>
                  </li>
                  <li>
                    <a href="#unlock-outpoint" class="toc-h2 toc-link" data-title="Wallet">Unlock Outpoint</a>
                  </li>
                  <li>
                    <a href="#get-locked-outpoints" class="toc-h2 toc-link" data-title="Wallet">Get Locked Outpoints</a>
                  </li>
                  <li>
                    <a href="#get-wallet-coin" class="toc-h2 toc-link" data-title="Wallet">Get Wallet Coin</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#wallet-admin-commands" class="toc-h1 toc-link" data-title="Wallet Admin Commands">Wallet Admin Commands</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#wallet-rescan" class="toc-h2 toc-link" data-title="Wallet Admin Commands">Wallet Rescan</a>
                  </li>
                  <li>
                    <a href="#wallet-resend" class="toc-h2 toc-link" data-title="Wallet Admin Commands">Wallet Resend</a>
                  </li>
                  <li>
                    <a href="#wallet-backup" class="toc-h2 toc-link" data-title="Wallet Admin Commands">Wallet Backup</a>
                  </li>
                  <li>
                    <a href="#list-all-wallets" class="toc-h2 toc-link" data-title="Wallet Admin Commands">List all Wallets</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#wallet-transactions" class="toc-h1 toc-link" data-title="Wallet Transactions">Wallet Transactions</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-wallet-tx-details" class="toc-h2 toc-link" data-title="Wallet Transactions">Get Wallet TX Details</a>
                  </li>
                  <li>
                    <a href="#delete-transaction" class="toc-h2 toc-link" data-title="Wallet Transactions">Delete Transaction</a>
                  </li>
                  <li>
                    <a href="#get-wallet-tx-history" class="toc-h2 toc-link" data-title="Wallet Transactions">Get Wallet TX History</a>
                  </li>
                  <li>
                    <a href="#get-pending-transactions" class="toc-h2 toc-link" data-title="Wallet Transactions">Get Pending Transactions</a>
                  </li>
                  <li>
                    <a href="#get-range-of-transactions" class="toc-h2 toc-link" data-title="Wallet Transactions">Get Range of Transactions</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#wallet-accounts" class="toc-h1 toc-link" data-title="Wallet Accounts">Wallet Accounts</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#account-object" class="toc-h2 toc-link" data-title="Wallet Accounts">Account Object</a>
                  </li>
                  <li>
                    <a href="#get-wallet-account-list" class="toc-h2 toc-link" data-title="Wallet Accounts">Get Wallet Account List</a>
                  </li>
                  <li>
                    <a href="#get-account-information" class="toc-h2 toc-link" data-title="Wallet Accounts">Get Account Information</a>
                  </li>
                  <li>
                    <a href="#create-new-wallet-account" class="toc-h2 toc-link" data-title="Wallet Accounts">Create new wallet account</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#rpc-calls-wallet" class="toc-h1 toc-link" data-title="RPC Calls - Wallet">RPC Calls - Wallet</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#wallet-rpc-post-parameters" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">wallet RPC POST Parameters</a>
                  </li>
                  <li>
                    <a href="#selectwallet" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">selectwallet</a>
                  </li>
                  <li>
                    <a href="#getwalletinfo" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">getwalletinfo</a>
                  </li>
                  <li>
                    <a href="#fundrawtransaction" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">fundrawtransaction</a>
                  </li>
                  <li>
                    <a href="#resendwallettransactions" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">resendwallettransactions</a>
                  </li>
                  <li>
                    <a href="#abandontransaction" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">abandontransaction</a>
                  </li>
                  <li>
                    <a href="#addmultisigaddress" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">addmultisigaddress</a>
                  </li>
                  <li>
                    <a href="#addwitnessaddress" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">addwitnessaddress</a>
                  </li>
                  <li>
                    <a href="#backupwallet" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">backupwallet</a>
                  </li>
                  <li>
                    <a href="#dumpprivkey" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">dumpprivkey</a>
                  </li>
                  <li>
                    <a href="#dumpwallet" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">dumpwallet</a>
                  </li>
                  <li>
                    <a href="#encryptwallet" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">encryptwallet</a>
                  </li>
                  <li>
                    <a href="#getaccountaddress" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">getaccountaddress</a>
                  </li>
                  <li>
                    <a href="#getaccount" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">getaccount</a>
                  </li>
                  <li>
                    <a href="#getaddressesbyaccount" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">getaddressesbyaccount</a>
                  </li>
                  <li>
                    <a href="#getbalance" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">getbalance</a>
                  </li>
                  <li>
                    <a href="#getnewaddress" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">getnewaddress</a>
                  </li>
                  <li>
                    <a href="#getrawchangeaddress" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">getrawchangeaddress</a>
                  </li>
                  <li>
                    <a href="#getreceivedbyaccount" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">getreceivedbyaccount</a>
                  </li>
                  <li>
                    <a href="#getreceivedbyaddress" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">getreceivedbyaddress</a>
                  </li>
                  <li>
                    <a href="#gettransaction" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">gettransaction</a>
                  </li>
                  <li>
                    <a href="#getunconfirmedbalance" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">getunconfirmedbalance</a>
                  </li>
                  <li>
                    <a href="#importprivkey" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">importprivkey</a>
                  </li>
                  <li>
                    <a href="#importwallet" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">importwallet</a>
                  </li>
                  <li>
                    <a href="#importaddress" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">importaddress</a>
                  </li>
                  <li>
                    <a href="#importprunedfunds" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">importprunedfunds</a>
                  </li>
                  <li>
                    <a href="#importpubkey" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">importpubkey</a>
                  </li>
                  <li>
                    <a href="#keypoolrefill" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">keypoolrefill</a>
                  </li>
                  <li>
                    <a href="#listaccounts" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">listaccounts</a>
                  </li>
                  <li>
                    <a href="#listaddressgroupings" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">listaddressgroupings</a>
                  </li>
                  <li>
                    <a href="#lockunspent" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">lockunspent</a>
                  </li>
                  <li>
                    <a href="#listlockunspent" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">listlockunspent</a>
                  </li>
                  <li>
                    <a href="#listreceivedbyaccount" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">listreceivedbyaccount</a>
                  </li>
                  <li>
                    <a href="#listreceivedbyaddress" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">listreceivedbyaddress</a>
                  </li>
                  <li>
                    <a href="#listsinceblock" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">listsinceblock</a>
                  </li>
                  <li>
                    <a href="#listtransactions" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">listtransactions</a>
                  </li>
                  <li>
                    <a href="#listunspent" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">listunspent</a>
                  </li>
                  <li>
                    <a href="#move" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">move</a>
                  </li>
                  <li>
                    <a href="#sendfrom" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">sendfrom</a>
                  </li>
                  <li>
                    <a href="#sendmany" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">sendmany</a>
                  </li>
                  <li>
                    <a href="#sendtoaddress" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">sendtoaddress</a>
                  </li>
                  <li>
                    <a href="#setaccount" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">setaccount</a>
                  </li>
                  <li>
                    <a href="#settxfee" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">settxfee</a>
                  </li>
                  <li>
                    <a href="#signmessage" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">signmessage</a>
                  </li>
                  <li>
                    <a href="#walletlock" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">walletlock</a>
                  </li>
                  <li>
                    <a href="#walletpassphrasechange" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">walletpassphrasechange</a>
                  </li>
                  <li>
                    <a href="#walletpassphrase" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">walletpassphrase</a>
                  </li>
                  <li>
                    <a href="#removeprunedfunds" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">removeprunedfunds</a>
                  </li>
                  <li>
                    <a href="#wallet-getmemoryinfo" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">wallet getmemoryinfo</a>
                  </li>
                  <li>
                    <a href="#wallet-setloglevel" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">wallet setloglevel</a>
                  </li>
                  <li>
                    <a href="#wallet-stop" class="toc-h2 toc-link" data-title="RPC Calls - Wallet">wallet stop</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#sockets" class="toc-h1 toc-link" data-title="Sockets">Sockets</a>
          </li>
          <li>
            <a href="#node-sockets" class="toc-h1 toc-link" data-title="Node Sockets">Node Sockets</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#node-sockets-bsock" class="toc-h2 toc-link" data-title="Node Sockets">Node sockets - bsock</a>
                  </li>
                  <li>
                    <a href="#node-sockets-bclient" class="toc-h2 toc-link" data-title="Node Sockets">Node sockets - bclient</a>
                  </li>
                  <li>
                    <a href="#node-sockets-calls" class="toc-h2 toc-link" data-title="Node Sockets">Node sockets - Calls</a>
                  </li>
                  <li>
                    <a href="#code-watch-chain-code" class="toc-h2 toc-link" data-title="Node Sockets"><code>watch chain</code></a>
                  </li>
                  <li>
                    <a href="#code-watch-mempool-code" class="toc-h2 toc-link" data-title="Node Sockets"><code>watch mempool</code></a>
                  </li>
                  <li>
                    <a href="#code-set-filter-code" class="toc-h2 toc-link" data-title="Node Sockets"><code>set filter</code></a>
                  </li>
                  <li>
                    <a href="#code-add-filter-code" class="toc-h2 toc-link" data-title="Node Sockets"><code>add filter</code></a>
                  </li>
                  <li>
                    <a href="#code-reset-filter-code" class="toc-h2 toc-link" data-title="Node Sockets"><code>reset filter</code></a>
                  </li>
                  <li>
                    <a href="#code-get-tip-code" class="toc-h2 toc-link" data-title="Node Sockets"><code>get tip</code></a>
                  </li>
                  <li>
                    <a href="#code-get-entry-code" class="toc-h2 toc-link" data-title="Node Sockets"><code>get entry</code></a>
                  </li>
                  <li>
                    <a href="#code-get-hashes-code" class="toc-h2 toc-link" data-title="Node Sockets"><code>get hashes</code></a>
                  </li>
                  <li>
                    <a href="#code-estimate-fee-code" class="toc-h2 toc-link" data-title="Node Sockets"><code>estimate fee</code></a>
                  </li>
                  <li>
                    <a href="#code-send-code" class="toc-h2 toc-link" data-title="Node Sockets"><code>send</code></a>
                  </li>
                  <li>
                    <a href="#code-rescan-code" class="toc-h2 toc-link" data-title="Node Sockets"><code>rescan</code></a>
                  </li>
                  <li>
                    <a href="#node-sockets-events" class="toc-h2 toc-link" data-title="Node Sockets">Node sockets - Events</a>
                  </li>
                  <li>
                    <a href="#code-chain-connect-code" class="toc-h2 toc-link" data-title="Node Sockets"><code>chain connect</code></a>
                  </li>
                  <li>
                    <a href="#code-block-connect-code" class="toc-h2 toc-link" data-title="Node Sockets"><code>block connect</code></a>
                  </li>
                  <li>
                    <a href="#code-chain-disconnect-code" class="toc-h2 toc-link" data-title="Node Sockets"><code>chain disconnect</code></a>
                  </li>
                  <li>
                    <a href="#code-block-disconnect-code" class="toc-h2 toc-link" data-title="Node Sockets"><code>block disconnect</code></a>
                  </li>
                  <li>
                    <a href="#code-chain-reset-code" class="toc-h2 toc-link" data-title="Node Sockets"><code>chain reset</code></a>
                  </li>
                  <li>
                    <a href="#node-code-tx-code" class="toc-h2 toc-link" data-title="Node Sockets">Node <code>tx</code></a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#wallet-sockets" class="toc-h1 toc-link" data-title="Wallet Sockets">Wallet Sockets</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#wallet-sockets-bsock" class="toc-h2 toc-link" data-title="Wallet Sockets">Wallet sockets - bsock</a>
                  </li>
                  <li>
                    <a href="#wallet-sockets-bclient" class="toc-h2 toc-link" data-title="Wallet Sockets">Wallet sockets - bclient</a>
                  </li>
                  <li>
                    <a href="#wallet-sockets-calls" class="toc-h2 toc-link" data-title="Wallet Sockets">Wallet sockets - Calls</a>
                  </li>
                  <li>
                    <a href="#wallet-sockets-events" class="toc-h2 toc-link" data-title="Wallet Sockets">Wallet sockets - Events</a>
                  </li>
                  <li>
                    <a href="#wallet-code-tx-code" class="toc-h2 toc-link" data-title="Wallet Sockets">wallet <code>tx</code></a>
                  </li>
                  <li>
                    <a href="#code-conflict-code" class="toc-h2 toc-link" data-title="Wallet Sockets"><code>conflict</code></a>
                  </li>
                  <li>
                    <a href="#code-confirmed-code" class="toc-h2 toc-link" data-title="Wallet Sockets"><code>confirmed</code></a>
                  </li>
                  <li>
                    <a href="#code-unconfirmed-code" class="toc-h2 toc-link" data-title="Wallet Sockets"><code>unconfirmed</code></a>
                  </li>
                  <li>
                    <a href="#code-balance-code" class="toc-h2 toc-link" data-title="Wallet Sockets"><code>balance</code></a>
                  </li>
                  <li>
                    <a href="#code-address-code" class="toc-h2 toc-link" data-title="Wallet Sockets"><code>address</code></a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href='https://t.me/bcoinorg'>Join us on Telegram</a></li>
            <li><a href='https://github.com/bcoin-org/bcoin'>See the code on GitHub</a></li>
            <li><a href='https://bcoin.io/guides.html'>Browse the guides</a></li>
            <li><a href='https://bcoin.io/docs/index.html'>Full API Documentation</a></li>
            <li><a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the bcoin API!</p>

<p>The default bcoin HTTP server listens on the standard RPC port (<code>8332</code> for main, <code>18332</code> for testnet, <code>48332</code> for regtest, and <code>18556</code> default for simnet). It exposes a REST JSON, as well as a JSON-RPC api.</p>

<aside class="notice">
These docs have been updated to latest version of bcoin and bclient as of October 2019 (bcoin version <code>v2.0.0-dev</code>).
As of this writing the bcoin npm repository has not yet been updated, so it is recommended to install from the latest master branch on github. 
Installation instructions are available there: <a href="https://github.com/bcoin-org/bcoin">https://github.com/bcoin-org/bcoin</a>.
<br><br>
Note that <a href="https://github.com/bcoin-org/bcoin/pull/838">recently</a> the API clients have been moved back in to the <code>bcoin</code> repository.
<code>bclient</code> is still available on npm and github but may not reflect the latest updates to the API. We therefore recommend using the
<code>NodeClient</code> and <code>WalletClient</code> objects as defiend in <code>bcoin/lib/client</code>, and as described in these docs.
</aside>
<h1 id='authentication'>Authentication</h1><h2 id='auth'>Auth</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="c"># default regtest port is 48332 (may be reconfigured by user), API key is required in URL</span>
curl http://x:api-key@127.0.0.1:48332/

<span class="c"># examples in these docs will use an environment variable:</span>
<span class="nv">url</span><span class="o">=</span>http://x:api-key@127.0.0.1:48332/
curl <span class="nv">$url</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli <span class="nt">--api-key</span><span class="o">=</span>api-key <span class="nt">--network</span><span class="o">=</span>regtest info

<span class="c"># store API key and network type in environment variables:</span>
<span class="nb">export </span><span class="nv">BCOIN_API_KEY</span><span class="o">=</span>api-key
<span class="nb">export </span><span class="nv">BCOIN_NETWORK</span><span class="o">=</span>regtest
bcoin-cli info
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// network type derived from bcoin object, client object stores API key</span>
<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">clientinfo</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">getInfo</span><span class="p">();</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">clientinfo</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Make sure to replace <code>api-key</code> with your own key.</p>
</blockquote>

<p>Auth is accomplished via HTTP Basic Auth, using your node&#39;s API key.</p>

<aside class="notice">
You must replace <code>api-key</code> with your own, strong API key.<br>
<br>
A good way to generate a strong key is to use the <code>bcrypto</code> module that is installed as a 
dependency for <code>bcoin</code>. From your bcoin directory (or anywhere, if <code>bcrypto</code> is installed globally), run:<br>
<code>node -e "bcrypto=require('bcrypto'); console.log(bcrypto.random.randomBytes(32).toString('hex'))"</code><br>
Which will generate and output a securley random, 32-byte hex string.<br>
This string could be saved in <code>bcoin.conf</code> to persist over restarts, or it may be passed to bcoin
at launch (for example):<br>
<code>bcoin --api-key=92ded8555d6f04e440ba540f2221349cbf799c454f7e08d3f16577d3e0127b0e</code><br>
<br>
For more information about <code>bcoin.conf</code> and other launch parameters, see
<a href="https://github.com/bcoin-org/bcoin/blob/master/docs/configuration.md">docs/Configuration</a>.
</aside>

<aside class="warning">
If you intend to use API via network and setup <code>api-key</code>, make sure to setup <code>ssl</code> too.
</aside>
<h1 id='configuring-clients'>Configuring Clients</h1><h2 id='default-listeners'>Default Listeners</h2><div class="highlight"><pre class="highlight shell tab-shell--visible"><code><span class="c"># With curl you just send HTTP Requests based on further docs</span>
curl http://127.0.0.1:48332/ <span class="c"># will get info from regtest</span>
</code></pre></div>
<p>By default the API server listens on these <code>localhost</code> ports:</p>

<table><thead>
<tr>
<th>Network</th>
<th>API Port</th>
</tr>
</thead><tbody>
<tr>
<td>main</td>
<td>8332</td>
</tr>
<tr>
<td>testnet</td>
<td>18332</td>
</tr>
<tr>
<td>regtest</td>
<td>48332</td>
</tr>
<tr>
<td>simnet</td>
<td>18556</td>
</tr>
</tbody></table>

<p>You can interact with bcoin with its REST API as well as with RPC.
There are couple of ways you can use the API:</p>

<ul>
<li><code>bcoin-cli</code> - methods built specifically into bcoin by its developers</li>
<li><code>bcoin-cli rpc</code> - adds functionality that mimics Bitcoin Core RPC</li>
<li><code>javascript</code> - methods used by <code>bcoin-cli</code> can be accessed directly from javascript</li>
<li><code>curl</code> - you can use direct HTTP calls for invoking both REST and RPC API calls</li>
</ul>

<p>Only thing to keep in mind is authentication, which is described in the <a href="#authentication">&quot;Authentication&quot;</a> section.</p>
<h2 id='configuring-bcoin-cli'>Configuring bcoin-cli</h2><div class="highlight"><pre class="highlight shell tab-shell--visible"><code><span class="c"># You can configure it by passing arguments:</span>
bcoin-cli <span class="nt">--network</span><span class="o">=</span>regtest info
bcoin-cli info <span class="nt">--network</span><span class="o">=</span>regtest

<span class="c"># Or use environment variables (Starting with BCOIN_)</span>
<span class="nb">export </span><span class="nv">BCOIN_NETWORK</span><span class="o">=</span>regtest
<span class="nb">export </span><span class="nv">BCOIN_API_KEY</span><span class="o">=</span><span class="nv">$YOUR</span><span class="nt">-API-KEY</span>
bcoin-cli info
</code></pre></div>
<p>Install <code>bcoin-cli</code> and <code>bwallet-cli</code> command line tools with the <code>bclient</code> package.
Included with <code>bcoin</code> by default, but can be installed separately:
<code>npm install -g bclient</code></p>

<p><code>bcoin-cli</code> params:</p>
<h3 id='general-configurations-are'>General configurations are:</h3>
<table><thead>
<tr>
<th>Config</th>
<th>Options</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>network</td>
<td><code>main</code>, <code>testnet</code>, <code>regtest</code></td>
<td>This will configure which network to load, also where to look for <code>bcoin.conf</code> file</td>
</tr>
<tr>
<td>uri, url</td>
<td>Base HTTP URI</td>
<td>This can be used for custom port</td>
</tr>
<tr>
<td>api-key</td>
<td><em>string</em></td>
<td>Secret used by RPC for authorization</td>
</tr>
</tbody></table>
<h3 id='wallet-specific'>Wallet Specific</h3>
<table><thead>
<tr>
<th>Config</th>
<th>Options</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td><em>string</em></td>
<td>specify which account to use by default</td>
</tr>
<tr>
<td>token</td>
<td><em>string</em></td>
<td>Token specific wallet</td>
</tr>
</tbody></table>
<div class="highlight"><pre class="highlight shell tab-shell--visible"><code><span class="c"># Example bcoin.conf syntax:</span>
network: main
prefix: ~/.bcoin
api-key: &lt;api-key&gt;
</code></pre></div><h3 id='bcoin-conf-and-wallet-conf-files'>bcoin.conf and wallet.conf files</h3>
<p>These files may contain any of the configuration parameters, and will be interpreted by bclient at startup. The node and wallet clients look for their own respective conf files.</p>

<p><a href="https://github.com/bcoin-org/bcoin/blob/master/etc/sample.conf">A sample bcoin.conf file is included in the code repository</a></p>

<p><a href="https://github.com/bcoin-org/bcoin/blob/master/docs/configuration.md">Detailed configuration documentation is available in docs/configuration</a></p>

<aside class="notice">
Some commands might accept additional parameters.
</aside>
<h2 id='using-javascript-clients'>Using Javascript Clients</h2><div class="highlight"><pre class="highlight javascript tab-javascript--visible"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">WalletClient</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bclient</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="p">{</span><span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
</code></pre></div>
<p>You can also use the API with a Javascript library (used by <code>bcoin-cli</code>).
There are two objects: <code>NodeClient</code> for general API and <code>WalletClient</code> for wallet API.
<code>bcoin</code> also provides an object <code>Network</code> and its method <code>get</code> which will return the default configuration parameters for a specified network.
Custom port numbers are also configurable by the user.</p>

<p><code>NodeClient</code> and <code>WalletClient</code> options:</p>

<table><thead>
<tr>
<th>Config</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>network</td>
<td><em>string</em></td>
<td>Network to use: <code>main</code>, <code>testnet</code>, <code>regtest</code></td>
</tr>
<tr>
<td>port</td>
<td><em>int</em></td>
<td>bcoin socket port (defaults specific for each network)</td>
</tr>
<tr>
<td>host</td>
<td><em>string</em></td>
<td>bcoin API host URI (defaults to 127.0.0.1)</td>
</tr>
<tr>
<td>apiKey</td>
<td><em>string</em></td>
<td>API secret</td>
</tr>
<tr>
<td>ssl</td>
<td><em>boolean</em></td>
<td>TLS (defaults to false: <code>http</code>, unless url has <code>https</code>)</td>
</tr>
</tbody></table>
<h1 id='bcoin-node'>bcoin - Node</h1><h2 id='bcoin-client-requests'>bcoin client requests</h2>
<p>Click a command to see its complete description and usage.</p>

<table><thead>
<tr>
<th>Command</th>
<th>cURL method</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#get-server-info"><code>/</code></a></td>
<td><code>GET</code></td>
<td>Get basic info</td>
</tr>
<tr>
<td><a href="#get-tx-by-hash"><code>/tx/:hash</code></a></td>
<td><code>GET</code></td>
<td>TX by hash</td>
</tr>
<tr>
<td><a href="#get-tx-by-address"><code>/tx/address/:address</code></a></td>
<td><code>GET</code></td>
<td>TX by address</td>
</tr>
<tr>
<td><a href="#get-coin-by-outpoint"><code>/coin/:hash/:index</code></a></td>
<td><code>GET</code></td>
<td>UTXO by txid and index</td>
</tr>
<tr>
<td><a href="#get-block-by-hash-or-height"><code>/block/:block</code></a></td>
<td><code>GET</code></td>
<td>Block by hash or height</td>
</tr>
<tr>
<td><a href="#get-block-header-by-hash-or-height"><code>/header/:block</code></a></td>
<td><code>GET</code></td>
<td>Block header by hash or height</td>
</tr>
<tr>
<td><a href="#get-block-filter-by-hash-or-height"><code>/filter/:block</code></a></td>
<td><code>GET</code></td>
<td>BIP158 block filter by hash or height</td>
</tr>
<tr>
<td><a href="#get-mempool-snapshot"><code>/mempool</code></a></td>
<td><code>GET</code></td>
<td>Mempool snapshot</td>
</tr>
<tr>
<td><a href="#broadcast-transaction"><code>/broadcast</code></a></td>
<td><code>POST</code></td>
<td>Broadcast TX</td>
</tr>
<tr>
<td><a href="#estimate-fee"><code>/fee</code></a></td>
<td><code>GET</code></td>
<td>Estimate fee</td>
</tr>
<tr>
<td><a href="#reset-blockchain"><code>/reset</code></a></td>
<td><code>POST</code></td>
<td>Reset chain to specific height</td>
</tr>
</tbody></table>
<h2 id='get-server-info'>Get server info</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span>/
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli info
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">clientinfo</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">getInfo</span><span class="p">();</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">clientinfo</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0.0-dev"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"network"</span><span class="p">:</span><span class="w"> </span><span class="s2">"regtest"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"chain"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">208</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"283163d3fdf2591ea79fafe110a34e8c735e69c98046e46eeba795fa65d2a2ab"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"progress"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.9997082948837989</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"indexes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"addr"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">208</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"tx"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">208</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"filter"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">208</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"pool"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.200.50.10"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">48444</span><span class="p">,</span><span class="w">
    </span><span class="nl">"agent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/bcoin:2.0.0-dev/"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"services"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1001"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"outbound"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"inbound"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"mempool"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"tx"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"orphans"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"uptime"</span><span class="p">:</span><span class="w"> </span><span class="mi">109</span><span class="p">,</span><span class="w">
    </span><span class="nl">"system"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571749599</span><span class="p">,</span><span class="w">
    </span><span class="nl">"adjusted"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571749599</span><span class="p">,</span><span class="w">
    </span><span class="nl">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"memory"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">55</span><span class="p">,</span><span class="w">
    </span><span class="nl">"jsHeap"</span><span class="p">:</span><span class="w"> </span><span class="mi">19</span><span class="p">,</span><span class="w">
    </span><span class="nl">"jsHeapTotal"</span><span class="p">:</span><span class="w"> </span><span class="mi">33</span><span class="p">,</span><span class="w">
    </span><span class="nl">"nativeHeap"</span><span class="p">:</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="w">
    </span><span class="nl">"external"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get server Info.</p>
<h3 id='http-request'>HTTP Request</h3>
<p>Get server info. No params.</p>

<p><code>GET /</code></p>

<p>No Params.</p>
<h2 id='get-mempool-snapshot'>Get mempool snapshot</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span>/mempool
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli mempool
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">mempool</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">getMempool</span><span class="p">();</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">mempool</span><span class="p">);</span>
<span class="p">})().</span><span class="k">catch</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">stack</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"2ef8051e6c38e136ba4d195c048e78f9077751758db710475fa532b9d9489324"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bc3308b61959664b71ac7fb8e9ee17d13476b5a32926f512882851b7631884f9"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"53faa103e8217e1520f5149a4e8c84aeb58e55bdab11164a95e69a8ca50f8fcc"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fff647849be7408faedda377eea6c37718ab39d656af8926e0b4b74453624f32"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"b3c71dd8959ea97d41324779604b210ae881cdaa5d5abfcbfb3502a0e75c1283"</span><span class="p">,</span><span class="w">
  </span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Get mempool snapshot (array of json txs).</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET /mempool</code></p>

<p>No Params.</p>
<h2 id='get-block-by-hash-or-height'>Get block by hash or height</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">blockHash</span><span class="p">,</span> <span class="nx">blockHeight</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">blockHash</span><span class="o">=</span><span class="s1">'78f86c294d1ffc640f1783e2b3cc3dcdfbe1da9fe885f35de286f94db8cfac72'</span><span class="p">;</span>
<span class="nv">blockHeight</span><span class="o">=</span><span class="s1">'50'</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span>/block/<span class="nv">$blockHash</span> <span class="c"># by hash</span>
curl <span class="nv">$url</span>/block/<span class="nv">$blockHeight</span> <span class="c"># by height</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli block <span class="nv">$blockHash</span> <span class="c"># by hash</span>
bcoin-cli block <span class="nv">$blockHeight</span> <span class="c"># by height</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">blockByHeight</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">getBlock</span><span class="p">(</span><span class="nx">blockHeight</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">blockByHash</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">getBlock</span><span class="p">(</span><span class="nx">blockHash</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">By height: </span><span class="se">\n</span><span class="dl">"</span><span class="p">,</span> <span class="nx">blockByHeight</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">By hash: </span><span class="se">\n</span><span class="dl">"</span><span class="p">,</span> <span class="nx">blockByHash</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"78f86c294d1ffc640f1783e2b3cc3dcdfbe1da9fe885f35de286f94db8cfac72"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
  </span><span class="nl">"depth"</span><span class="p">:</span><span class="w"> </span><span class="mi">484</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">536870912</span><span class="p">,</span><span class="w">
  </span><span class="nl">"prevBlock"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4e186ead55dfe014baee8bab96805c88c03032ba1e92be86709ca9f65ea5003a"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merkleRoot"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5bca36ac149947e8f545d28ae2d34b6f6f170d36dd5289766e08813f5d183678"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571759960</span><span class="p">,</span><span class="w">
  </span><span class="nl">"bits"</span><span class="p">:</span><span class="w"> </span><span class="mi">545259519</span><span class="p">,</span><span class="w">
  </span><span class="nl">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"txs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5bca36ac149947e8f545d28ae2d34b6f6f170d36dd5289766e08813f5d183678"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"witnessHash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c3401a27680aebb0603f50c0bafbe22c492ec9e65aea754a179f10b3f537d2c6"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mtime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571762225</span><span class="p">,</span><span class="w">
      </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"inputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"prevout"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0000000000000000000000000000000000000000000000000000000000000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="mi">4294967295</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01320e6d696e65642062792062636f696e0431d5f7bf080000000000000000"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"witness"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01200000000000000000000000000000000000000000000000000000000000000000"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"sequence"</span><span class="p">:</span><span class="w"> </span><span class="mi">4294967295</span><span class="p">,</span><span class="w">
          </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"outputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">5000000000</span><span class="p">,</span><span class="w">
          </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"76a91415f34e5cc7c4d7cc5a896611af8fb242847e003d88ac"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mhX1xHbKGzw3r8FoN5bUkmRixHPEDNywxh"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6a24aa21a9ede2f61c3f71d1defd3fa999dfa36953755c690689799962b48bebd836974e8cf9"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"locktime"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"010000000001010000000000000000000000000000000000000000000000000000000000000000ffffffff1f01320e6d696e65642062792062636f696e0431d5f7bf080000000000000000ffffffff0200f2052a010000001976a91415f34e5cc7c4d7cc5a896611af8fb242847e003d88ac0000000000000000266a24aa21a9ede2f61c3f71d1defd3fa999dfa36953755c690689799962b48bebd836974e8cf90120000000000000000000000000000000000000000000000000000000000000000000000000"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Returns block info by block hash or height.</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>GET /block/:blockhashOrHeight</code></p>
<h3 id='url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>:blockhashOrHeight</td>
<td>Hash or Height of block</td>
</tr>
</tbody></table>
<h2 id='get-block-header-by-hash-or-height'>Get block header by hash or height</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">blockHash</span><span class="p">,</span> <span class="nx">blockHeight</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">blockHash</span><span class="o">=</span><span class="s1">'6f1003edd05cad861395225415160b5236968cc223fe982796b6e959c9651d44'</span><span class="p">;</span>
<span class="nv">blockHeight</span><span class="o">=</span><span class="s1">'100'</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span>/header/<span class="nv">$blockHash</span> <span class="c"># by hash</span>
curl <span class="nv">$url</span>/header/<span class="nv">$blockHeight</span> <span class="c"># by height</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli header <span class="nv">$blockHash</span> <span class="c"># by hash</span>
bcoin-cli header <span class="nv">$blockHeight</span> <span class="c"># by height</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">headerByHeight</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">getBlockHeader</span><span class="p">(</span><span class="nx">blockHeight</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">headerByHash</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">getBlockHeader</span><span class="p">(</span><span class="nx">blockHash</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">By height: </span><span class="se">\n</span><span class="dl">"</span><span class="p">,</span> <span class="nx">headerByHeight</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">By hash: </span><span class="se">\n</span><span class="dl">"</span><span class="p">,</span> <span class="nx">headerByHash</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6f1003edd05cad861395225415160b5236968cc223fe982796b6e959c9651d44"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">536870912</span><span class="p">,</span><span class="w">
  </span><span class="nl">"prevBlock"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0c4ea5e675941eca1909275f21903cef755069a03c57c10f4d4dadcdd7146daf"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merkleRoot"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9a249c682aba07943c8a1f9bd774a15d71372fcd7f3f9ee99e8c7aa022ae6aa0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571661863</span><span class="p">,</span><span class="w">
  </span><span class="nl">"bits"</span><span class="p">:</span><span class="w"> </span><span class="mi">545259519</span><span class="p">,</span><span class="w">
  </span><span class="nl">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
  </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
  </span><span class="nl">"chainwork"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000000000000000000000000000000000000000000000000000000000ca"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Returns block header by block hash or height.</p>
<h3 id='http-request-4'>HTTP Request</h3>
<p><code>GET /header/:blockhashOrHeight</code></p>
<h3 id='url-parameters-2'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>:blockhashOrHeight</td>
<td>Hash or Height of block</td>
</tr>
</tbody></table>
<h2 id='get-block-filter-by-hash-or-height'>Get block filter by hash or height</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">blockHash</span><span class="p">,</span> <span class="nx">blockHeight</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">blockHash</span><span class="o">=</span><span class="s1">'6f1003edd05cad861395225415160b5236968cc223fe982796b6e959c9651d44'</span><span class="p">;</span>
<span class="nv">blockHeight</span><span class="o">=</span><span class="s1">'100'</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span>/filter/<span class="nv">$blockHash</span> <span class="c"># by hash</span>
curl <span class="nv">$url</span>/filter/<span class="nv">$blockHeight</span> <span class="c"># by height</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli filter <span class="nv">$blockHash</span> <span class="c"># by hash</span>
bcoin-cli filter <span class="nv">$blockHeight</span> <span class="c"># by height</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">filterByHeight</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">getFilter</span><span class="p">(</span><span class="nx">blockHeight</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">filterByHash</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">getFilter</span><span class="p">(</span><span class="nx">blockHash</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">By height: </span><span class="se">\n</span><span class="dl">"</span><span class="p">,</span> <span class="nx">filterByHeight</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">By hash: </span><span class="se">\n</span><span class="dl">"</span><span class="p">,</span> <span class="nx">filterByHash</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"filter"</span><span class="p">:</span><span class="w"> </span><span class="s2">"011ece10"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"header"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14940c1a3a7c764a1939300c386ceb378abfa581c243ad2c19bf7e0b52a09a09"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Returns BIP158 block filter by block hash or height.</p>
<h3 id='http-request-5'>HTTP Request</h3>
<p><code>GET /filter/:blockhashOrHeight</code></p>
<h3 id='url-parameters-3'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>:blockhashOrHeight</td>
<td>Hash or Height of block</td>
</tr>
</tbody></table>
<h2 id='broadcast-transaction'>Broadcast transaction</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">tx</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">tx</span><span class="o">=</span><span class="s1">'010000000106b014e37704109fefe2c5c9f4227d68840c3497fc89a9832db8504df039a6c7000000006a47304402207dc8173fbd7d23c3950aaf91b1bc78c0ed9bf910d47a977b24a8478a91b28e69022024860f942a16bc67ec54884e338b5b87f4a9518a80f9402564061a3649019319012103cb25dc2929ea58675113e60f4c08d084904189ab44a9a142179684c6cdd8d46affffffff0280c3c901000000001976a91400ba915c3d18907b79e6cfcd8b9fdf69edc7a7db88acc41c3c28010000001976a91437f306a0154e1f0de4e54d6cf9d46e07722b722688ac00000000'</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span>/broadcast <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{ "tx": "'</span><span class="nv">$tx</span><span class="s1">'" }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli broadcast <span class="nv">$tx</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">broadcast</span><span class="p">(</span><span class="nx">tx</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Broadcast a transaction by adding it to the node&#39;s mempool. If mempool verification fails, the node will still forcefully advertise and relay the transaction for the next 60 seconds.</p>
<h3 id='http-request-6'>HTTP Request</h3>
<p><code>POST /broadcast</code></p>
<h3 id='post-parameters-json'>POST Parameters (JSON)</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tx</td>
<td>raw transaction in hex</td>
</tr>
</tbody></table>
<h2 id='estimate-fee'>Estimate fee</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">blocks</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">blocks</span><span class="o">=</span>3
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span>/fee?blocks<span class="o">=</span><span class="nv">$blocks</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli fee <span class="nv">$blocks</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">estimateFee</span><span class="p">(</span><span class="nx">blocks</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">13795</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Estimate the fee required (in Satoshis per kB) for a transaction to be confirmed by the network within a targeted number of blocks (default 1).</p>
<h3 id='http-request-7'>HTTP Request</h3>
<p><code>GET /fee</code></p>
<h3 id='get-parameters'>GET Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>blocks</td>
<td>Number of blocks to target confirmation</td>
</tr>
</tbody></table>
<h2 id='reset-blockchain'>Reset blockchain</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">height</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">height</span><span class="o">=</span>1000<span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span>/reset <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{ "height": '</span><span class="nv">$height</span><span class="s1">' }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli reset <span class="nv">$height</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">reset</span><span class="p">(</span><span class="nx">height</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Triggers a hard-reset of the blockchain. All blocks are disconnected from the tip
down to the provided height. Indexes and Chain Entries are removed. Useful for
&quot;rescanning&quot; an SPV wallet. Since there are no blocks stored on disk, the only
way to rescan the blockchain is to re-request [merkle]blocks from peers.</p>
<h3 id='http-request-8'>HTTP Request</h3>
<p><code>POST /reset</code></p>
<h3 id='post-parameters-json-2'>POST Parameters (JSON)</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>height</td>
<td>block height to reset chain to</td>
</tr>
</tbody></table>
<h1 id='bcoin-coins'>bcoin - Coins</h1>
<p>Getting coin information via API.</p>

<p><em>Coin stands for UTXO (unspent transaction output)</em></p>
<h2 id='get-coin-by-outpoint'>Get coin by Outpoint</h2>
<aside class="info">
This API call is always available regardless indexing options, and
includes unspent coins only.
</aside>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">hash</span><span class="p">,</span> <span class="nx">index</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">hash</span><span class="o">=</span><span class="s1">'53faa103e8217e1520f5149a4e8c84aeb58e55bdab11164a95e69a8ca50f8fcc'</span><span class="p">;</span>
<span class="nv">index</span><span class="o">=</span>0<span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span>/coin/<span class="nv">$hash</span>/<span class="nv">$index</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli coin <span class="nv">$hash</span> <span class="nv">$index</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">getCoin</span><span class="p">(</span><span class="nx">hash</span><span class="p">,</span> <span class="nx">index</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">533</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">67377</span><span class="p">,</span><span class="w">
  </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"76a9147356fde8f0a321dd114d947495d1f4b9f3cb050088ac"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mr2pDQvLN7eGv6xinBgSUmQpYSYdTEWyTf"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"coinbase"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c747afe7aea229ae2aed7135eb768fd2dc1d8172cd7463bf3906e8321baa5608"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get coin by outpoint (hash and index). Returns coin in bcoin coin JSON format.
<code>value</code> is always expressed in satoshis.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /coin/:hash/:index</code></p>
<h3 id='url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>:hash</td>
<td>Hash of tx</td>
</tr>
<tr>
<td>:index</td>
<td>Output&#39;s index in tx</td>
</tr>
</tbody></table>
<h1 id='bcoin-transactions'>bcoin - Transactions</h1>
<p>Getting transaction information via API.</p>

<aside class="info">
You need to enable <code>index-tx</code> to lookup transactions by txid.<br>
You also need to enable <code>index-address</code> in order to lookup
transactions by address.<br>
Launch the bcoin daemon with these arguments or modify `bcoin.conf`:<br>
<code>bcoin --daemon --index-address=true --index-tx=true</code>
</aside>
<h2 id='get-tx-by-hash'>Get tx by hash</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">txhash</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">txhash</span><span class="o">=</span><span class="s1">'77a39583060aa3ff2a705d401fea0c07e77e95d66cc10b744dc95098cad1bee1'</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span>/tx/<span class="nv">$txhash</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli tx <span class="nv">$txhash</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">getTX</span><span class="p">(</span><span class="nx">txhash</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})().</span><span class="k">catch</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">stack</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"77a39583060aa3ff2a705d401fea0c07e77e95d66cc10b744dc95098cad1bee1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"witnessHash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"130bd86dccf06142b6134c7c38997d8babc2104a94d7a84da021d587740ed1c8"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">1740</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">9942</span><span class="p">,</span><span class="w">
  </span><span class="nl">"mtime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571763474</span><span class="p">,</span><span class="w">
  </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">530</span><span class="p">,</span><span class="w">
  </span><span class="nl">"block"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34d0385c667319c5225c7f82e025681bae2fb5df28809cc7cf432b491125c83c"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571760040</span><span class="p">,</span><span class="w">
  </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"inputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"prevout"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9d2330c36814d20ccdba1b6fc5153ed3b294cb34fa99fc8199552014250ea285"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"witness"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02473044022008765f15a62f283c06082dfea6a6f413eae4190dbbfd57efae1813432b66613e0220163b708d4e1ccd6a439da2d222f72e4231bdfd877fcdfb73ac85566e6358c559012103d2d0677a136821cb92361501570173e2c6b0d8b12e584737ffc991d2d1ccf026"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sequence"</span><span class="p">:</span><span class="w"> </span><span class="mi">4294967295</span><span class="p">,</span><span class="w">
      </span><span class="nl">"coin"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">528</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">34297185559</span><span class="p">,</span><span class="w">
        </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0014268a968f7d4d1d72bbecc0ebca21d890901ba312"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bcrt1qy69fdrmaf5wh9wlvcr4u5gwcjzgphgcjswyuvn"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"coinbase"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"outputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">37547</span><span class="p">,</span><span class="w">
      </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00143ce6c756ef2f35d61aab99d1619aab2f48da6987"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bcrt1q8nnvw4h09u6avx4tn8gkrx4t9ayd56v86q7ceg"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">50131</span><span class="p">,</span><span class="w">
      </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"76a914e53103ac18b5d274dcea14e6b0c856182ce7021688ac"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"n2QokZQd8Fn6a82vwXtndYy88HeUk3BZio"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">34297096141</span><span class="p">,</span><span class="w">
      </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0014f0ddfca1c6023538c032f6fb46a35703099319fe"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bcrt1q7rwlegwxqg6n3spj7ma5dg6hqvyexx07zmt40j"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"locktime"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0100000000010185a20e251420559981fc99fa34cb94b2d33e15c56f1bbacd0cd21468c330239d0300000000ffffffff03ab920000000000001600143ce6c756ef2f35d61aab99d1619aab2f48da6987d3c30000000000001976a914e53103ac18b5d274dcea14e6b0c856182ce7021688accd2744fc07000000160014f0ddfca1c6023538c032f6fb46a35703099319fe02473044022008765f15a62f283c06082dfea6a6f413eae4190dbbfd57efae1813432b66613e0220163b708d4e1ccd6a439da2d222f72e4231bdfd877fcdfb73ac85566e6358c559012103d2d0677a136821cb92361501570173e2c6b0d8b12e584737ffc991d2d1ccf02600000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request'>HTTP Request</h3>
<p><code>GET /tx/:txhash</code></p>
<h3 id='url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>:txhash</td>
<td>Hash of tx.</td>
</tr>
</tbody></table>
<h2 id='get-tx-by-address'>Get tx by address</h2>
<aside class="info">
You need to enable <code>index-address</code> and <code>index-tx</code> in
order to lookup transactions by address.<br> Launch the bcoin daemon with
these arguments or modify `bcoin.conf` to include the options:<br>
<code>bcoin --daemon --index-address=true --index-tx=true</code>
</aside>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">address</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">address</span><span class="o">=</span><span class="s1">'bcrt1q8nnvw4h09u6avx4tn8gkrx4t9ayd56v86q7ceg'</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span>/tx/address/<span class="nv">$address</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli tx <span class="nv">$address</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">getTXByAddress</span><span class="p">(</span><span class="nx">address</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})().</span><span class="k">catch</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">stack</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"77a39583060aa3ff2a705d401fea0c07e77e95d66cc10b744dc95098cad1bee1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"witnessHash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"130bd86dccf06142b6134c7c38997d8babc2104a94d7a84da021d587740ed1c8"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">1740</span><span class="p">,</span><span class="w">
    </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">9942</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mtime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571763513</span><span class="p">,</span><span class="w">
    </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">530</span><span class="p">,</span><span class="w">
    </span><span class="nl">"block"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34d0385c667319c5225c7f82e025681bae2fb5df28809cc7cf432b491125c83c"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571760040</span><span class="p">,</span><span class="w">
    </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
    </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"inputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"prevout"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9d2330c36814d20ccdba1b6fc5153ed3b294cb34fa99fc8199552014250ea285"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"witness"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02473044022008765f15a62f283c06082dfea6a6f413eae4190dbbfd57efae1813432b66613e0220163b708d4e1ccd6a439da2d222f72e4231bdfd877fcdfb73ac85566e6358c559012103d2d0677a136821cb92361501570173e2c6b0d8b12e584737ffc991d2d1ccf026"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"sequence"</span><span class="p">:</span><span class="w"> </span><span class="mi">4294967295</span><span class="p">,</span><span class="w">
        </span><span class="nl">"coin"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">528</span><span class="p">,</span><span class="w">
          </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">34297185559</span><span class="p">,</span><span class="w">
          </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0014268a968f7d4d1d72bbecc0ebca21d890901ba312"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bcrt1qy69fdrmaf5wh9wlvcr4u5gwcjzgphgcjswyuvn"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"coinbase"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"outputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">37547</span><span class="p">,</span><span class="w">
        </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00143ce6c756ef2f35d61aab99d1619aab2f48da6987"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bcrt1q8nnvw4h09u6avx4tn8gkrx4t9ayd56v86q7ceg"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">50131</span><span class="p">,</span><span class="w">
        </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"76a914e53103ac18b5d274dcea14e6b0c856182ce7021688ac"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"n2QokZQd8Fn6a82vwXtndYy88HeUk3BZio"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">34297096141</span><span class="p">,</span><span class="w">
        </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0014f0ddfca1c6023538c032f6fb46a35703099319fe"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bcrt1q7rwlegwxqg6n3spj7ma5dg6hqvyexx07zmt40j"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"locktime"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0100000000010185a20e251420559981fc99fa34cb94b2d33e15c56f1bbacd0cd21468c330239d0300000000ffffffff03ab920000000000001600143ce6c756ef2f35d61aab99d1619aab2f48da6987d3c30000000000001976a914e53103ac18b5d274dcea14e6b0c856182ce7021688accd2744fc07000000160014f0ddfca1c6023538c032f6fb46a35703099319fe02473044022008765f15a62f283c06082dfea6a6f413eae4190dbbfd57efae1813432b66613e0220163b708d4e1ccd6a439da2d222f72e4231bdfd877fcdfb73ac85566e6358c559012103d2d0677a136821cb92361501570173e2c6b0d8b12e584737ffc991d2d1ccf02600000000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Returns transaction objects array by address with support for segwit. The
supported address types include <code>p2pkh</code>, <code>p2sh</code>, <code>p2wpkh</code>, and <code>p2wsh</code>.
Addresses with hundreds, thousands or millions of transactions, will need
to make multiple queries to request all transactions using the  <code>after</code>
query parameter. If no results are found an empty array will be returned.
Results include both confirmed and unconfirmed transactions.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET /tx/address/:address</code></p>
<h3 id='url-parameters-2'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>:address</td>
<td>Bitcoin address (base58 or bech32).</td>
</tr>
</tbody></table>
<h3 id='query-string'>Query string</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>after <br> <em>string</em></td>
<td>A txid to include transactions after, this is often the last txid of a previous query.</td>
</tr>
<tr>
<td>limit <br> <em>int</em></td>
<td>The maximum number of results to return.</td>
</tr>
<tr>
<td>reverse <br> <em>boolean</em></td>
<td>Reverse the order of transactions, default is false and from oldest to latest.</td>
</tr>
</tbody></table>
<h1 id='rpc-calls-node'>RPC Calls - Node</h1><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{ "method": "&lt;method&gt;", "params": [...] "id": "some-id" }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc &lt;method&gt; &lt;params&gt;
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">&lt;method&gt;</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="o">&lt;</span><span class="nx">params</span><span class="o">&gt;</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above cURL command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="err">resultObject</span><span class="w"> </span><span class="p">,</span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="err">errorObject</span><span class="p">,</span><span class="w"> </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="err">passedID</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Further examples will only include &quot;result&quot; part.
CLI and Javascript calls return just the &quot;result&quot; or an error.</p>
</blockquote>

<p>bcoin RPC calls mimic Bitcoin Core&#39;s RPC.</p>

<p>RPC Calls are accepted at:
<code>POST /</code></p>

<p><em>Notes:</em></p>

<p><em>bcoin-cli rpc and Javascript will either return an error OR the result.</em></p>

<p><em>Javascript result will return the &quot;result&quot; part of the object, not the id or error</em></p>

<p><em>If a Javascript error is encountered it will be thrown instead of returned in JSON</em></p>

<p><em>Be sure to check the debug log for error reports as well!</em></p>
<h3 id='post-parameters-rpc'>POST Parameters RPC</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>method</td>
<td>Name of the RPC call</td>
</tr>
<tr>
<td>params</td>
<td>Parameters accepted by method</td>
</tr>
<tr>
<td>id</td>
<td><code>int</code> Will be returned with the response (cURL only)</td>
</tr>
</tbody></table>
<h2 id='stop'>stop</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span>/ <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{ "method": "stop" }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc stop
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">stop</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="s2">"Stopping."</span><span class="w">
</span></code></pre></div>
<p>Stops the running node.</p>
<h3 id='params'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>None.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id='getinfo'>getinfo</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{ "method": "getinfo" }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc getinfo
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getinfo</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0.0-dev"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"protocolversion"</span><span class="p">:</span><span class="w"> </span><span class="mi">70015</span><span class="p">,</span><span class="w">
  </span><span class="nl">"walletversion"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"blocks"</span><span class="p">:</span><span class="w"> </span><span class="mi">533</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timeoffset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"connections"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"proxy"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"difficulty"</span><span class="p">:</span><span class="w"> </span><span class="mf">4.6565423739069247e-10</span><span class="p">,</span><span class="w">
  </span><span class="nl">"testnet"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"keypoololdest"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"keypoolsize"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"unlocked_until"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"paytxfee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0002</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relayfee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00001</span><span class="p">,</span><span class="w">
  </span><span class="nl">"errors"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Returns general info</p>
<h3 id='params-2'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>None.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id='getmemoryinfo'>getmemoryinfo</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{ "method": "getmemoryinfo" }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc getmemoryinfo
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getmemoryinfo</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">72</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsHeap"</span><span class="p">:</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsHeapTotal"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
  </span><span class="nl">"nativeHeap"</span><span class="p">:</span><span class="w"> </span><span class="mi">54</span><span class="p">,</span><span class="w">
  </span><span class="nl">"external"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Returns Memory usage info.
Identical to node RPC call <a href="#wallet-getmemoryinfo">wallet-getmemoryinfo</a>.</p>
<h3 id='params-3'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>None.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id='setloglevel'>setloglevel</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "setloglevel",
    "params": [ "none" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc setloglevel none
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">setloglevel</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="dl">'</span><span class="s1">none</span><span class="dl">'</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="kc">null</span><span class="w">
</span></code></pre></div>
<p>Change Log level of the running node.</p>

<p>Levels are: <code>NONE</code>, <code>ERROR</code>, <code>WARNING</code>, <code>INFO</code>, <code>DEBUG</code>, <code>SPAM</code></p>
<h3 id='params-4'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>level</td>
<td>Required</td>
<td>Level for the logger</td>
</tr>
</tbody></table>
<h2 id='validateaddress'>validateaddress</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">address</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">address</span><span class="o">=</span><span class="s1">'mhX1xHbKGzw3r8FoN5bUkmRixHPEDNywxh"'</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span>/ <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "validateaddress",
    "params": [ "'</span><span class="nv">$address</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc validateaddress <span class="nv">$address</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">validateaddress</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">address</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"isvalid"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mhX1xHbKGzw3r8FoN5bUkmRixHPEDNywxh"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"scriptPubKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"76a91415f34e5cc7c4d7cc5a896611af8fb242847e003d88ac"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"isscript"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"iswitness"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Validates address.</p>
<h3 id='params-5'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>address</td>
<td>Required</td>
<td>Address to validate</td>
</tr>
</tbody></table>
<h2 id='createmultisig'>createmultisig</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">nrequired</span><span class="p">,</span> <span class="nx">pubkey0</span><span class="p">,</span> <span class="nx">pubkey1</span><span class="p">,</span> <span class="nx">pubkey2</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">nrequired</span><span class="o">=</span>2<span class="p">;</span>
<span class="nv">pubkey0</span><span class="o">=</span><span class="s1">'02e3d6bb36b0261628101ee67abd89d678522dc1199912512f814e70803652f395'</span><span class="p">;</span>
<span class="nv">pubkey1</span><span class="o">=</span><span class="s1">'03d7ded41bb871936bf4d411371b25d706c572f28ef8d2613b45392e9f9c4348a5'</span><span class="p">;</span>
<span class="nv">pubkey2</span><span class="o">=</span><span class="s1">'034bc2280e68d3bdd0ef0664e0ad2949a467344d8e59e435fe2d9be81e39f70f76'</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "createmultisig",
    "params": [ '</span><span class="nv">$nrequired</span><span class="s1">', [ "'</span><span class="nv">$pubkey0</span><span class="s1">'", "'</span><span class="nv">$pubkey1</span><span class="s1">'", "'</span><span class="nv">$pubkey2</span><span class="s1">'" ] ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc createmultisig <span class="nv">$nrequired</span> <span class="s1">'[ "'</span><span class="nv">$pubkey0</span><span class="s1">'", "'</span><span class="nv">$pubkey1</span><span class="s1">'", "'</span><span class="nv">$pubkey2</span><span class="s1">'" ]'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">createmultisig</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">nrequired</span><span class="p">,</span> <span class="p">[</span> <span class="nx">pubkey0</span><span class="p">,</span> <span class="nx">pubkey1</span><span class="p">,</span> <span class="nx">pubkey2</span> <span class="p">]</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NEn8sKGW2hZHF5Wyq4mJMAMqoPiGUMf3PB"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"redeemScript"</span><span class="p">:</span><span class="w"> </span><span class="s2">"522102e3d6bb36b0261628101ee67abd89d678522dc1199912512f814e70803652f39521034bc2280e68d3bdd0ef0664e0ad2949a467344d8e59e435fe2d9be81e39f70f762103d7ded41bb871936bf4d411371b25d706c572f28ef8d2613b45392e9f9c4348a553ae"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>create multisig address</p>
<h3 id='params-6'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>nrequired</td>
<td>Required</td>
<td>Required number of approvals for spending</td>
</tr>
<tr>
<td>2</td>
<td>keyArray</td>
<td>Required</td>
<td>Array of public keys</td>
</tr>
</tbody></table>
<h2 id='createwitnessaddress'>createwitnessaddress</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">script</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">script</span><span class="o">=</span><span class="s1">'5221021f1dbc575db95a44e016fe6ecf00231109e7799d9b1e007dbe8814017cf0d65c2102b3280e779a7c849f9d6460e926097fe4b0f6280fa6fd038ce8e1236a4688c358210315613667e3ebe065c0b8d86ae0443d97de56545bdf38c99a6ee584f300206d9a53ae'</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "createwitnessaddress",
    "params": [ "'</span><span class="nv">$script</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc createwitnessaddress <span class="nv">$script</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">createwitnessaddress</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">script</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bcrt1qlfgqame3n0dt2ldjl2m9qjg6n2vut26jw3ezm25hqx9ez4m9wp5qer5sas"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"witnessScript"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0020fa500eef319bdab57db2fab650491a9a99c5ab5274722daa97018b9157657068"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Creates witness address.</p>
<h3 id='params-7'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>script</td>
<td>Required</td>
<td>Bitcoin script.</td>
</tr>
</tbody></table>
<h2 id='signmessagewithprivkey'>signmessagewithprivkey</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">privkey</span><span class="p">,</span> <span class="nx">message</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">privkey</span><span class="o">=</span><span class="s1">'cNmBeL4kpjLtNZcvjSezftq4ks6ajzZRi1z2AGpuBGy6XjxzytiQ'</span><span class="p">;</span>
<span class="nv">message</span><span class="o">=</span><span class="s1">'hello'</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "signmessagewithprivkey",
    "params": [ "'</span><span class="nv">$privkey</span><span class="s1">'", "'</span><span class="nv">$message</span><span class="s1">'"]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc signmessagewithprivkey <span class="nv">$privkey</span> <span class="nv">$message</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">signmessagewithprivkey</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">privkey</span><span class="p">,</span> <span class="nx">message</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="s2">"MEUCIQCsjaPbo1jOWBFdFGfmQnfQEdmRQP3vTi/wY2gbhxkEKgIgeZIm9+bMqZsiK4Ry5w3IgWycrcmKTzmuBtcvVCEguOM="</span><span class="w">
</span></code></pre></div>
<p>Signs message with private key. 
<aside>Note: Due to behavior of some shells like bash, if your message contains spaces you may need to add additional quotes like this: <code>&quot;&#39;&quot;$message&quot;&#39;&quot;</code></aside></p>
<h3 id='params-8'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>privkey</td>
<td>Required</td>
<td>Private key</td>
</tr>
<tr>
<td>1</td>
<td>message</td>
<td>Required</td>
<td>Message you want to sign.</td>
</tr>
</tbody></table>
<h2 id='verifymessage'>verifymessage</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">address</span><span class="p">,</span> <span class="nx">signature</span><span class="p">,</span> <span class="nx">message</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">address</span><span class="o">=</span><span class="s1">'mhX1xHbKGzw3r8FoN5bUkmRixHPEDNywxh'</span><span class="p">;</span>
<span class="nv">signature</span><span class="o">=</span><span class="s1">'MEUCIQCsjaPbo1jOWBFdFGfmQnfQEdmRQP3vTi/wY2gbhxkEKgIgeZIm9+bMqZsiK4Ry5w3IgWycrcmKTzmuBtcvVCEguOM='</span><span class="p">;</span>
<span class="nv">message</span><span class="o">=</span><span class="s1">'hello'</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "verifymessage",
    "params": [ "'</span><span class="nv">$address</span><span class="s1">'", "'</span><span class="nv">$signature</span><span class="s1">'", "$message" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc verifymessage <span class="nv">$address</span> <span class="nv">$signature</span> <span class="s2">"</span><span class="nv">$message</span><span class="s2">"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">verifymessage</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">address</span><span class="p">,</span> <span class="nx">signature</span><span class="p">,</span> <span class="nx">message</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="kc">true</span><span class="w">
</span></code></pre></div>
<p>Verify signature.
<aside>Note: Due to behavior of some shells like bash, if your message contains spaces you may need to add additional quotes like this: <code>&quot;&#39;&quot;$message&quot;&#39;&quot;</code></aside></p>
<h3 id='params-9'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>address</td>
<td>Required</td>
<td>Address of the signer</td>
</tr>
<tr>
<td>2</td>
<td>signature</td>
<td>Required</td>
<td>Signature of signed message</td>
</tr>
<tr>
<td>3</td>
<td>message</td>
<td>Required</td>
<td>Message that was signed</td>
</tr>
</tbody></table>
<h2 id='setmocktime'>setmocktime</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">timestamp</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">timestamp</span><span class="o">=</span>1503058155<span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "setmocktime",
    "params": [ '</span><span class="nv">$timestamp</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc setmocktime <span class="nv">$timestamp</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">setmocktime</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">timestamp</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="kc">null</span><span class="w">
</span></code></pre></div>
<p>Changes network time (This is consensus-critical)</p>
<h3 id='params-10'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>timestamp</td>
<td>Required</td>
<td>timestamp to change to</td>
</tr>
</tbody></table>
<h1 id='rpc-calls-chain'>RPC Calls - Chain</h1><h2 id='pruneblockchain'>pruneblockchain</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "pruneblockchain",
    "params": []
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc pruneblockchain
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">pruneblockchain</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<p>Prunes the blockchain, it will keep blocks specified in Network Configurations.</p>
<h3 id='default-prune-options'>Default Prune Options</h3>
<table><thead>
<tr>
<th>Network</th>
<th>keepBlocks</th>
<th>pruneAfter</th>
</tr>
</thead><tbody>
<tr>
<td>main</td>
<td>288</td>
<td>1000</td>
</tr>
<tr>
<td>testnet</td>
<td>10000</td>
<td>1000</td>
</tr>
<tr>
<td>regtest</td>
<td>10000</td>
<td>1000</td>
</tr>
</tbody></table>
<h3 id='params'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>None.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id='invalidateblock'>invalidateblock</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">blockhash</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">blockhash</span><span class="o">=</span><span class="s1">'52d7beaf4c7f392bef2744167c7f4db4bb4113b2635496edcf2d1c94128696aa'</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "invalidateblock",
    "params": [ "'</span><span class="nv">$blockhash</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc invalidateblock <span class="nv">$blockhash</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">invalidateblock</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">blockhash</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<p>Invalidates the block in the chain.
It will rewind network to blockhash and invalidate it.</p>

<p>It won&#39;t accept that block as valid.
<em>Invalidation will work while running, restarting node will remove invalid block from list.</em></p>
<h3 id='params-2'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>blockhash</td>
<td>Required</td>
<td>Block&#39;s hash</td>
</tr>
</tbody></table>
<h2 id='reconsiderblock'>reconsiderblock</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">blockhash</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">blockhash</span><span class="o">=</span><span class="s1">'1896e628f8011b77ea80f4582c29c21b3376183683f587ee863050376add3891'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "reconsiderblock",
    "params": [ "'</span><span class="nv">$blockhash</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc reconsiderblock <span class="nv">$blockhash</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">reconsiderblock</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">blockhash</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})().</span><span class="k">catch</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">stack</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>This rpc command will remove block from invalid block set.</p>
<h3 id='params-3'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>blockhash</td>
<td>Required</td>
<td>Block&#39;s hash</td>
</tr>
</tbody></table>
<h1 id='rpc-calls-block'>RPC Calls - Block</h1><h2 id='getblockchaininfo'>getblockchaininfo</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{ "method": "getblockchaininfo" }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc getblockchaininfo
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getblockchaininfo</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"chain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"regtest"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"blocks"</span><span class="p">:</span><span class="w"> </span><span class="mi">98</span><span class="p">,</span><span class="w">
  </span><span class="nl">"headers"</span><span class="p">:</span><span class="w"> </span><span class="mi">98</span><span class="p">,</span><span class="w">
  </span><span class="nl">"bestblockhash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"498d003ecfc60ee829cdc3640dc305583057d88e2c38a7d57dbe0f92aa2bb512"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"difficulty"</span><span class="p">:</span><span class="w"> </span><span class="mf">4.6565423739069247e-10</span><span class="p">,</span><span class="w">
  </span><span class="nl">"mediantime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1527028558</span><span class="p">,</span><span class="w">
  </span><span class="nl">"verificationprogress"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.9997162305340502</span><span class="p">,</span><span class="w">
  </span><span class="nl">"chainwork"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000000000000000000000000000000000000000000000000000000000c6"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pruned"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"softforks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bip34"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"reject"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bip66"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"reject"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bip65"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
      </span><span class="nl">"reject"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"bip9_softforks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"csv"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"defined"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bit"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"startTime"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">4294967295</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"segwit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"defined"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bit"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"startTime"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">4294967295</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"segsignal"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"defined"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bit"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
      </span><span class="nl">"startTime"</span><span class="p">:</span><span class="w"> </span><span class="mi">4294967295</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">4294967295</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"testdummy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"defined"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bit"</span><span class="p">:</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span><span class="w">
      </span><span class="nl">"startTime"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">4294967295</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"pruneheight"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Returns blockchain information.</p>
<h3 id='params'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>None.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id='getbestblockhash'>getbestblockhash</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{ "method": "getbestblockhash" }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc getbestblockhash
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getbestblockhash</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="s2">"498d003ecfc60ee829cdc3640dc305583057d88e2c38a7d57dbe0f92aa2bb512"</span><span class="w">
</span></code></pre></div>
<p>Returns Block Hash of the tip.</p>
<h3 id='params-2'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>None.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id='getblockcount'>getblockcount</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{ "method": "getblockcount" }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc getblockcount
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getblockcount</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="mi">98</span><span class="w">
</span></code></pre></div>
<p>Returns block count.</p>
<h3 id='params-3'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>None.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id='getblock'>getblock</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">blockhash</span><span class="p">,</span> <span class="nx">details</span><span class="p">,</span> <span class="nx">verbose</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">blockhash</span><span class="o">=</span><span class="s1">'498d003ecfc60ee829cdc3640dc305583057d88e2c38a7d57dbe0f92aa2bb512'</span><span class="p">;</span>
<span class="nv">verbose</span><span class="o">=</span>1<span class="p">;</span>
<span class="nv">details</span><span class="o">=</span>0<span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "getblock",
    "params": [ "'</span><span class="nv">$blockhash</span><span class="s1">'", '</span><span class="nv">$verbose</span><span class="s1">', '</span><span class="nv">$details</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc getblock <span class="nv">$blockhash</span> <span class="nv">$verbose</span> <span class="nv">$details</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getblock</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">blockhash</span><span class="p">,</span> <span class="nx">verbose</span><span class="p">,</span> <span class="nx">details</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"498d003ecfc60ee829cdc3640dc305583057d88e2c38a7d57dbe0f92aa2bb512"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"strippedsize"</span><span class="p">:</span><span class="w"> </span><span class="mi">197</span><span class="p">,</span><span class="w">
  </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">197</span><span class="p">,</span><span class="w">
  </span><span class="nl">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">788</span><span class="p">,</span><span class="w">
  </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">98</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">536870912</span><span class="p">,</span><span class="w">
  </span><span class="nl">"versionHex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merkleroot"</span><span class="p">:</span><span class="w"> </span><span class="s2">"674527b1b1b8604677a0b9e3f7a62fd733af9eba254d9f98748d3d0afdf35602"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"coinbase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01620e6d696e65642062792062636f696e046d2df7a0080000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tx"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"674527b1b1b8604677a0b9e3f7a62fd733af9eba254d9f98748d3d0afdf35602"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1527028559</span><span class="p">,</span><span class="w">
  </span><span class="nl">"mediantime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1527028558</span><span class="p">,</span><span class="w">
  </span><span class="nl">"bits"</span><span class="p">:</span><span class="w"> </span><span class="mi">545259519</span><span class="p">,</span><span class="w">
  </span><span class="nl">"difficulty"</span><span class="p">:</span><span class="w"> </span><span class="mf">4.6565423739069247e-10</span><span class="p">,</span><span class="w">
  </span><span class="nl">"chainwork"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000000000000000000000000000000000000000000000000000000000c6"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"previousblockhash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"267bec5755cb8362828351a1bedb0de8c8ab37a58627070a79b7aa48d09c7276"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"nextblockhash"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Returns information about block.</p>
<h3 id='params-4'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>blockhash</td>
<td>Required</td>
<td>Hash of the block</td>
</tr>
<tr>
<td>2</td>
<td>verbose</td>
<td>true</td>
<td>If set to false, it will return hex of the block</td>
</tr>
<tr>
<td>3</td>
<td>details</td>
<td>false</td>
<td>If set to true, it will return transaction details too.</td>
</tr>
</tbody></table>
<h2 id='getblockbyheight'>getblockbyheight</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">blockhash</span><span class="p">,</span> <span class="nx">details</span><span class="p">,</span> <span class="nx">verbose</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">blockheight</span><span class="o">=</span>50<span class="p">;</span>
<span class="nv">verbose</span><span class="o">=</span>1<span class="p">;</span>
<span class="nv">details</span><span class="o">=</span>0<span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "getblockbyheight",
    "params": [ '</span><span class="nv">$blockheight</span><span class="s1">', '</span><span class="nv">$verbose</span><span class="s1">', '</span><span class="nv">$details</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc getblockbyheight <span class="nv">$blockheight</span> <span class="nv">$verbose</span> <span class="nv">$details</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getblockbyheight</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">blockheight</span><span class="p">,</span> <span class="nx">verbose</span><span class="p">,</span> <span class="nx">details</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51726259de9560e1924f3cb554ad16e889b6170eb4d01d01f5a4ca8a81d1e318"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">49</span><span class="p">,</span><span class="w">
  </span><span class="nl">"strippedsize"</span><span class="p">:</span><span class="w"> </span><span class="mi">197</span><span class="p">,</span><span class="w">
  </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">197</span><span class="p">,</span><span class="w">
  </span><span class="nl">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">788</span><span class="p">,</span><span class="w">
  </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">536870912</span><span class="p">,</span><span class="w">
  </span><span class="nl">"versionHex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merkleroot"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8e2d404a039a7a3e1768b161aa23546aab0444b73905bdd3d68b3d6f1769e8c0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"coinbase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01320e6d696e65642062792062636f696e04a829b925080000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tx"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"8e2d404a039a7a3e1768b161aa23546aab0444b73905bdd3d68b3d6f1769e8c0"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1527028551</span><span class="p">,</span><span class="w">
  </span><span class="nl">"mediantime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1527028550</span><span class="p">,</span><span class="w">
  </span><span class="nl">"bits"</span><span class="p">:</span><span class="w"> </span><span class="mi">545259519</span><span class="p">,</span><span class="w">
  </span><span class="nl">"difficulty"</span><span class="p">:</span><span class="w"> </span><span class="mf">4.6565423739069247e-10</span><span class="p">,</span><span class="w">
  </span><span class="nl">"chainwork"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0000000000000000000000000000000000000000000000000000000000000066"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"previousblockhash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"69eef02e5b7e2558f96a7e9ecb47dbbc4dd9fb1aa46cc22f36d8e7ee1edde33d"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"nextblockhash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7f734e621cc3e08834063b9482aa89e0bcaf29e7812b83494f3891c7955958fb"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Returns information about block by height.</p>
<h3 id='params-5'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>blockheight</td>
<td>Required</td>
<td>height of the block in the blockchain.</td>
</tr>
<tr>
<td>2</td>
<td>verbose</td>
<td>true</td>
<td>If set to false, it will return hex of the block.</td>
</tr>
<tr>
<td>3</td>
<td>details</td>
<td>false</td>
<td>If set to true, it will return transaction details too.</td>
</tr>
</tbody></table>
<h2 id='getblockhash'>getblockhash</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">blockheight</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">blockheight</span><span class="o">=</span>50<span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "getblockhash",
    "params": [ '</span><span class="nv">$blockheight</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc getblockhash <span class="nv">$blockheight</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getblockhash</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">blockheight</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="s2">"51726259de9560e1924f3cb554ad16e889b6170eb4d01d01f5a4ca8a81d1e318"</span><span class="w">
</span></code></pre></div>
<p>Returns block&#39;s hash given its height.</p>
<h3 id='params-6'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>blockheight</td>
<td>Required</td>
<td>height of the block in the blockchain.</td>
</tr>
</tbody></table>
<h2 id='getblockheader'>getblockheader</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">blockhash</span><span class="p">,</span> <span class="nx">verbose</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">blockhash</span><span class="o">=</span><span class="s1">'51726259de9560e1924f3cb554ad16e889b6170eb4d01d01f5a4ca8a81d1e318'</span><span class="p">;</span>
<span class="nv">verbose</span><span class="o">=</span>1<span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "getblockheader",
    "params": [ "'</span><span class="nv">$blockhash</span><span class="s1">'", '</span><span class="nv">$verbose</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc getblockheader <span class="nv">$blockhash</span> <span class="nv">$verbose</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getblockheader</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">blockhash</span><span class="p">,</span> <span class="nx">verbose</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51726259de9560e1924f3cb554ad16e889b6170eb4d01d01f5a4ca8a81d1e318"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">49</span><span class="p">,</span><span class="w">
  </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">536870912</span><span class="p">,</span><span class="w">
  </span><span class="nl">"versionHex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merkleroot"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8e2d404a039a7a3e1768b161aa23546aab0444b73905bdd3d68b3d6f1769e8c0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1527028551</span><span class="p">,</span><span class="w">
  </span><span class="nl">"mediantime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1527028550</span><span class="p">,</span><span class="w">
  </span><span class="nl">"bits"</span><span class="p">:</span><span class="w"> </span><span class="mi">545259519</span><span class="p">,</span><span class="w">
  </span><span class="nl">"difficulty"</span><span class="p">:</span><span class="w"> </span><span class="mf">4.6565423739069247e-10</span><span class="p">,</span><span class="w">
  </span><span class="nl">"chainwork"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0000000000000000000000000000000000000000000000000000000000000066"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"previousblockhash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"69eef02e5b7e2558f96a7e9ecb47dbbc4dd9fb1aa46cc22f36d8e7ee1edde33d"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"nextblockhash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7f734e621cc3e08834063b9482aa89e0bcaf29e7812b83494f3891c7955958fb"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Returns a block&#39;s header given its hash.</p>
<h3 id='params-7'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>blockheight</td>
<td>Required</td>
<td>height of the block in the blockchain.</td>
</tr>
<tr>
<td>2</td>
<td>verbose</td>
<td>true</td>
<td>If set to false, it will return hex of the block.</td>
</tr>
</tbody></table>
<h2 id='getchaintips'>getchaintips</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "getchaintips"
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc getchaintips
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getchaintips</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<p>Returns chaintips.</p>

<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">98</span><span class="p">,</span><span class="w">
    </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"498d003ecfc60ee829cdc3640dc305583057d88e2c38a7d57dbe0f92aa2bb512"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"branchlen"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div><h3 id='params-8'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>None.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id='getdifficulty'>getdifficulty</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "getdifficulty"
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc getdifficulty
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getdifficulty</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="mi">1048576</span><span class="w">
</span></code></pre></div><h3 id='params-9'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>None.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h1 id='rpc-calls-mempool'>RPC Calls - Mempool</h1><h2 id='getmempoolinfo'>getmempoolinfo</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "getmempoolinfo"
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc getmempoolinfo
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getmempoolinfo</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="nl">"bytes"</span><span class="p">:</span><span class="w"> </span><span class="mi">14120</span><span class="p">,</span><span class="w">
  </span><span class="nl">"usage"</span><span class="p">:</span><span class="w"> </span><span class="mi">14120</span><span class="p">,</span><span class="w">
  </span><span class="nl">"maxmempool"</span><span class="p">:</span><span class="w"> </span><span class="mi">100000000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"mempoolminfee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00001</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Returns informations about mempool.</p>
<h3 id='params'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>None.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id='getmempoolancestors'>getmempoolancestors</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">txhash</span><span class="p">,</span> <span class="nx">verbose</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">txhash</span><span class="o">=</span><span class="s1">'0e690d6655767c8b388e7403d13dc9ebe49b68e3bd46248c840544f9da87d1e8'</span><span class="p">;</span>
<span class="nv">verbose</span><span class="o">=</span>1<span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "getmempoolancestors",
    "params": [ "'</span><span class="nv">$txhash</span><span class="s1">'", '</span><span class="nv">$verbose</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc getmempoolancestors <span class="nv">$txhash</span> <span class="nv">$verbose</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getmempoolancestors</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">txhash</span><span class="p">,</span> <span class="nx">verbose</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>

<p>verbose=1</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">226</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0000454</span><span class="p">,</span><span class="w">
    </span><span class="nl">"modifiedfee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1527103521</span><span class="p">,</span><span class="w">
    </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="nl">"startingpriority"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currentpriority"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"descendantcount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"descendantsize"</span><span class="p">:</span><span class="w"> </span><span class="mi">451</span><span class="p">,</span><span class="w">
    </span><span class="nl">"descendantfees"</span><span class="p">:</span><span class="w"> </span><span class="mi">9080</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ancestorcount"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ancestorsize"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ancestorfees"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"depends"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"7922c798ea02c3957393bb7c373ba89e0a337d049564aeb64a9fd2b8d4998795"</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">225</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0000454</span><span class="p">,</span><span class="w">
    </span><span class="nl">"modifiedfee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1527103519</span><span class="p">,</span><span class="w">
    </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="nl">"startingpriority"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currentpriority"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"descendantcount"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"descendantsize"</span><span class="p">:</span><span class="w"> </span><span class="mi">676</span><span class="p">,</span><span class="w">
    </span><span class="nl">"descendantfees"</span><span class="p">:</span><span class="w"> </span><span class="mi">13620</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ancestorcount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ancestorsize"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ancestorfees"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"depends"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"d54e576d30f9014ffb06a31b9e36f2f5bb360e8c54980188ee4b09a979e092c2"</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>verbose=0</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"56ab7663c80cb6ffc9f8a4b493d77b2e6f52ae8ff64eefa8899c2065922665c8"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>returns all in-mempool ancestors for a transaction in the mempool.</p>
<h3 id='params-2'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>txhash</td>
<td>Required</td>
<td>Transaction Hash</td>
</tr>
<tr>
<td>2</td>
<td>verbose</td>
<td>false</td>
<td>False returns only tx hashs, true - returns dependency tx info</td>
</tr>
</tbody></table>
<h2 id='getmempooldescendants'>getmempooldescendants</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">txhash</span><span class="p">,</span> <span class="nx">verbose</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">txhash</span><span class="o">=</span><span class="s1">'7922c798ea02c3957393bb7c373ba89e0a337d049564aeb64a9fd2b8d4998795'</span><span class="p">;</span>
<span class="nv">verbose</span><span class="o">=</span>1<span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "getmempooldescendants",
    "params": [ "'</span><span class="nv">$txhash</span><span class="s1">'", '</span><span class="nv">$verbose</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc getmempooldescendants <span class="nv">$txhash</span> <span class="nv">$verbose</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getmempooldescendants</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">txhash</span><span class="p">,</span> <span class="nx">verbose</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>

<p>verbose=1</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">226</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0000454</span><span class="p">,</span><span class="w">
    </span><span class="nl">"modifiedfee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1527103521</span><span class="p">,</span><span class="w">
    </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="nl">"startingpriority"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currentpriority"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"descendantcount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"descendantsize"</span><span class="p">:</span><span class="w"> </span><span class="mi">451</span><span class="p">,</span><span class="w">
    </span><span class="nl">"descendantfees"</span><span class="p">:</span><span class="w"> </span><span class="mi">9080</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ancestorcount"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ancestorsize"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ancestorfees"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"depends"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"7922c798ea02c3957393bb7c373ba89e0a337d049564aeb64a9fd2b8d4998795"</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">225</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0000454</span><span class="p">,</span><span class="w">
    </span><span class="nl">"modifiedfee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1527103523</span><span class="p">,</span><span class="w">
    </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="nl">"startingpriority"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currentpriority"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"descendantcount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"descendantsize"</span><span class="p">:</span><span class="w"> </span><span class="mi">225</span><span class="p">,</span><span class="w">
    </span><span class="nl">"descendantfees"</span><span class="p">:</span><span class="w"> </span><span class="mi">4540</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ancestorcount"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ancestorsize"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ancestorfees"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"depends"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"e66c029a755d326f14cc32f485ea43e705ef59ed4a8061e8f47e681fbdefefea"</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>verbose=0</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"939a3b8485b53a718d89e7e4412473b3762fa1d9bbd555fc8b01e73be0ab1881"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>returns all in-mempool descendants for a transaction in the mempool.</p>
<h3 id='params-3'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>txhash</td>
<td>Required</td>
<td>Transaction hash</td>
</tr>
<tr>
<td>2</td>
<td>verbose</td>
<td>false</td>
<td>False returns only tx hashs, true - returns dependency tx info</td>
</tr>
</tbody></table>
<h2 id='getmempoolentry'>getmempoolentry</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">txhash</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">txhash</span><span class="o">=</span><span class="s1">'0e690d6655767c8b388e7403d13dc9ebe49b68e3bd46248c840544f9da87d1e8'</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "getmempoolentry",
    "params": [ "'</span><span class="nv">$txhash</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc getmempoolentry <span class="nv">$txhash</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getmempoolentry</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">txhash</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">225</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0000454</span><span class="p">,</span><span class="w">
  </span><span class="nl">"modifiedfee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1527103523</span><span class="p">,</span><span class="w">
  </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
  </span><span class="nl">"startingpriority"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currentpriority"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"descendantcount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"descendantsize"</span><span class="p">:</span><span class="w"> </span><span class="mi">225</span><span class="p">,</span><span class="w">
  </span><span class="nl">"descendantfees"</span><span class="p">:</span><span class="w"> </span><span class="mi">4540</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ancestorcount"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ancestorsize"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ancestorfees"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"depends"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"e66c029a755d326f14cc32f485ea43e705ef59ed4a8061e8f47e681fbdefefea"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>returns mempool transaction info by its hash.</p>
<h3 id='params-4'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>txhash</td>
<td>Required</td>
<td>Transaction Hash</td>
</tr>
</tbody></table>
<h2 id='getrawmempool'>getrawmempool</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">verbose</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">verbose</span><span class="o">=</span>1<span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "getrawmempool",
    "params": [ '</span><span class="nv">$verbose</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc getrawmempool <span class="nv">$verbose</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getrawmempool</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">verbose</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"d54e576d30f9014ffb06a31b9e36f2f5bb360e8c54980188ee4b09a979e092c2"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">225</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0000454</span><span class="p">,</span><span class="w">
    </span><span class="nl">"modifiedfee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1527103516</span><span class="p">,</span><span class="w">
    </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="nl">"startingpriority"</span><span class="p">:</span><span class="w"> </span><span class="mi">2200000000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currentpriority"</span><span class="p">:</span><span class="w"> </span><span class="mi">2200000000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"descendantcount"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"descendantsize"</span><span class="p">:</span><span class="w"> </span><span class="mi">901</span><span class="p">,</span><span class="w">
    </span><span class="nl">"descendantfees"</span><span class="p">:</span><span class="w"> </span><span class="mi">18160</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ancestorcount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ancestorsize"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ancestorfees"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"depends"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"7922c798ea02c3957393bb7c373ba89e0a337d049564aeb64a9fd2b8d4998795"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">225</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0000454</span><span class="p">,</span><span class="w">
    </span><span class="nl">"modifiedfee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1527103519</span><span class="p">,</span><span class="w">
    </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="nl">"startingpriority"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currentpriority"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"descendantcount"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"descendantsize"</span><span class="p">:</span><span class="w"> </span><span class="mi">676</span><span class="p">,</span><span class="w">
    </span><span class="nl">"descendantfees"</span><span class="p">:</span><span class="w"> </span><span class="mi">13620</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ancestorcount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ancestorsize"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ancestorfees"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"depends"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"d54e576d30f9014ffb06a31b9e36f2f5bb360e8c54980188ee4b09a979e092c2"</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="err">...</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Returns mempool detailed information (on verbose).
Or mempool tx list.</p>
<h3 id='params-5'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>verbose</td>
<td>false</td>
<td>False returns only tx hashs, true - returns full tx info</td>
</tr>
</tbody></table>
<h2 id='prioritisetransaction'>prioritisetransaction</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">txhash</span><span class="p">,</span> <span class="nx">priorityDelta</span><span class="p">,</span> <span class="nx">feeDelta</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">txhash</span><span class="o">=</span><span class="s1">'0e690d6655767c8b388e7403d13dc9ebe49b68e3bd46248c840544f9da87d1e8'</span><span class="p">;</span>
<span class="nv">priorityDelta</span><span class="o">=</span>1000<span class="p">;</span>
<span class="nv">feeDelta</span><span class="o">=</span>1000<span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "prioritisetransaction",
    "params": [ "'</span><span class="nv">$txhash</span><span class="s1">'", '</span><span class="nv">$priorityDelta</span><span class="s1">', '</span><span class="nv">$feeDelta</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc prioritisetransaction <span class="nv">$txhash</span> <span class="nv">$priorityDelta</span> <span class="nv">$feeDelta</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">prioritisetransaction</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">txhash</span><span class="p">,</span> <span class="nx">priorityDelta</span><span class="p">,</span> <span class="nx">feeDelta</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="kc">true</span><span class="w">
</span></code></pre></div>
<p>Prioritises the transaction.</p>

<p><em>Note: changing fee or priority will only trick local miner (using this mempool)
into accepting Transaction(s) into the block. (even if Priority/Fee doen&#39;t qualify)</em></p>

<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>txhash</td>
<td>Required</td>
<td>Transaction hash</td>
</tr>
<tr>
<td>2</td>
<td>priority delta</td>
<td>Required</td>
<td>Virtual priority to add/subtract to the entry</td>
</tr>
<tr>
<td>3</td>
<td>fee delta</td>
<td>Required</td>
<td>Virtual fee to add/subtract to the entry</td>
</tr>
</tbody></table>
<h2 id='estimatefee'>estimatefee</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">nblocks</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">nblocks</span><span class="o">=</span>10<span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "estimatefee",
    "params": [ '</span><span class="nv">$nblocks</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc estimatefee <span class="nv">$nblocks</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">estimatefee</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">nblocks</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="mf">0.001</span><span class="w">
</span></code></pre></div>
<p>Estimates fee to be paid for transaction.</p>
<h3 id='params-6'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>nblocks</td>
<td>1</td>
<td>Number of blocks to check for estimation.</td>
</tr>
</tbody></table>
<h2 id='estimatepriority'>estimatepriority</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">nblocks</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">nblocks</span><span class="o">=</span>10<span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "estimatepriority",
    "params": [ '</span><span class="nv">$nblocks</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc estimatepriority <span class="nv">$nblocks</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">estimatepriority</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">nblocks</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="mf">718158904.3501</span><span class="w">
</span></code></pre></div>
<p>estimates the priority (coin age) that a transaction needs in order to be included within a certain number of blocks as a free high-priority transaction.</p>
<h3 id='params-7'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>nblocks</td>
<td>1</td>
<td>Number of blocks to check for estimation.</td>
</tr>
</tbody></table>
<h2 id='estimatesmartfee'>estimatesmartfee</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">nblocks</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">nblocks</span><span class="o">=</span>10<span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "estimatesmartfee",
    "params": [ '</span><span class="nv">$nblocks</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc estimatesmartfee <span class="nv">$nblocks</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">estimatesmartfee</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">nblocks</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.001</span><span class="p">,</span><span class="w">
  </span><span class="nl">"blocks"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Estimates smart fee to be paid for transaction.</p>
<h3 id='params-8'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>nblocks</td>
<td>1</td>
<td>Number of blocks to check for estimation.</td>
</tr>
</tbody></table>
<h2 id='estimatesmartpriority'>estimatesmartpriority</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">nblocks</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">nblocks</span><span class="o">=</span>10<span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "estimatesmartpriority",
    "params": [ '</span><span class="nv">$nblocks</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc estimatesmartpriority <span class="nv">$nblocks</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">estimatesmartpriority</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">nblocks</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"priority"</span><span class="p">:</span><span class="w"> </span><span class="mf">718158904.3501</span><span class="p">,</span><span class="w">
  </span><span class="nl">"blocks"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>estimates smart priority (coin age) that a transaction needs in order to be included within a certain number of blocks as a free high-priority transaction.</p>
<h3 id='params-9'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>nblocks</td>
<td>1</td>
<td>Number of blocks to check for estimation.</td>
</tr>
</tbody></table>
<h1 id='rpc-calls-transactions'>RPC Calls - Transactions</h1><h2 id='gettxout'>gettxout</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">txhash</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">includemempool</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">txhash</span><span class="o">=</span><span class="s1">'1ddd325274274f8a2a62e96c3f3fd5f7ecbca4a3ba24c039692e3068edd904a7'</span><span class="p">;</span>
<span class="nv">index</span><span class="o">=</span>0<span class="p">;</span>
<span class="nv">includemempool</span><span class="o">=</span>1<span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "gettxout",
    "params": [ "'</span><span class="nv">$txhash</span><span class="s1">'", '</span><span class="nv">$index</span><span class="s1">', '</span><span class="nv">$includemempool</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc gettxout <span class="nv">$txhash</span> <span class="nv">$index</span> <span class="nv">$includemempool</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">gettxout</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">txhash</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">includemempool</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"bestblock"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6070a949eb9dcc36c416fe52a499d4cf2c7ad699ddeb2e358a9063a452c72523"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00024823</span><span class="p">,</span><span class="w">
  </span><span class="nl">"scriptPubKey"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"asm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OP_DUP OP_HASH160 94fe559c42b11736d0cab28d550b8972ccfbef3d OP_EQUALVERIFY OP_CHECKSIG"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"76a91494fe559c42b11736d0cab28d550b8972ccfbef3d88ac"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PUBKEYHASH"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reqSigs"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"addresses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"mu6kyujE3JeyPZYHwdBdBVrv6V5ReWwz6a"</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"coinbase"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get outpoint of the transaction.</p>
<h3 id='params'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>txid</td>
<td>Required</td>
<td>Transaction hash</td>
</tr>
<tr>
<td>2</td>
<td>index</td>
<td>Required</td>
<td>Index of the Outpoint tx.</td>
</tr>
<tr>
<td>3</td>
<td>includemempool</td>
<td>true</td>
<td>Whether to include mempool transactions.</td>
</tr>
</tbody></table>
<h2 id='gettxoutsetinfo'>gettxoutsetinfo</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "gettxoutsetinfo",
    "params": []
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc gettxoutsetinfo
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">gettxoutsetinfo</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
  </span><span class="nl">"bestblock"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0e11d85b2081b84e131ba6692371737e6bb2aa7bc6d16e92954ffb1f9ad762e5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="mi">101</span><span class="p">,</span><span class="w">
  </span><span class="nl">"txouts"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
  </span><span class="nl">"bytes_serialized"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"hash_serialized"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"total_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">5000</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Returns information about UTXO&#39;s from Chain.</p>
<h3 id='params-2'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>None.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id='getrawtransaction'>getrawtransaction</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">txhash</span><span class="p">,</span> <span class="nx">verbose</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">txhash</span><span class="o">=</span><span class="s1">'0e690d6655767c8b388e7403d13dc9ebe49b68e3bd46248c840544f9da87d1e8'</span><span class="p">;</span>
<span class="nv">verbose</span><span class="o">=</span>0<span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "getrawtransaction",
    "params": [ "'</span><span class="nv">$txhash</span><span class="s1">'", '</span><span class="nv">$verbose</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc getrawtransaction <span class="nv">$txhash</span> <span class="nv">$verbose</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getrawtransaction</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">txhash</span><span class="p">,</span> <span class="nx">verbose</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="s2">"0100000001eaefefbd1f687ef4e861804aed59ef05e743ea85f432cc146f325d759a026ce6010000006a4730440220718954e28983c875858b5a0094df4607ce2e7c6e9ffea47f3876792b01755c1202205e2adc7c32ff64aaef6d26045f96181e8741e560b6f3a8ef2f4ffd2892add656012103142355370728640592109c3d2bf5592020a6b9226303c8bc98ab2ebcadf057abffffffff02005a6202000000001976a914fe7e0711287688b33b9a5c239336c4700db34e6388ac10ca0f24010000001976a914af92ad98c7f77559f96430dfef2a6805b87b24f888ac00000000"</span><span class="w">
</span></code></pre></div>
<p>Returns raw transaction</p>
<h3 id='params-3'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>txhash</td>
<td>Required</td>
<td>Transaction hash</td>
</tr>
<tr>
<td>2</td>
<td>verbose</td>
<td>false</td>
<td>Returns json formatted if true</td>
</tr>
</tbody></table>
<h2 id='decoderawtransaction'>decoderawtransaction</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">rawtx</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">rawtx</span><span class="o">=</span><span class="s1">'0100000001eaefefbd1f687ef4e861804aed59ef05e743ea85f432cc146f325d759a026ce6010000006a4730440220718954e28983c875858b5a0094df4607ce2e7c6e9ffea47f3876792b01755c1202205e2adc7c32ff64aaef6d26045f96181e8741e560b6f3a8ef2f4ffd2892add656012103142355370728640592109c3d2bf5592020a6b9226303c8bc98ab2ebcadf057abffffffff02005a6202000000001976a914fe7e0711287688b33b9a5c239336c4700db34e6388ac10ca0f24010000001976a914af92ad98c7f77559f96430dfef2a6805b87b24f888ac00000000'</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "decoderawtransaction",
    "params": [ "'</span><span class="nv">$rawtx</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc decoderawtransaction <span class="nv">$rawtx</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">decoderawtransaction</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">rawtx</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0e690d6655767c8b388e7403d13dc9ebe49b68e3bd46248c840544f9da87d1e8"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0e690d6655767c8b388e7403d13dc9ebe49b68e3bd46248c840544f9da87d1e8"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">225</span><span class="p">,</span><span class="w">
  </span><span class="nl">"vsize"</span><span class="p">:</span><span class="w"> </span><span class="mi">225</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"locktime"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"vin"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e66c029a755d326f14cc32f485ea43e705ef59ed4a8061e8f47e681fbdefefea"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"scriptSig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"asm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30440220718954e28983c875858b5a0094df4607ce2e7c6e9ffea47f3876792b01755c1202205e2adc7c32ff64aaef6d26045f96181e8741e560b6f3a8ef2f4ffd2892add65601 03142355370728640592109c3d2bf5592020a6b9226303c8bc98ab2ebcadf057ab"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4730440220718954e28983c875858b5a0094df4607ce2e7c6e9ffea47f3876792b01755c1202205e2adc7c32ff64aaef6d26045f96181e8741e560b6f3a8ef2f4ffd2892add656012103142355370728640592109c3d2bf5592020a6b9226303c8bc98ab2ebcadf057ab"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"sequence"</span><span class="p">:</span><span class="w"> </span><span class="mi">4294967295</span><span class="p">,</span><span class="w">
      </span><span class="nl">"vout"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"vout"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.4</span><span class="p">,</span><span class="w">
      </span><span class="nl">"n"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"scriptPubKey"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"asm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OP_DUP OP_HASH160 fe7e0711287688b33b9a5c239336c4700db34e63 OP_EQUALVERIFY OP_CHECKSIG"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"76a914fe7e0711287688b33b9a5c239336c4700db34e6388ac"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PUBKEYHASH"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reqSigs"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"addresses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"n4iauL838sLmADwTwfRkeejc4jCs8UJsTE"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">48.9998184</span><span class="p">,</span><span class="w">
      </span><span class="nl">"n"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"scriptPubKey"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"asm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OP_DUP OP_HASH160 af92ad98c7f77559f96430dfef2a6805b87b24f8 OP_EQUALVERIFY OP_CHECKSIG"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"76a914af92ad98c7f77559f96430dfef2a6805b87b24f888ac"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PUBKEYHASH"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reqSigs"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"addresses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"mwXJFzrRk86NoH7uKytkSq2rbCkV9tgAgp"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"blockhash"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"blocktime"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Decodes raw tx and provide chain info.</p>
<h3 id='params-4'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>rawtx</td>
<td>Required</td>
<td>Raw transaction hex</td>
</tr>
</tbody></table>
<h2 id='decodescript'>decodescript</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">script</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">script</span><span class="o">=</span><span class="s1">'76a914af92ad98c7f77559f96430dfef2a6805b87b24f888ac'</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "decodescript",
    "params": [ "'</span><span class="nv">$script</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc decodescript <span class="nv">$script</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">decodescript</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">script</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"asm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OP_DUP OP_HASH160 af92ad98c7f77559f96430dfef2a6805b87b24f8 OP_EQUALVERIFY OP_CHECKSIG"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PUBKEYHASH"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"reqSigs"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"addresses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"mwXJFzrRk86NoH7uKytkSq2rbCkV9tgAgp"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"p2sh"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2N8Hd7HBwFoqq3hHvSLQ1XWEKLgkhVjxisY"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Decodes script</p>
<h3 id='params-5'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>script</td>
<td>Required</td>
<td>Script hex</td>
</tr>
</tbody></table>
<h2 id='sendrawtransaction'>sendrawtransaction</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">rawtx</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">rawtx</span><span class="o">=</span><span class="s1">'0100000001eaefefbd1f687ef4e861804aed59ef05e743ea85f432cc146f325d759a026ce6010000006a4730440220718954e28983c875858b5a0094df4607ce2e7c6e9ffea47f3876792b01755c1202205e2adc7c32ff64aaef6d26045f96181e8741e560b6f3a8ef2f4ffd2892add656012103142355370728640592109c3d2bf5592020a6b9226303c8bc98ab2ebcadf057abffffffff02005a6202000000001976a914fe7e0711287688b33b9a5c239336c4700db34e6388ac10ca0f24010000001976a914af92ad98c7f77559f96430dfef2a6805b87b24f888ac00000000'</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "sendrawtransaction",
    "params": [ "'</span><span class="nv">$rawtx</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc sendrawtransaction <span class="nv">$rawtx</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">sendrawtransaction</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">rawtx</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="s2">"0e690d6655767c8b388e7403d13dc9ebe49b68e3bd46248c840544f9da87d1e8"</span><span class="w">
</span></code></pre></div>
<p>Sends raw transaction without verification</p>
<h3 id='params-6'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>rawtx</td>
<td>Required</td>
<td>Raw transaction hex</td>
</tr>
</tbody></table>
<h2 id='createrawtransaction'>createrawtransaction</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">txhash</span><span class="p">,</span> <span class="nx">txindex</span><span class="p">,</span> <span class="nx">amount</span><span class="p">,</span> <span class="nx">address</span><span class="p">,</span> <span class="nx">data</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">txhash</span><span class="o">=</span><span class="s1">'0e690d6655767c8b388e7403d13dc9ebe49b68e3bd46248c840544f9da87d1e8'</span><span class="p">;</span>
<span class="nv">txindex</span><span class="o">=</span>1<span class="p">;</span>
<span class="nv">amount</span><span class="o">=</span>48.99900000<span class="p">;</span>
<span class="nv">address</span><span class="o">=</span><span class="s1">'mhX1xHbKGzw3r8FoN5bUkmRixHPEDNywxh'</span><span class="p">;</span>
<span class="nv">data</span><span class="o">=</span><span class="s1">''</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "createrawtransaction",
    "params": [
      [{ "txid": "'</span><span class="nv">$txhash</span><span class="s1">'", "vout": '</span><span class="nv">$txindex</span><span class="s1">' }],
      { "'</span><span class="nv">$address</span><span class="s1">'": '</span><span class="nv">$amount</span><span class="s1">', "data": "'</span><span class="nv">$data</span><span class="s1">'" }
    ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc createrawtransaction <span class="se">\</span>
  <span class="s1">'[{ "txid": "'</span><span class="nv">$txhash</span><span class="s1">'", "vout": '</span><span class="nv">$txindex</span><span class="s1">' }]'</span> <span class="se">\</span>
  <span class="s1">'{ "'</span><span class="nv">$address</span><span class="s1">'": '</span><span class="nv">$amount</span><span class="s1">', "data": "'</span><span class="nv">$data</span><span class="s1">'" }'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">sendTo</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">data</span><span class="p">:</span> <span class="nx">data</span>
  <span class="p">};</span>
  <span class="nx">sendTo</span><span class="p">[</span><span class="nx">address</span><span class="p">]</span> <span class="o">=</span> <span class="nx">amount</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">createrawtransaction</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="p">[{</span> <span class="na">txid</span><span class="p">:</span> <span class="nx">txhash</span><span class="p">,</span> <span class="na">vout</span><span class="p">:</span> <span class="nx">txindex</span> <span class="p">}],</span> <span class="nx">sendTo</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="s2">"0100000001e8d187daf94405848c2446bde3689be4ebc93dd103748e388b7c7655660d690e0100000000ffffffff02608a0e24010000001976a914c1325e8fb60bd71d23532c39b4c9e743a2cc764988ac0000000000000000026a0000000000"</span><span class="w">
</span></code></pre></div>
<aside class="info">
Note: Transaction in example doesn't specify change output,
you can do it by specifying another <code>address: amount</code> pair.
</aside>

<aside class="warning">
Amounts are expressed in FULL BITCOINS (not satoshis) in all three interface methods.
</aside>

<p>Creates raw, unsigned transaction without any formal verification.</p>
<h3 id='params-7'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>outpoints</td>
<td>Required</td>
<td>Outpoint list</td>
</tr>
<tr>
<td>1.1</td>
<td>txid</td>
<td></td>
<td>Transaction Hash</td>
</tr>
<tr>
<td>1.2</td>
<td>vout</td>
<td></td>
<td>Transaction Outpoint Index</td>
</tr>
<tr>
<td>1.3</td>
<td>sequence</td>
<td></td>
<td>Sequence number for input</td>
</tr>
<tr>
<td>2</td>
<td>sendto</td>
<td>Required</td>
<td>List of addresses with amounts that we are sending to.</td>
</tr>
<tr>
<td>2.1</td>
<td>address</td>
<td>0</td>
<td><code>address: amount</code> key pairs (<em>string</em>: <em>float</em>)</td>
</tr>
<tr>
<td>2.2</td>
<td>data</td>
<td>nullData</td>
<td>Data output (added as <code>OP_RETURN</code>)</td>
</tr>
<tr>
<td>3</td>
<td>locktime</td>
<td></td>
<td>earliest time a transaction can be added</td>
</tr>
</tbody></table>
<h2 id='signrawtransaction'>signrawtransaction</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">rawtx</span><span class="p">,</span> <span class="nx">txhash</span><span class="p">,</span> <span class="nx">txindex</span><span class="p">,</span> <span class="nx">scriptPubKey</span><span class="p">,</span> <span class="nx">amount</span><span class="p">,</span> <span class="nx">privkey</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">rawtx</span><span class="o">=</span><span class="s1">'0100000001e8d187daf94405848c2446bde3689be4ebc93dd103748e388b7c7655660d690e0100000000ffffffff02608a0e24010000001976a914c1325e8fb60bd71d23532c39b4c9e743a2cc764988ac0000000000000000026a0000000000'</span><span class="p">;</span>
<span class="nv">txhash</span><span class="o">=</span><span class="s1">'0e690d6655767c8b388e7403d13dc9ebe49b68e3bd46248c840544f9da87d1e8'</span><span class="p">;</span>
<span class="nv">txindex</span><span class="o">=</span>1<span class="p">;</span>
<span class="nv">scriptPubKey</span><span class="o">=</span><span class="s1">'76a914af92ad98c7f77559f96430dfef2a6805b87b24f888ac'</span><span class="p">;</span>
<span class="nv">amount</span><span class="o">=</span>48.99900000<span class="p">;</span>
<span class="nv">privkey</span><span class="o">=</span><span class="s1">'cNmBeL4kpjLtNZcvjSezftq4ks6ajzZRi1z2AGpuBGy6XjxzytiQ'</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "signrawtransaction",
    "params": [
      "'</span><span class="nv">$rawtx</span><span class="s1">'",
      [{
        "txid": "'</span><span class="nv">$txhash</span><span class="s1">'",
        "vout": '</span><span class="nv">$txindex</span><span class="s1">',
        "scriptPubKey": "'</span><span class="nv">$scriptPubKey</span><span class="s1">'",
        "amount": '</span><span class="nv">$amount</span><span class="s1">'
      }],
      [ "'</span><span class="nv">$privkey</span><span class="s1">'" ]
    ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc signrawtransaction <span class="nv">$rawtx</span> <span class="se">\</span>
  <span class="s1">'[{ "txid": "'</span><span class="nv">$txhash</span><span class="s1">'", "vout": '</span><span class="nv">$txindex</span><span class="s1">', "scriptPubKey": "'</span><span class="nv">$scriptPubKey</span><span class="s1">'", "amount": '</span><span class="nv">$amount</span><span class="s1">' }]'</span> <span class="se">\</span>
  <span class="s1">'[ "'</span><span class="nv">$privkey</span><span class="s1">'" ]'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">signrawtransaction</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">rawtx</span><span class="p">,</span>
    <span class="p">[{</span>
      <span class="na">txid</span><span class="p">:</span> <span class="nx">txhash</span><span class="p">,</span>
      <span class="na">vout</span><span class="p">:</span> <span class="nx">txindex</span><span class="p">,</span>
      <span class="na">scriptPubKey</span><span class="p">:</span> <span class="nx">scriptPubKey</span><span class="p">,</span>
      <span class="na">amount</span><span class="p">:</span> <span class="nx">amount</span>
    <span class="p">}],</span>
    <span class="p">[</span> <span class="nx">privkey</span> <span class="p">]</span>
  <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0100000001e8d187daf94405848c2446bde3689be4ebc93dd103748e388b7c7655660d690e010000006a47304402205088870d469e5a878c54186e971cdc59d4e0c74f1c88709f584590ba76a9b97002202b4810a122fc4977e5a77c80dc68d4ffa73d22dbf385e46241dda6bddfd7993901210284a937f256393b3ba686556e90bd000706600bdbee4169abd092f392689307d2ffffffff02608a0e24010000001976a914c1325e8fb60bd71d23532c39b4c9e743a2cc764988ac0000000000000000026a0000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"complete"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Signs raw transaction</p>
<h3 id='params-8'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>rawtx</td>
<td>Required</td>
<td>raw tx</td>
</tr>
<tr>
<td>2</td>
<td>inputs</td>
<td>Required</td>
<td>Coins you&#39;re going to spend</td>
</tr>
<tr>
<td>2.1</td>
<td>txid</td>
<td></td>
<td>Transaction Hash</td>
</tr>
<tr>
<td>2.2</td>
<td>vout</td>
<td></td>
<td>Transaction Outpoint Index</td>
</tr>
<tr>
<td>2.3</td>
<td>scriptPubKey</td>
<td></td>
<td>script with pubkey you are going to sign</td>
</tr>
<tr>
<td>2.4</td>
<td>redeemScript</td>
<td></td>
<td>redeemScript if tx is P2SH</td>
</tr>
<tr>
<td>2.5</td>
<td>amount</td>
<td></td>
<td>value of output in BTC</td>
</tr>
<tr>
<td>3</td>
<td>privkeylist</td>
<td></td>
<td>List of private keys</td>
</tr>
<tr>
<td>4</td>
<td>sighashtype</td>
<td></td>
<td>Type of signature hash</td>
</tr>
</tbody></table>
<h2 id='gettxoutproof'>gettxoutproof</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">txid0</span><span class="p">,</span> <span class="nx">txid1</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">txid0</span><span class="o">=</span><span class="s1">'0e690d6655767c8b388e7403d13dc9ebe49b68e3bd46248c840544f9da87d1e8'</span><span class="p">;</span>
<span class="nv">txid1</span><span class="o">=</span><span class="s1">'e66c029a755d326f14cc32f485ea43e705ef59ed4a8061e8f47e681fbdefefea'</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "gettxoutproof",
    "params": [ ["'</span><span class="nv">$txid0</span><span class="s1">'", "'</span><span class="nv">$txid1</span><span class="s1">'"] ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc gettxoutproof <span class="s1">'[ "'</span><span class="nv">$txid0</span><span class="s1">'", "'</span><span class="nv">$txid1</span><span class="s1">'" ]'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">gettxoutproof</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="p">[</span> <span class="nx">txid0</span><span class="p">,</span> <span class="nx">txid1</span> <span class="p">]</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="s2">"00000020e562d79a1ffb4f95926ed1c67baab26b7e73712369a61b134eb881205bd8110ef08c63626ea13ca11fddad4f2c0a2b67354efdcd50f769b73330af205dcdd054cbd3055bffff7f20010000000500000004ae4be9cd199b09f605119820680eb23462746e98fbc2b0c635643f00b34c3cd8958799d4b8d29f4ab6ae6495047d330a9ea83b377cbb937395c302ea98c72279eaefefbd1f687ef4e861804aed59ef05e743ea85f432cc146f325d759a026ce6e8d187daf94405848c2446bde3689be4ebc93dd103748e388b7c7655660d690e02eb01"</span><span class="w">
</span></code></pre></div>
<p>Checks if transactions are within block.
Returns proof of transaction inclusion (raw MerkleBlock).</p>
<h3 id='params-9'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>txidlist</td>
<td>Required</td>
<td>array of transaction hashes</td>
</tr>
<tr>
<td>2</td>
<td>blockhash</td>
<td>Based on TX</td>
<td>Block hash</td>
</tr>
</tbody></table>
<h2 id='verifytxoutproof'>verifytxoutproof</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">proof</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">proof</span><span class="o">=</span><span class="s1">'00000020e562d79a1ffb4f95926ed1c67baab26b7e73712369a61b134eb881205bd8110ef08c63626ea13ca11fddad4f2c0a2b67354efdcd50f769b73330af205dcdd054cbd3055bffff7f20010000000500000004ae4be9cd199b09f605119820680eb23462746e98fbc2b0c635643f00b34c3cd8958799d4b8d29f4ab6ae6495047d330a9ea83b377cbb937395c302ea98c72279eaefefbd1f687ef4e861804aed59ef05e743ea85f432cc146f325d759a026ce6e8d187daf94405848c2446bde3689be4ebc93dd103748e388b7c7655660d690e02eb01'</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "verifytxoutproof",
    "params": [ "'</span><span class="nv">$proof</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc verifytxoutproof <span class="nv">$proof</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">verifytxoutproof</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">proof</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"e66c029a755d326f14cc32f485ea43e705ef59ed4a8061e8f47e681fbdefefea"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"0e690d6655767c8b388e7403d13dc9ebe49b68e3bd46248c840544f9da87d1e8"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Checks the proof for transaction inclusion. Returns transaction hash if valid.</p>
<h3 id='params-10'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>proof</td>
<td>Required</td>
<td>Proof of transaction inclusion (raw MerkleBlock).</td>
</tr>
</tbody></table>
<h1 id='rpc-calls-mining'>RPC Calls - Mining</h1>
<p><em>Note: many mining-related RPC calls require <code>bcoin</code> to be started with the flag <code>--coinbase-address</code> designating a comma-separated list of payout addresses, randomly selected during block creation</em></p>
<h2 id='getnetworkhashps'>getnetworkhashps</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">blocks</span><span class="p">,</span> <span class="nx">height</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">blocks</span><span class="o">=</span>120<span class="p">;</span>
<span class="nv">height</span><span class="o">=</span>1000000<span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "getnetworkhashps",
    "params": [ '</span><span class="nv">$blocks</span><span class="s1">', '</span><span class="nv">$height</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc getnetworkhashps <span class="nv">$blocks</span> <span class="nv">$height</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getnetworkhashps</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">blocks</span><span class="p">,</span> <span class="nx">height</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="mf">453742051556.55084</span><span class="w">
</span></code></pre></div>
<p>Returns the estimated current or historical network hashes per second, based on last <code>blocks</code>.</p>
<h3 id='params'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>blocks</td>
<td>120</td>
<td>Number of blocks to lookup.</td>
</tr>
<tr>
<td>2</td>
<td>height</td>
<td>1</td>
<td>Starting height for calculations.</td>
</tr>
</tbody></table>
<h2 id='getmininginfo'>getmininginfo</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "getmininginfo",
    "params": []
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc getmininginfo
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getmininginfo</span><span class="dl">'</span><span class="p">,</span> <span class="p">[]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"blocks"</span><span class="p">:</span><span class="w"> </span><span class="mi">101</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currentblocksize"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currentblockweight"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currentblocktx"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"difficulty"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"errors"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"genproclimit"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"networkhashps"</span><span class="p">:</span><span class="w"> </span><span class="mf">8.766601909687916e-7</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pooledtx"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"testnet"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"chain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"regtest"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"generate"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Returns mining info.</p>

<p><em>Note: currentblocksize, currentblockweight, currentblocktx, difficulty are returned when there&#39;s active work.</em>
<em>generate - is true when <code>bcoin</code> itself is mining.</em></p>
<h3 id='params-2'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>None.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id='getwork'>getwork</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "getwork",
    "params": []
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc getwork
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>
<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getwork</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"200000001072adb70d69fc2b5a6601eeaaa54e31b7c57417028b429a0b98aa374413799c12c94351d52da980c8fa67eaddf6053dee141b14f4e6a3e10bb7db21c0d533b05b05ec88207fffff00000000000000800000000000000000000000000000000000000000000000000000000000000000000000000000000080020000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0000000000000000000000000000000000000000000000000000000000ffff7f"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">102</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Returns hashing work to be solved by miner.
Or submits solved block.</p>
<h3 id='params-3'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>data</td>
<td></td>
<td>Data to be submitted to the network.</td>
</tr>
</tbody></table>
<h2 id='getworklp'>getworklp</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="c"># Because there is a request timeout set on CLI http requests.</span>
<span class="c"># without manually adjusting the timeout (or receiving a new transaction on the current</span>
<span class="c"># network) this call will timeout before the request is complete.</span>
curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "getworklp",
    "params": []
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="c"># Because there is a request timeout set on CLI http requests.</span>
<span class="c"># without manually adjusting the timeout (or receiving a new transaction on the current</span>
<span class="c"># network) this call will timeout before the request is complete.</span>
bcoin-cli rpc getworklp
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// Because there is a request timeout set on CLI http requests.</span>
<span class="c1">// without manually adjusting the timeout (or receiving a new transaction on the current</span>
<span class="c1">// network) this call will timeout before the request is complete.</span>
<span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getworklp</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"200000001072adb70d69fc2b5a6601eeaaa54e31b7c57417028b429a0b98aa374413799c09e651f7a930c198755993bf7348fd807836d1560b6baded56857def309a03855b05ecf1207fffff00000000000000800000000000000000000000000000000000000000000000000000000000000000000000000000000080020000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0000000000000000000000000000000000000000000000000000000000ffff7f"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">102</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Long polling for new work.</p>

<p>Returns new work, whenever new TX is received in the mempool or
new block has been discovered. So miner can restart mining on new data.</p>
<h3 id='params-4'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>None.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id='getblocktemplate'>getblocktemplate</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "getblocktemplate",
    "params": []
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc getblocktemplate
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getblocktemplate</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"capabilities"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"proposal"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"mutable"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"time"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"transactions"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"prevblock"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">536870912</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"vbavailable"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="nl">"vbrequired"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">102</span><span class="p">,</span><span class="w">
  </span><span class="nl">"previousblockhash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4413799c0b98aa37028b429ab7c57417aaa54e315a6601ee0d69fc2b1072adb7"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fffff0000000000000000000000000000000000000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"bits"</span><span class="p">:</span><span class="w"> </span><span class="s2">"207fffff"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"noncerange"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000ffffffff"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"curtime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1527115118</span><span class="p">,</span><span class="w">
  </span><span class="nl">"mintime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1527103506</span><span class="p">,</span><span class="w">
  </span><span class="nl">"maxtime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1527122318</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expires"</span><span class="p">:</span><span class="w"> </span><span class="mi">1527122318</span><span class="p">,</span><span class="w">
  </span><span class="nl">"sigoplimit"</span><span class="p">:</span><span class="w"> </span><span class="mi">20000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"sizelimit"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"longpollid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4413799c0b98aa37028b429ab7c57417aaa54e315a6601ee0d69fc2b1072adb700000003"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"submitold"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"coinbaseaux"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"flags"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6d696e65642062792062636f696e"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"coinbasevalue"</span><span class="p">:</span><span class="w"> </span><span class="mi">5000016600</span><span class="p">,</span><span class="w">
  </span><span class="nl">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01000000017efbcc72a5733c7b9bcb1b763a81480425425bc10a4157e9553f0fd32eda710b000000006a47304402206a04f6c4fa9be51206e3fb9a48c5960198d7b27ce1b7c1915a4535e63ffdc60b022050796a1e0c09f60384379c2a477bedbce548cbaaa0e42183b737115b4ea77c5d0121020987e993a946a058d0969bd296b08783229fd1a0a779d8bfb376ebe30a164e89ffffffff02005a6202000000001976a914fe7e0711287688b33b9a5c239336c4700db34e6388ac4486a327010000001976a914b1a4d7b11dad88f767d0ad894e11b53d766400a888ac00000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7444ea74eaee01ed7c7871f355bb5cb244a4ef2c05ae16ad49b4b06cbf34f539"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7444ea74eaee01ed7c7871f355bb5cb244a4ef2c05ae16ad49b4b06cbf34f539"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"depends"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">4540</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sigops"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">900</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0100000002e8d187daf94405848c2446bde3689be4ebc93dd103748e388b7c7655660d690e000000006b483045022100eeae86adccb31514ca25d3ddf265b21de05230fd6c93db7fbd185c133647fe640220392c3b5ebd50f4f0538c686b88e1d7051a81c2e5dff8c96f2a5c61154fa3c43a0121032cbf9d9b3beb61004d158ae897257fab6ce46efbad6b1e51b4a64e74732c3b4dffffffffeaefefbd1f687ef4e861804aed59ef05e743ea85f432cc146f325d759a026ce6000000006a47304402203e3ca4312bee4c465e6d5fcaee7aae1301d043444fe7a8f20b7df9f555ca1b4f022060104fc66cdb68af8cc674e94bb1900328cda94a8f6580d12ef0ad9810f24a290121032cbf9d9b3beb61004d158ae897257fab6ce46efbad6b1e51b4a64e74732c3b4dffffffff0220a6c901000000001976a914253d160f8a14c9586c9204553b50b279c71d2c8888ac005a6202000000001976a914fe7e0711287688b33b9a5c239336c4700db34e6388ac00000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c0f7dc9540629f6e1623cb25edba1d07cab4dd441b71cd247e629a6d817ed1ad"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c0f7dc9540629f6e1623cb25edba1d07cab4dd441b71cd247e629a6d817ed1ad"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"depends"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">7520</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sigops"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">1492</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0100000001e8d187daf94405848c2446bde3689be4ebc93dd103748e388b7c7655660d690e010000006b483045022100977567f80741451fe1407fbe453e75d371cc38a0de1411efc7df5c8c3c35d8ec02207a5899976628c19a22dae0058f60f86f43b379991bbf93383b17932310e497b001210284a937f256393b3ba686556e90bd000706600bdbee4169abd092f392689307d2ffffffff02005a6202000000001976a914fe7e0711287688b33b9a5c239336c4700db34e6388ac545ead21010000001976a914520b23898b775a4a5dc19d07a88ca4a4a87b92bf88ac00000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fa36691ec5f18a9dc56b1dfce3dff293352ebde8bc1b77489cba4921bc5b0c69"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fa36691ec5f18a9dc56b1dfce3dff293352ebde8bc1b77489cba4921bc5b0c69"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"depends"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">4540</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sigops"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">904</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>returns block template or proposal for use with mining.
Also validates proposal if <code>mode</code> is specified as <code>proposal</code>.</p>

<p><em>Note: This is described in
<a href="https://github.com/bitcoin/bips/blob/master/bip-0022.mediawiki">BIP22 - Fundamentals</a>,
<a href="https://github.com/bitcoin/bips/blob/master/bip-0023.mediawiki">BIP23 - Pooled Mining</a>,
<a href="https://github.com/bitcoin/bips/blob/master/bip-0145.mediawiki">BIP145 - Updates for Segregated Witness</a></em></p>
<h3 id='params-5'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>jsonrequestobject</td>
<td>{}</td>
<td>JSONRequestObject.</td>
</tr>
</tbody></table>
<h2 id='submitblock'>submitblock</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">blockdata</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">blockdata</span><span class="o">=</span><span class="s1">'000000203f6397a1442eb6a9901998c4a4b432f8573c7a490b2d5e6d6f2ad0d0fca25e2c56940d79c8f81f3eb5e998bcf79dbf8c7d3b13b01adaac526cf9df8ee385ec0c1ac0055bffff7f20000000000101000000010000000000000000000000000000000000000000000000000000000000000000ffffffff1f01640e6d696e65642062792062636f696e046c62c046080000000000000000ffffffff0100f2052a010000001976a91473815900ee35f3815b3407af2eeb1b611cf533d788ac00000000'</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "submitblock",
    "params": [ "'</span><span class="nv">$blockdata</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc submitblock <span class="nv">$blockdata</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">submitblock</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">blockdata</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<p>Adds block to chain.</p>
<h3 id='params-6'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>blockdata</td>
<td>Required.</td>
<td>Mined block data (hex)</td>
</tr>
</tbody></table>
<h2 id='verifyblock'>verifyblock</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">blockdata</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">blockdata</span><span class="o">=</span><span class="s1">'000000203f6397a1442eb6a9901998c4a4b432f8573c7a490b2d5e6d6f2ad0d0fca25e2c56940d79c8f81f3eb5e998bcf79dbf8c7d3b13b01adaac526cf9df8ee385ec0c1ac0055bffff7f20000000000101000000010000000000000000000000000000000000000000000000000000000000000000ffffffff1f01640e6d696e65642062792062636f696e046c62c046080000000000000000ffffffff0100f2052a010000001976a91473815900ee35f3815b3407af2eeb1b611cf533d788ac00000000'</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "verifyblock",
    "params": [ "'</span><span class="nv">$blockdata</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc verifyblock <span class="nv">$blockdata</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Block data is old, so it should return error</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">verifyblock</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">blockdata</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<p>Verifies the block data.</p>
<h3 id='params-7'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>blockdata</td>
<td>Required.</td>
<td>Mined block data (hex)</td>
</tr>
</tbody></table>
<h2 id='setgenerate'>setgenerate</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">mining</span><span class="p">,</span> <span class="nx">proclimit</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">mining</span><span class="o">=</span>1<span class="p">;</span>
<span class="nv">proclimit</span><span class="o">=</span>1<span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "setgenerate",
    "params": [ '</span><span class="nv">$mining</span><span class="s1">', '</span><span class="nv">$proclimit</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc setgenerate <span class="nv">$mining</span> <span class="nv">$proclimit</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">setgenerate</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">mining</span><span class="p">,</span> <span class="nx">proclimit</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="kc">true</span><span class="w">
</span></code></pre></div>
<p>Will start the mining on CPU.</p>
<h3 id='params-8'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>mining</td>
<td>0</td>
<td><code>true</code> will start mining, <code>false</code> will stop.</td>
</tr>
<tr>
<td>2</td>
<td>proclimit</td>
<td>0</td>
<td></td>
</tr>
</tbody></table>
<h2 id='getgenerate'>getgenerate</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "getgenerate",
    "params": []
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc getgenerate
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getgenerate</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="kc">true</span><span class="w">
</span></code></pre></div>
<p>Returns status of mining on Node.</p>
<h3 id='params-9'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
</tbody></table>

<p>None.</p>
<h2 id='generate'>generate</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">numblocks</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">numblocks</span><span class="o">=</span>2<span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "generate",
    "params": [ '</span><span class="nv">$numblocks</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc generate <span class="nv">$numblocks</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Timeout error</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">generate</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">numblocks</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"11c5504f63aebe71b3e6f46a31f83dd24e65e392a11e905f6acdb7346c8b18c0"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"64455db5aa23d6277027aea1851d85da8ee07958ed7caee2ca630b065f4faaa8"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Mines <code>numblocks</code> number of blocks. Will return once all blocks are mined. CLI command may
timeout before that happens.</p>
<h3 id='params-10'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>numblocks</td>
<td>1</td>
<td>Number of blocks to mine.</td>
</tr>
<tr>
<td>2</td>
<td>maxtries</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id='generatetoaddress'>generatetoaddress</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">numblocks</span><span class="p">,</span> <span class="nx">address</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">numblocks</span><span class="o">=</span>2<span class="p">;</span>
<span class="nv">address</span><span class="o">=</span><span class="s1">'mhX1xHbKGzw3r8FoN5bUkmRixHPEDNywxh'</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="c"># Will return once all blocks are mined.</span>
curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "generatetoaddress",
    "params": [ '</span><span class="nv">$numblocks</span><span class="s1">', "'</span><span class="nv">$address</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc generatetoaddress <span class="nv">$numblocks</span> <span class="nv">$address</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Timeout error</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">generatetoaddress</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">numblocks</span><span class="p">,</span> <span class="nx">address</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"65e54939c20f61e54173596eb72a7b00b96baac0c58d2cb30d1fad64d1b51dbb"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"3959ee3f58bb1ac05af9bebb51ebf7872bcd4231fa41c384bcfef468541b5166"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Mines <code>blocknumber</code> blocks, with <code>address</code> as coinbase.</p>
<h3 id='params-11'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>numblocks</td>
<td>1</td>
<td>Number of blocks to mine.</td>
</tr>
<tr>
<td>2</td>
<td>address</td>
<td></td>
<td>Coinbase address for new blocks.</td>
</tr>
</tbody></table>
<h1 id='rpc-calls-network'>RPC Calls - Network</h1><h2 id='getconnectioncount'>getconnectioncount</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "getconnectioncount",
    "params": []
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc getconnectioncount
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getconnectioncount</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="mi">8</span><span class="w">
</span></code></pre></div>
<p>Returns connection count.</p>
<h3 id='params'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>None.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id='ping'>ping</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "ping",
    "params": []
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc ping
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="kc">null</span><span class="w">
</span></code></pre></div>
<p>Will send ping request to every connected peer.</p>
<h3 id='params-2'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>None.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id='getpeerinfo'>getpeerinfo</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "getpeerinfo",
    "params": []
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc getpeerinfo
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getpeerinfo</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
    </span><span class="nl">"addr"</span><span class="p">:</span><span class="w"> </span><span class="s2">"67.210.228.203:8333"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"addrlocal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.200.50.10:52342"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"services"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0000000d"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"relaytxes"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lastsend"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571762943</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lastrecv"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571762941</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bytessent"</span><span class="p">:</span><span class="w"> </span><span class="mi">299812</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bytesrecv"</span><span class="p">:</span><span class="w"> </span><span class="mi">1149318</span><span class="p">,</span><span class="w">
    </span><span class="nl">"conntime"</span><span class="p">:</span><span class="w"> </span><span class="mi">2534</span><span class="p">,</span><span class="w">
    </span><span class="nl">"timeoffset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pingtime"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.054</span><span class="p">,</span><span class="w">
    </span><span class="nl">"minping"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.051</span><span class="p">,</span><span class="w">
    </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">70015</span><span class="p">,</span><span class="w">
    </span><span class="nl">"subver"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/Satoshi:0.14.2/"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"inbound"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"startingheight"</span><span class="p">:</span><span class="w"> </span><span class="mi">600551</span><span class="p">,</span><span class="w">
    </span><span class="nl">"besthash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0000000000000000000425601a59d69922cdce6bad287950004d8308428b0748"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bestheight"</span><span class="p">:</span><span class="w"> </span><span class="mi">600558</span><span class="p">,</span><span class="w">
    </span><span class="nl">"banscore"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"inflight"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"whitelisted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Returns information about all connected peers.</p>
<h3 id='params-3'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>None.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id='addnode'>addnode</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">nodeAddr</span><span class="p">,</span> <span class="nx">cmd</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">nodeAddr</span><span class="o">=</span><span class="s1">'127.0.0.1:48444'</span><span class="p">;</span>
<span class="nv">cmd</span><span class="o">=</span><span class="s1">'add'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "addnode",
    "params": [ "'</span><span class="nv">$nodeAddr</span><span class="s1">'", "'</span><span class="nv">$cmd</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc addnode <span class="nv">$nodeAddr</span> <span class="nv">$cmd</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">addnode</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">nodeAddr</span><span class="p">,</span> <span class="nx">cmd</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="kc">null</span><span class="w">
</span></code></pre></div>
<p>Adds or removes peers in Host List. </p>
<h3 id='params-4'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>addr</td>
<td>Required</td>
<td>IP Address of the Node.</td>
</tr>
<tr>
<td>2</td>
<td>cmd</td>
<td>Required</td>
<td>Command</td>
</tr>
</tbody></table>
<h3 id='commands'>Commands</h3>
<table><thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>add</td>
<td>Adds node to Host List and connects to it</td>
</tr>
<tr>
<td>onetry</td>
<td>Tries to connect to the given node</td>
</tr>
<tr>
<td>remove</td>
<td>Removes node from host list</td>
</tr>
</tbody></table>
<h2 id='disconnectnode'>disconnectnode</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">nodeAddr</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">nodeAddr</span><span class="o">=</span><span class="s1">'127.0.0.1:48444'</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "disconnectnode",
    "params": [ "'</span><span class="nv">$nodeAddr</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc disconnectnode <span class="nv">$nodeAddr</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">disconnectnode</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">nodeAddr</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="kc">null</span><span class="w">
</span></code></pre></div>
<p>Disconnects node.</p>
<h3 id='params-5'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>addr</td>
<td>Required</td>
<td>IP Address of the Node.</td>
</tr>
</tbody></table>
<h2 id='getaddednodeinfo'>getaddednodeinfo</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">nodeAddr</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">nodeAddr</span><span class="o">=</span><span class="s1">'127.0.0.1:48444'</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "getaddednodeinfo",
    "params": [ "'</span><span class="nv">$nodeAddr</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc getaddednodeinfo <span class="nv">$nodeAddr</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getaddednodeinfo</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">nodeAddr</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"addednode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1:48444"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"connected"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"addresses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1:48444"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"connected"</span><span class="p">:</span><span class="w"> </span><span class="s2">"outbound"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Returns node information from host list.</p>
<h3 id='params-6'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>addr</td>
<td>Required</td>
<td>IP Address of the Node.</td>
</tr>
</tbody></table>
<h2 id='getnettotals'>getnettotals</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "getnettotals",
    "params": []
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc getnettotals
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getnettotals</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"totalbytesrecv"</span><span class="p">:</span><span class="w"> </span><span class="mi">42175</span><span class="p">,</span><span class="w">
  </span><span class="nl">"totalbytessent"</span><span class="p">:</span><span class="w"> </span><span class="mi">42175</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timemillis"</span><span class="p">:</span><span class="w"> </span><span class="mi">1527116369308</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Returns information about used network resources.</p>
<h3 id='params-7'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>None.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id='getnetworkinfo'>getnetworkinfo</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "getnetworkinfo",
    "params": []
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc getnetworkinfo
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getnetworkinfo</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0.0-dev"</span><span class="err">,</span><span class="w">
  </span><span class="nl">"subversion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/bcoin:2.0.0-dev/"</span><span class="err">,</span><span class="w">
  </span><span class="nl">"protocolversion"</span><span class="p">:</span><span class="w"> </span><span class="mi">70015</span><span class="err">,</span><span class="w">
  </span><span class="nl">"localservices"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000009"</span><span class="err">,</span><span class="w">
  </span><span class="nl">"localservicenames"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"NETWORK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"WITNESS"</span><span class="w">
  </span><span class="p">]</span><span class="err">,</span><span class="w">
  </span><span class="nl">"localrelay"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="err">,</span><span class="w">
  </span><span class="nl">"timeoffset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="err">,</span><span class="w">
  </span><span class="nl">"networkactive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="err">,</span><span class="w">
  </span><span class="nl">"connections"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="err">,</span><span class="w">
  </span><span class="nl">"networks"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="err">,</span><span class="w">
  </span><span class="nl">"relayfee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00001</span><span class="err">,</span><span class="w">
  </span><span class="nl">"incrementalfee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="err">,</span><span class="w">
  </span><span class="nl">"localaddresses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"200.100.50.10"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">8333</span><span class="p">,</span><span class="w">
      </span><span class="nl">"score"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="err">,</span><span class="w">
  </span><span class="nl">"warnings"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Returns local node&#39;s network information</p>
<h3 id='params-8'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>None.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id='setban'>setban</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">nodeAddr</span><span class="p">,</span> <span class="nx">cmd</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">nodeAddr</span><span class="o">=</span><span class="s1">'127.0.0.1:48444'</span><span class="p">;</span>
<span class="nv">cmd</span><span class="o">=</span><span class="s1">'add'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "setban",
    "params": [ "'</span><span class="nv">$nodeAddr</span><span class="s1">'", "'</span><span class="nv">$cmd</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc setban <span class="nv">$nodeAddr</span> <span class="nv">$cmd</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">setban</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="nx">nodeAddr</span><span class="p">,</span> <span class="nx">cmd</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="kc">null</span><span class="w">
</span></code></pre></div>
<p>Adds or removes nodes from banlist.</p>
<h3 id='params-9'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>addr</td>
<td>Required</td>
<td>IP Address of the Node.</td>
</tr>
<tr>
<td>2</td>
<td>cmd</td>
<td>Required</td>
<td>Command</td>
</tr>
</tbody></table>
<h3 id='commands-2'>Commands</h3>
<table><thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>add</td>
<td>Adds node to ban list, removes from host list, disconnects.</td>
</tr>
<tr>
<td>remove</td>
<td>Removes node from ban list</td>
</tr>
</tbody></table>
<h2 id='listbanned'>listbanned</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "listbanned",
    "params": []
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc listbanned
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">listbanned</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"banned_until"</span><span class="p">:</span><span class="w"> </span><span class="mi">1527202858</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ban_created"</span><span class="p">:</span><span class="w"> </span><span class="mi">1527116458</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ban_reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Lists all banned peers.</p>
<h3 id='params-10'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>None.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id='clearbanned'>clearbanned</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$url</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "clearbanned",
    "params": []
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bcoin-cli rpc clearbanned
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">clientOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">clearbanned</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="kc">null</span><span class="w">
</span></code></pre></div>
<p>Removes all banned peers.</p>
<h3 id='params-11'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>None.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h1 id='wallet'>Wallet</h1><h2 id='the-wallet-client'>The Wallet Client</h2><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>npm i <span class="nt">-g</span> bclient
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">id</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">primary</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// or whatever your wallet name is</span>

<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
</code></pre></div>
<p>The best way to interact with the wallet API is with bwallet-cli in the <code>bclient</code>
<a href="https://www.npmjs.com/package/bclient">package</a>. Installing globally with
<code>npm i -g bclient</code> gives you access to the CLI. You can also install locally
to your project.</p>

<p>Note that when using it in your own program, you will need to explicitly
pass in a port option. The easiest way to do this is with <code>bcoin.Network</code>.</p>

<p>You can create a client for a specific wallet (and be compatible with the old
API) with the <code>wallet</code> method on <code>WalletClient</code> class.</p>

<p>The wallet HTTP server listens on it&#39;s own port, separate from the node&#39;s server.
By default the wallet server listens on these <code>localhost</code> ports:</p>

<table><thead>
<tr>
<th>Network</th>
<th>API Port</th>
</tr>
</thead><tbody>
<tr>
<td>main</td>
<td>8334</td>
</tr>
<tr>
<td>testnet</td>
<td>18334</td>
</tr>
<tr>
<td>regtest</td>
<td>48334</td>
</tr>
<tr>
<td>simnet</td>
<td>18558</td>
</tr>
</tbody></table>
<h2 id='configuration'>Configuration</h2>
<p>Persistent configuration can be added to <code>wallet.conf</code> in your <code>prefix</code> directory.
This could be the same directory as <code>bcoin.conf</code> for the node server, <a href="https://github.com/bcoin-org/bcoin/blob/master/docs/configuration.md">but could also
be in a network-specific directory.</a></p>

<blockquote>
<p>Example Configuration:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell--vars"><code>network: regtest
wallet-auth: <span class="nb">true
</span>api-key: api-key
http-host: 0.0.0.0
</code></pre></div>
<aside class="notice">
It is highly recommended to always use <code>wallet-auth</code> and to set a unique <code>api-key</code>,
even for local development or local wallets. Without <code>wallet-auth: true</code> other applications
on your system could theoretically access your wallet through the HTTP server
without any authentication barriers. <code>wallet-auth: true</code> requires a wallet's token to be submitted with every request.
</aside>
<h2 id='wallet-authentication'>Wallet Authentication</h2>
<blockquote>
<p>The following samples return a wallet object using a wallet token</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">token</span><span class="p">,</span> <span class="nx">id</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s1">'primary'</span>
<span class="nv">token</span><span class="o">=</span><span class="s1">'17715756779e4a5f7c9b26c48d90a09d276752625430b41b5fcf33cf41aa7615'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>?token<span class="o">=</span><span class="nv">$token</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli get <span class="nt">--token</span><span class="o">=</span><span class="nv">$token</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">token</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">getInfo</span><span class="p">();</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<p>There are three levels of authentication for the bcoin wallet API server:</p>
<h3 id='1-api-key'>1. API Key</h3>
<p>The API key is set either in <code>wallet.conf</code> or with the argument <code>--api-key=</code> at launch.
When set, the API key is required (using <a href="https://en.wikipedia.org/wiki/Basic_access_authentication">HTTP Basic Authorization</a>)
to access ALL endpoints, otherwise a <code>401 Unauthorized</code> error is returned.
See the section on <a href="#authentication">node API server authentication</a> for tips on creating a strong key.</p>
<h3 id='2-wallet-tokens'>2. Wallet tokens</h3>
<p>Every individual wallet has its own security token, which is a 32 byte hash calculated from the wallet master key:</p>

<p><code>SHA256(m/44&#39; Private Key | tokenDepth)</code></p>

<p>A wallet is always created with a corresponding token. Even watch-only wallets will have a master private key,
used just for this purpose. The token is returned when a wallet is created, or from the <a href="#get-wallet-info">wallet info</a>
API endpoint (which is restricted to <code>admin</code> access, see next subsection). When <code>wallet-auth</code> is set to <code>true</code>,
the token must be sent in the query string or JSON body for any requests regarding that wallet.
Requests with incorrect tokens are rejected with a <code>403 Forbidden</code> error.</p>
<h3 id='3-wallet-admin-token'>3. Wallet admin token</h3>
<p>The admin token is set by the user in <code>wallet.conf</code>, with the launch argument <code>bcoin --wallet-admin-token=</code>
or, if running <code>bwallet</code> as a separate server, just <code>bwallet --admin-token=</code>.
It is required to be a 32 byte hex string. Like the individual wallet tokens, it is only required when
<code>wallet-auth: true</code>, and must be included in the query string or JSON body. Requests sent with an
admin token automatically overrides individual wallet tokens, and can therefore access all wallets.</p>

<p>The admin token also enables access to extra API endpoints outlined in <a href="#wallet-admin-commands">Wallet Admin Commands</a>.</p>

<aside class="warning">
The examples in this section demonstrate how to use a wallet token for API access, which is recommended. However, for clarity, further examples in these docs will omit the token requirement.
</aside>
<h2 id='the-walletdb-and-object'>The WalletDB and Object</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s2">"primary"</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl http://x:api-key@127.0.0.1:48334/wallet <span class="c"># will list regtest (default port 48334) wallets</span>

<span class="c"># examples in these docs will use an environment variable:</span>
<span class="nv">walleturl</span><span class="o">=</span>http://x:api-key@127.0.0.1:48334/wallet/
curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="c"># Like the node client, you can configure it by passing arguments:</span>
bwallet-cli <span class="nt">--network</span><span class="o">=</span>regtest <span class="nt">--id</span><span class="o">=</span><span class="nv">$id</span> get

<span class="c"># ...or you can use environment variables. The default `id` is `primary`:</span>
<span class="nb">export </span><span class="nv">BCOIN_API_KEY</span><span class="o">=</span>yoursecret
<span class="nb">export </span><span class="nv">BCOIN_NETWORK</span><span class="o">=</span>regtest
bwallet-cli get
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">getInfo</span><span class="p">();</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The wallet object will look something like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"network"</span><span class="p">:</span><span class="w"> </span><span class="s2">"regtest"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"wid"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"primary"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"watchOnly"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountDepth"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"17715756779e4a5f7c9b26c48d90a09d276752625430b41b5fcf33cf41aa7615"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tokenDepth"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"master"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"encrypted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"tx"</span><span class="p">:</span><span class="w"> </span><span class="mi">5473</span><span class="p">,</span><span class="w">
    </span><span class="nl">"coin"</span><span class="p">:</span><span class="w"> </span><span class="mi">5472</span><span class="p">,</span><span class="w">
    </span><span class="nl">"unconfirmed"</span><span class="p">:</span><span class="w"> </span><span class="mi">1504999981750</span><span class="p">,</span><span class="w">
    </span><span class="nl">"confirmed"</span><span class="p">:</span><span class="w"> </span><span class="mi">1494999998350</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>bcoin maintains a wallet database which contains every wallet. Wallets are not usable without also using a wallet database. For testing, the wallet database can be in-memory, but it must be there. Wallets are uniquely identified by an id and the walletdb is created with a default id of <code>primary</code>. (See <a href="#create-a-wallet">Create a Wallet</a> below for more details.)</p>

<p>Wallets in bcoin use bip44. They also originally supported bip45 for multisig, but support was removed to reduce code complexity, and also because bip45 doesn&#39;t seem to add any benefit in practice.</p>

<p>The wallet database can contain many different wallets, with many different accounts, with many different addresses for each account. bcoin should theoretically be able to scale to hundreds of thousands of wallets/accounts/addresses.</p>

<p>Each account can be of a different type. You could have a pubkeyhash account, as well as a multisig account, a witness pubkeyhash account, etc.</p>

<p>Note that accounts should not be accessed directly from the public API. They do not have locks which can lead to race conditions during writes.</p>
<h3 id='wallet-object-vs-wallet-client-object'>wallet object vs wallet client object</h3>
<p>bclient returns a WalletClient object that can perform <a href="#wallet-admin-commands">admin functions</a> without specifying a wallet, and may be useful when managing multiple wallets. WalletClient can also return a wallet object specified by an <code>id</code>. This object performs functions (and may be authorized by a token) specific to that wallet only.</p>

<aside class="warning">
Accounts within the same wallet are all related by deterministic hierarchy. However, wallets are not related to each other in any way. This means that when a wallet seed is backed up, all of its accounts (and their keys) can be derived from that backup. However, each newly created wallet must be backed up separately.
</aside>
<h2 id='create-a-wallet'>Create A Wallet</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">passphrase</span><span class="p">,</span> <span class="nx">witness</span><span class="p">,</span> <span class="nx">watchOnly</span><span class="p">,</span> <span class="nx">accountKey</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s1">'newWallet'</span>
<span class="nv">passphrase</span><span class="o">=</span><span class="s1">'secret456'</span>
<span class="nv">witness</span><span class="o">=</span><span class="nb">false
</span><span class="nv">watchOnly</span><span class="o">=</span><span class="nb">true
</span><span class="nv">accountKey</span><span class="o">=</span><span class="s1">'tpubDDF921KoqbemP3yPiBMBzvkDY5pe4KpirJtXtSaTdRkZ3LyqorrHy1mv1XLNqrmTQQXztdTQiZxDtPxGZ9Lmiqtv8wJYJs5o52J54djLpqC'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span> <span class="se">\</span>
  <span class="nt">-X</span> PUT <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"witness":'</span><span class="nv">$witness</span><span class="s1">', "passphrase":"'</span><span class="nv">$passphrase</span><span class="s1">'", "watchOnly": '</span><span class="nv">$watchOnly</span><span class="s1">', "accountKey":"'</span><span class="nv">$accountKey</span><span class="s1">'"}'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="c"># watch-only defaults to true if --account-key flag is set</span>

bwallet-cli mkwallet <span class="nv">$id</span> <span class="nt">--witness</span><span class="o">=</span><span class="nv">$witness</span> <span class="nt">--passphrase</span><span class="o">=</span><span class="nv">$passphrase</span> <span class="nt">--watch-only</span><span class="o">=</span><span class="nv">$watchOnly</span> <span class="nt">--account-key</span><span class="o">=</span><span class="nv">$accountKey</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">passphrase</span><span class="p">:</span> <span class="nx">passphrase</span><span class="p">,</span>
  <span class="na">witness</span><span class="p">:</span> <span class="nx">witness</span><span class="p">,</span>
  <span class="na">watchOnly</span><span class="p">:</span> <span class="nx">watchOnly</span><span class="p">,</span>
  <span class="na">accountKey</span><span class="p">:</span> <span class="nx">accountKey</span>
<span class="p">};</span>

<span class="p">(</span><span class="k">async</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">createWallet</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"network"</span><span class="p">:</span><span class="w"> </span><span class="s2">"regtest"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"wid"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"newWallet"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"watchOnly"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountDepth"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"489d43e398dad34e69653e5edb5cb39b6d55be3364753c07d084d4b3d0292af7"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tokenDepth"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"master"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"encrypted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"until"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571763677</span><span class="p">,</span><span class="w">
    </span><span class="nl">"iv"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4e24f2a5908e20da0b8ba3e88dcda272"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"algorithm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pbkdf2"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"n"</span><span class="p">:</span><span class="w"> </span><span class="mi">50000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"r"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"p"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"tx"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"coin"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"unconfirmed"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"confirmed"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Create a new wallet with a specified ID.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>PUT /wallet/:id</code></p>
<h3 id='parameters'>Parameters:</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td></td>
<td>Wallet ID (used for storage)</td>
</tr>
<tr>
<td>master</td>
<td>HDPrivateKey</td>
<td></td>
<td>Master HD key. If not present, it will be generated</td>
</tr>
<tr>
<td>witness</td>
<td>Boolean</td>
<td><code>true</code></td>
<td>Whether to use witness programs</td>
</tr>
<tr>
<td>watchOnly</td>
<td>Boolean</td>
<td><code>false</code></td>
<td>(<code>watch-only</code> for CLI)</td>
</tr>
<tr>
<td>accountKey</td>
<td>String</td>
<td></td>
<td>The extended public key for the primary account in the new wallet. This value is ignored if <code>watchOnly</code> is <code>false</code> <br>(<code>account-key</code> for CLI)</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td></td>
<td>Type of wallet (pubkeyhash (default), multisig)</td>
</tr>
<tr>
<td>m</td>
<td>Number</td>
<td><code>1</code></td>
<td>m value for multisig (<code>m-of-n</code>)</td>
</tr>
<tr>
<td>n</td>
<td>Number</td>
<td><code>1</code></td>
<td>n value for multisig (<code>m-of-n</code>)</td>
</tr>
<tr>
<td>mnemonic</td>
<td>String</td>
<td></td>
<td>A mnemonic phrase to use to instantiate an hd private key. One will be generated if none provided</td>
</tr>
<tr>
<td>passphrase</td>
<td>String</td>
<td></td>
<td>A strong passphrase used to encrypt the wallet</td>
</tr>
<tr>
<td>accountDepth*</td>
<td>Number</td>
<td><code>0</code></td>
<td>The index of the <em>next</em> <a href="https://github.com/bitcoin/bips/blob/master/bip-0044.mediawiki#Account">BIP44 account index</a></td>
</tr>
<tr>
<td>compressed*</td>
<td>Boolean</td>
<td><code>true</code></td>
<td>Whether to use compressed public keys</td>
</tr>
</tbody></table>

<p><em>(*) options are only available in Javascript usage, not CLI or curl</em></p>
<h2 id='reset-authentication-token'>Reset Authentication Token</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s1">'primary'</span>
<span class="nv">passphrase</span><span class="o">=</span><span class="s1">'secret123'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli retoken <span class="nt">--id</span><span class="o">=</span><span class="nv">$id</span> <span class="nt">--passphrase</span><span class="o">=</span><span class="nv">$passphrase</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/retoken <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"passphrase":"'</span><span class="nv">$passphrase</span><span class="s1">'"}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">retoken</span><span class="p">(</span><span class="nx">passphrase</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2d04e217877f15ba920d02c24c6c18f4d39df92f3ae851bec37f0ade063244b2"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Derive a new wallet token, required for access of this particular wallet.</p>

<aside class="warning">
Note: if you happen to lose the returned token, you will not be able to access the wallet (as long as <nobr><code>wallet-auth: true</code></nobr> is still set, as recommended, in <code>wallet.conf</code>
</aside>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>POST /wallet/:id/retoken</code></p>
<h2 id='get-wallet-info'>Get Wallet Info</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s1">'primary'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli get <span class="nt">--id</span><span class="o">=</span><span class="nv">$id</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">getInfo</span><span class="p">();</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample output</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"network"</span><span class="p">:</span><span class="w"> </span><span class="s2">"regtest"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"wid"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"primary"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"watchOnly"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountDepth"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4d9e2a62f67929340b8c600bef0c965370f29cc64afcdeb7aea9cb52906c1d27"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tokenDepth"</span><span class="p">:</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="w">
  </span><span class="nl">"master"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"encrypted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"until"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"iv"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e33424f46674d4010fb0715bb69abc98"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"algorithm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pbkdf2"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"n"</span><span class="p">:</span><span class="w"> </span><span class="mi">50000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"r"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"p"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"tx"</span><span class="p">:</span><span class="w"> </span><span class="mi">5473</span><span class="p">,</span><span class="w">
    </span><span class="nl">"coin"</span><span class="p">:</span><span class="w"> </span><span class="mi">5472</span><span class="p">,</span><span class="w">
    </span><span class="nl">"unconfirmed"</span><span class="p">:</span><span class="w"> </span><span class="mi">1504999981750</span><span class="p">,</span><span class="w">
    </span><span class="nl">"confirmed"</span><span class="p">:</span><span class="w"> </span><span class="mi">1494999998350</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get wallet info by ID. If no id is passed in the CLI it assumes an id of <code>primary</code>.</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>GET /wallet/:id</code></p>

<table><thead>
<tr>
<th>Parameters</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id <br> <em>string</em></td>
<td>named id of the wallet whose info you would like to retrieve</td>
</tr>
</tbody></table>

<aside class="notice">
The <code>balance</code> value returned by this API call is a bit confusing. <code>confirmed</code> refers to the total value of all transactions confirmed
on the blockchain. <code>unconfirmed</code> includes all those same confirmed transactions as well as any transactions still in the mempool.
So the <code>unconfirmed</code> value isn't just the value of pending transactions, it's what the total balance of the wallet WILL BE 
once all pending transactions are confirmed.
</aside>
<h2 id='get-master-hd-key'>Get Master HD Key</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s1">'primary'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/master
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli master <span class="nt">--id</span><span class="o">=</span><span class="nv">$id</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">getMaster</span><span class="p">();</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample responses:</p>

<p>BEFORE passphrase is set:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"encrypted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"xprivkey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tprv8ZgxMBicQKsPfNKy1Wf9EV1cTmz1Cmm6MVrvYdgcR6Hf8sEDUAzhnnoiVbw5jejp4EZWXynQEJhB62oSfANpHRAJqfiZarh1gVMowcJZ2Mn"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"mnemonic"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"bits"</span><span class="p">:</span><span class="w"> </span><span class="mi">128</span><span class="p">,</span><span class="w">
    </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"english"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"entropy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e35833c318d677945ec21efff032bb64"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"phrase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"today screen valid coyote guess sketch kitchen duck zoo light put siege"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>AFTER passphrase is set:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"encrypted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"until"</span><span class="p">:</span><span class="w"> </span><span class="mi">1527121890</span><span class="p">,</span><span class="w">
  </span><span class="nl">"iv"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e33424f46674d4010fb0715bb69abc98"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ciphertext"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c2bd62d659bc92212de5d9e939d9dc735bd0212d888b1b04a71d319e82e5ddb18008e383130fd0409113264d1cbc0db42d997ccf99510b168c80e2f39f2983382457f031d5aa5ec7a2d61f4fc92c62117e4eed59afa4a17d7cb0aae3ec5fa0d4"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"algorithm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pbkdf2"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"n"</span><span class="p">:</span><span class="w"> </span><span class="mi">50000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"r"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"p"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get wallet master HD key. This is normally censored in the wallet info route. The provided API key must have admin access.
<aside class="warning">
Once a passphrase has been set for a wallet, the API will not reveal the unencrypted master private key or seed phrase. Be sure you back it up right away!
</aside></p>
<h3 id='http-request-4'>HTTP Request</h3>
<p><code>GET /wallet/:id/master</code></p>

<table><thead>
<tr>
<th>Parameters</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id <br> <em>string</em></td>
<td>named id of the wallet whose info you would like to retrieve</td>
</tr>
</tbody></table>
<h2 id='change-passphrase'>Change Passphrase</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">oldPass</span><span class="p">,</span> <span class="nx">newPass</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s1">'newWallet'</span>
<span class="nv">oldPass</span><span class="o">=</span><span class="s1">'secret456'</span>
<span class="nv">newPass</span><span class="o">=</span><span class="s1">'789secret'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="o">&gt;</span> No cli <span class="nb">command </span>available
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/passphrase <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"old":"'</span><span class="nv">$oldPass</span><span class="s1">'", "passphrase":"'</span><span class="nv">$newPass</span><span class="s1">'"}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">setPassphrase</span><span class="p">(</span><span class="nx">newPass</span><span class="p">,</span> <span class="nx">oldPass</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Change wallet passphrase. Encrypt if unencrypted.</p>
<h3 id='http-request-5'>HTTP Request</h3>
<p><code>POST /wallet/:id/passphrase</code></p>
<h3 id='body-parameters'>Body Parameters</h3>
<table><thead>
<tr>
<th>Paramters</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>old <br> <em>string</em></td>
<td>Old passphrase. Pass in empty string if none</td>
</tr>
<tr>
<td>new <br> <em>string</em></td>
<td>New passphrase</td>
</tr>
</tbody></table>

<aside class="notice">
If you have never set a passphrase for this wallet before, you need to omit the <code>old</code> argument and just send a new <nobr><code>passphrase</code></nobr>
</aside>
<h2 id='send-a-transaction'>Send a transaction</h2><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="nb">id</span><span class="o">=</span><span class="s2">"primary"</span>
<span class="nv">passphrase</span><span class="o">=</span><span class="s2">"secret123"</span>
<span class="nv">rate</span><span class="o">=</span>0.00001000
<span class="nv">value</span><span class="o">=</span>0.00020000
<span class="nv">address</span><span class="o">=</span><span class="s2">"mo2L7KZgmH2QNs9QCBAFwQPqBJNSXNhQWV"</span>

bwallet-cli send <span class="nt">--id</span><span class="o">=</span><span class="nv">$id</span> <span class="nt">--value</span><span class="o">=</span><span class="nv">$value</span> <span class="nt">--address</span><span class="o">=</span><span class="nv">$address</span> <span class="nt">---passphrase</span><span class="o">=</span><span class="nv">$passphrase</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="nb">id</span><span class="o">=</span><span class="s2">"primary"</span>
<span class="nv">passphrase</span><span class="o">=</span><span class="s2">"secret123"</span>
<span class="nv">rate</span><span class="o">=</span>1000
<span class="nv">value</span><span class="o">=</span>20000
<span class="nv">address</span><span class="o">=</span><span class="s2">"mo2L7KZgmH2QNs9QCBAFwQPqBJNSXNhQWV"</span>

curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/send <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "passphrase":"'</span><span class="nv">$passphrase</span><span class="s1">'",
    "rate":'</span><span class="nv">$rate</span><span class="s1">',
    "outputs":[
      {"address":"'</span><span class="nv">$address</span><span class="s1">'", "value":'</span><span class="nv">$value</span><span class="s1">'}
    ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">passphrase</span><span class="p">,</span> <span class="nx">rate</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">address</span><span class="p">;</span>
<span class="nx">id</span><span class="o">=</span><span class="dl">"</span><span class="s2">primary</span><span class="dl">"</span>
<span class="nx">passphrase</span><span class="o">=</span><span class="dl">"</span><span class="s2">secret123</span><span class="dl">"</span>
<span class="nx">rate</span><span class="o">=</span><span class="mi">1000</span>
<span class="nx">value</span><span class="o">=</span><span class="mi">20000</span>
<span class="nx">address</span><span class="o">=</span><span class="dl">"</span><span class="s2">mo2L7KZgmH2QNs9QCBAFwQPqBJNSXNhQWV</span><span class="dl">"</span>

<span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">passphrase</span><span class="p">:</span> <span class="nx">passphrase</span><span class="p">,</span>
  <span class="na">rate</span><span class="p">:</span> <span class="nx">rate</span><span class="p">,</span>
  <span class="na">outputs</span><span class="p">:</span> <span class="p">[{</span> <span class="na">value</span><span class="p">:</span> <span class="nx">value</span><span class="p">,</span> <span class="na">address</span><span class="p">:</span> <span class="nx">address</span> <span class="p">}]</span>
<span class="p">};</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4d44a0285e4e5ae782fc9dee32d2a7b60ec63009a731d72e51374910582f517c"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"block"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"mtime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571764348</span><span class="p">,</span><span class="w">
  </span><span class="nl">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1970-01-01T00:00:00Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"mdate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-22T17:12:28Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">225</span><span class="p">,</span><span class="w">
  </span><span class="nl">"virtualSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">225</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">4540</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">20177</span><span class="p">,</span><span class="w">
  </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"inputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">2500000000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mhX1xHbKGzw3r8FoN5bUkmRixHPEDNywxh"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"change"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"derivation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m/0'/0/1"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"outputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">20000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mo2L7KZgmH2QNs9QCBAFwQPqBJNSXNhQWV"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"change"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"derivation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m/0'/1/0"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">2499975460</span><span class="p">,</span><span class="w">
      </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mhpSYq8bnM5XJVbpafdLNUtLZefr2d6xSq"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"change"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"derivation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m/0'/1/1"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"tx"</span><span class="p">:</span><span class="w"> </span><span class="s2">"010000000195c60f9cdf95961f696a83bac71adcab286b4a269bb5bdae71ca95d634fab681000000006a473044022068d00d638a3b4d4d54c76167fff1bad023f34375d3bb05a7cb0c051ac63133ed0220182eba4cd68d27c43c071d6690a60c8b13f4c775fec145a736f6f58781fa2d5a01210336c99e45e00b73c863497a989fe6feb08439ca2d7cf98f55bc261ed70ed28a7bffffffff02204e0000000000001976a91452572750e3cf71b97a58dd084f34c3b7027ec75288ac24990295000000001976a914193ee8a7e5d7d5c299785dea90802bc1906a893788ac00000000"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Create, sign, and send a transaction.</p>

<aside class="warning">Be careful how you enter values and fee rates!<br>
<code>value</code> and <code>rate</code> are expressed in satoshis when using cURL or Javascript<br>
<code>value</code> and <code>rate</code> are expressed in WHOLE BITCOINS when using CLI<br>
Watch carefully how values are entered in the examples, all examples send the same amount when executed
</aside>
<h3 id='http-request-6'>HTTP Request</h3>
<p><code>POST /wallet/:id/send</code></p>
<h3 id='post-parameters'>Post Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>outputs <br> <em>array</em></td>
<td>An array of outputs to send for the transaction</td>
</tr>
<tr>
<td>account <br> <em>string</em></td>
<td>account to use for transaction</td>
</tr>
<tr>
<td>passphrase <br> <em>string</em></td>
<td>passphrase to unlock the account</td>
</tr>
<tr>
<td>smart <br> <em>bool</em></td>
<td>whether or not to choose smart coins, will also used unconfirmed transactions</td>
</tr>
<tr>
<td>blocks <br> <em>int</em></td>
<td>number of blocks to use for fee estimation.</td>
</tr>
<tr>
<td>rate <br> <em>int</em></td>
<td>the rate for transaction fees. Denominated in satoshis per kb</td>
</tr>
<tr>
<td>sort <br> <em>bool</em></td>
<td>Sort outputs and inputs according BIP69</td>
</tr>
<tr>
<td>maxFee <br> <em>int</em></td>
<td>maximum fee you&#39;re willing to pay</td>
</tr>
<tr>
<td>subtractFee <br> <em>bool</em></td>
<td>whether to subtract fee from outputs (evenly)</td>
</tr>
<tr>
<td>subtractIndex <br> <em>int</em></td>
<td>subtract only from specified output index</td>
</tr>
<tr>
<td>selection <br> <em>enum</em> - <code>all</code>, <code>random</code>, <code>age</code>, <code>value</code></td>
<td>How to select coins</td>
</tr>
<tr>
<td>depth <br> <em>int</em></td>
<td>number of confirmation for coins to spend</td>
</tr>
<tr>
<td>value <br> <em>int</em> (or <em>float</em>)</td>
<td>Value to send in satoshis (or whole BTC, see warning above)</td>
</tr>
<tr>
<td>address <br> <em>string</em></td>
<td>destination address for transaction</td>
</tr>
</tbody></table>
<h2 id='create-a-transaction'>Create a Transaction</h2><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="nb">id</span><span class="o">=</span><span class="s2">"multisig-watch"</span>
<span class="nv">rate</span><span class="o">=</span>0.00001000
<span class="nv">value</span><span class="o">=</span>0.05000000
<span class="nv">address</span><span class="o">=</span><span class="s2">"mg54SV2ZubNQ5urTbd42mUsQ54byPvSg5j"</span>
<span class="nv">sign</span><span class="o">=</span><span class="nb">false

</span>bwallet-cli mktx <span class="nt">--id</span><span class="o">=</span><span class="nv">$id</span> <span class="nt">--rate</span><span class="o">=</span><span class="nv">$rate</span> <span class="nt">--value</span><span class="o">=</span><span class="nv">$value</span> <span class="nt">--address</span><span class="o">=</span><span class="nv">$address</span> <span class="nt">---passphrase</span><span class="o">=</span><span class="nv">$passphrase</span> <span class="nt">--sign</span><span class="o">=</span><span class="nv">$sign</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="nb">id</span><span class="o">=</span><span class="s2">"multisig1"</span>
<span class="nv">rate</span><span class="o">=</span>1000
<span class="nv">value</span><span class="o">=</span>5000000
<span class="nv">address</span><span class="o">=</span><span class="s2">"mg54SV2ZubNQ5urTbd42mUsQ54byPvSg5"</span>
<span class="nv">sign</span><span class="o">=</span><span class="nb">false

</span>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/create <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "rate":'</span><span class="nv">$rate</span><span class="s1">',
    "outputs":[
      {"address":"'</span><span class="nv">$address</span><span class="s1">'", "value":'</span><span class="nv">$value</span><span class="s1">'}
    ],
    "sign": '</span><span class="nv">$false</span><span class="s1">'
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">rate</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">address</span><span class="p">,</span> <span class="nx">sign</span><span class="p">;</span>
<span class="nx">id</span><span class="o">=</span><span class="dl">"</span><span class="s2">multisig-watch</span><span class="dl">"</span>
<span class="nx">rate</span><span class="o">=</span><span class="mi">1000</span>
<span class="nx">value</span><span class="o">=</span><span class="mi">5000000</span>
<span class="nx">address</span><span class="o">=</span><span class="dl">"</span><span class="s2">mg54SV2ZubNQ5urTbd42mUsQ54byPvSg5</span><span class="dl">"</span>
<span class="nx">sign</span><span class="o">=</span><span class="kc">false</span>

<span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">rate</span><span class="p">:</span> <span class="nx">rate</span><span class="p">,</span>
  <span class="na">outputs</span><span class="p">:</span> <span class="p">[{</span> <span class="na">value</span><span class="p">:</span> <span class="nx">value</span><span class="p">,</span> <span class="na">address</span><span class="p">:</span> <span class="nx">address</span> <span class="p">}],</span>
  <span class="na">sign</span><span class="p">:</span> <span class="nx">sign</span>
<span class="p">};</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">createTX</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3f61cbbe01ca9eb7eb0fb8c37f15e92d2fee8c28ea54fef5b7bc89eee219074b"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"witnessHash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3f61cbbe01ca9eb7eb0fb8c37f15e92d2fee8c28ea54fef5b7bc89eee219074b"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">3840</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">30000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"mtime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571766790</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"inputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"prevout"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4e6c7db14b22e39ca800b0eb83d698619849ac3245408cf03ae5dc752e2d884c"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"witness"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sequence"</span><span class="p">:</span><span class="w"> </span><span class="mi">4294967295</span><span class="p">,</span><span class="w">
      </span><span class="nl">"coin"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">746</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">312500000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00201e669358ab0b70bbdf63ac7abc442ee1b1f6f0fe24b1d67b2e3527ffac664c39"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bcrt1qrenfxk9tpdcthhmr43atc3pwuxcldu87yjcav7ewx5nlltrxfsustr8wj5"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"coinbase"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"outputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">5000000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"76a914061270cea3bdd77a5442657d177f4490642e7a2288ac"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mg54SV2ZubNQ5urTbd42mUsQ54byPvSg5j"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">307496160</span><span class="p">,</span><span class="w">
      </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0020485f95ef73a1f444cbbfdb7ff1f43c7e34c069d25a823026d3513cfa64cfd677"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bcrt1qfp0etmmn586yfjalmdllrapu0c6vq6wjt2prqfkn2y705ex06ems39f93c"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"locktime"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01000000014c882d2e75dce53af08c404532ac49986198d683ebb000a89ce3224bb17d6c4e0000000000ffffffff02404b4c00000000001976a914061270cea3bdd77a5442657d177f4490642e7a2288ace004541200000000220020485f95ef73a1f444cbbfdb7ff1f43c7e34c069d25a823026d3513cfa64cfd67700000000"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Create and template a transaction (useful for multisig).
Does not broadcast or add to wallet.</p>

<aside class="warning">Be careful how you enter values and fee rates!<br>
<code>value</code> and <code>rate</code> are expressed in satoshis when using cURL or Javascript<br>
<code>value</code> and <code>rate</code> are expressed in WHOLE BITCOINS when using CLI<br>
Watch carefully how values are entered in the examples, all examples send the same amount when executed
</aside>
<h3 id='http-request-7'>HTTP Request</h3>
<p><code>POST /wallet/:id/create</code></p>
<h3 id='post-paramters'>Post Paramters</h3>
<table><thead>
<tr>
<th>Paramter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>outputs <br> <em>array</em></td>
<td>An array of outputs to send for the transaction</td>
</tr>
<tr>
<td>passphrase <br> <em>string</em></td>
<td>passphrase to unlock the account</td>
</tr>
<tr>
<td>smart <br> <em>bool</em></td>
<td>whether or not to choose smart coins, will also used unconfirmed transactions</td>
</tr>
<tr>
<td>rate <br> <em>int</em></td>
<td>the rate for transaction fees. Denominated in satoshis per kb</td>
</tr>
<tr>
<td>maxFee <br> <em>int</em></td>
<td>maximum fee you&#39;re willing to pay</td>
</tr>
<tr>
<td>subtractFee <br> <em>bool</em></td>
<td>whether to subtract fee from outputs (evenly)</td>
</tr>
<tr>
<td>subtractIndex <br> <em>int</em></td>
<td>subtract only from specified output index</td>
</tr>
<tr>
<td>selection <br> <em>enum</em> - <code>all</code>, <code>random</code>, <code>age</code>, <code>value</code></td>
<td>How to select coins</td>
</tr>
<tr>
<td>depth <br> <em>int</em></td>
<td>number of confirmation for coins to spend</td>
</tr>
<tr>
<td>value <br> <em>int</em> (or <em>float</em>)</td>
<td>Value to send in satoshis (or whole BTC, see warning above)</td>
</tr>
<tr>
<td>address <br> <em>string</em></td>
<td>destination address for transaction</td>
</tr>
<tr>
<td>sign <br> <em>bool</em></td>
<td>whether to sign the TX (must be false for watch-only wallets)</td>
</tr>
</tbody></table>
<h2 id='sign-transaction'>Sign Transaction</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">tx</span><span class="p">,</span> <span class="nx">passphrase</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s2">"multisig1"</span>
<span class="nv">passphrase</span><span class="o">=</span><span class="s2">"multisecret123"</span>
<span class="nv">tx</span><span class="o">=</span><span class="s2">"01000000014c882d2e75dce53af08c404532ac49986198d683ebb000a89ce3224bb17d6c4e0000000000ffffffff02404b4c00000000001976a914061270cea3bdd77a5442657d177f4490642e7a2288ace004541200000000220020485f95ef73a1f444cbbfdb7ff1f43c7e34c069d25a823026d3513cfa64cfd67700000000"</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli sign <span class="nt">--id</span><span class="o">=</span><span class="nv">$id</span> <span class="nt">--passphrase</span><span class="o">=</span><span class="nv">$passphrase</span> <span class="nt">--tx</span><span class="o">=</span><span class="nv">$tx</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/sign <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"tx": "'</span><span class="nv">$tx</span><span class="s1">'", "passphrase":"'</span><span class="nv">$passphrase</span><span class="s1">'"}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="na">tx</span><span class="p">:</span> <span class="nx">tx</span><span class="p">,</span> <span class="na">passphrase</span><span class="p">:</span> <span class="nx">passphrase</span> <span class="p">};</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">sign</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample Output</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3f61cbbe01ca9eb7eb0fb8c37f15e92d2fee8c28ea54fef5b7bc89eee219074b"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"witnessHash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"68e9d7a28a571746eb7561ebc107479da26eb1cb2246ad5f05769149f6ec84db"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">3840</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">21942</span><span class="p">,</span><span class="w">
  </span><span class="nl">"mtime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571767276</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"inputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"prevout"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4e6c7db14b22e39ca800b0eb83d698619849ac3245408cf03ae5dc752e2d884c"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"witness"</span><span class="p">:</span><span class="w"> </span><span class="s2">"050000483045022100a8ba55fb5bdf6a69fc820d44c4430d55ae0356f7dd5cdcf5bb27e8cb24535fb802204a6a23dedc1acff4725e99b51bce9f2692aa08d6063842be51d5728e8f95f76f0100695221027b88633d65cb48667012bb64039afda0b50c51abb2fe11aca975b324b8f0f44c2102f9ae8660d9dc5f3d62a5c347e8cd431ecc9404c17ecbb57ab89aa54b6df68a422103001a9a61d4989e229cfa5bb9acf0fb03fa5f3f1c9785fc1de2d76a8f363c457953ae"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sequence"</span><span class="p">:</span><span class="w"> </span><span class="mi">4294967295</span><span class="p">,</span><span class="w">
      </span><span class="nl">"coin"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">746</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">312500000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00201e669358ab0b70bbdf63ac7abc442ee1b1f6f0fe24b1d67b2e3527ffac664c39"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bcrt1qrenfxk9tpdcthhmr43atc3pwuxcldu87yjcav7ewx5nlltrxfsustr8wj5"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"coinbase"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"outputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">5000000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"76a914061270cea3bdd77a5442657d177f4490642e7a2288ac"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mg54SV2ZubNQ5urTbd42mUsQ54byPvSg5j"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">307496160</span><span class="p">,</span><span class="w">
      </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0020485f95ef73a1f444cbbfdb7ff1f43c7e34c069d25a823026d3513cfa64cfd677"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bcrt1qfp0etmmn586yfjalmdllrapu0c6vq6wjt2prqfkn2y705ex06ems39f93c"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"locktime"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"010000000001014c882d2e75dce53af08c404532ac49986198d683ebb000a89ce3224bb17d6c4e0000000000ffffffff02404b4c00000000001976a914061270cea3bdd77a5442657d177f4490642e7a2288ace004541200000000220020485f95ef73a1f444cbbfdb7ff1f43c7e34c069d25a823026d3513cfa64cfd677050000483045022100a8ba55fb5bdf6a69fc820d44c4430d55ae0356f7dd5cdcf5bb27e8cb24535fb802204a6a23dedc1acff4725e99b51bce9f2692aa08d6063842be51d5728e8f95f76f0100695221027b88633d65cb48667012bb64039afda0b50c51abb2fe11aca975b324b8f0f44c2102f9ae8660d9dc5f3d62a5c347e8cd431ecc9404c17ecbb57ab89aa54b6df68a422103001a9a61d4989e229cfa5bb9acf0fb03fa5f3f1c9785fc1de2d76a8f363c457953ae00000000"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Sign a templated transaction (useful for multisig).</p>
<h3 id='http-request-8'>HTTP Request</h3>
<p><code>POST /wallet/:id/sign</code></p>
<h3 id='post-paramters-2'>Post Paramters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tx <br> <em>string</em></td>
<td>the hex of the transaction you would like to sign</td>
</tr>
<tr>
<td>passphrase <br> <em>string</em></td>
<td>passphrase to unlock the wallet</td>
</tr>
</tbody></table>
<h2 id='zap-transactions'>Zap Transactions</h2><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="nb">id</span><span class="o">=</span><span class="s2">"primary"</span>
<span class="nv">account</span><span class="o">=</span><span class="s2">"default"</span>
<span class="nv">age</span><span class="o">=</span>259200 <span class="c"># 72 hours</span>

bwallet-cli zap <span class="nt">--id</span><span class="o">=</span><span class="nv">$id</span> <span class="nt">--account</span><span class="o">=</span><span class="nv">$account</span> <span class="nt">--age</span><span class="o">=</span><span class="nv">$age</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="nb">id</span><span class="o">=</span><span class="s2">"primary"</span>
<span class="nv">account</span><span class="o">=</span><span class="s2">"default"</span>
<span class="nv">age</span><span class="o">=</span>259200 <span class="c"># 72 hours</span>

curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/zap <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "account": "'</span><span class="nv">$account</span><span class="s1">'",
    "age": '</span><span class="nv">$age</span><span class="s1">'
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">age</span><span class="p">,</span> <span class="nx">account</span><span class="p">;</span>
<span class="nx">id</span><span class="o">=</span><span class="dl">"</span><span class="s2">primary</span><span class="dl">"</span>
<span class="nx">account</span><span class="o">=</span><span class="dl">"</span><span class="s2">default</span><span class="dl">"</span>
<span class="nx">age</span><span class="o">=</span><span class="mi">259200</span> <span class="c1">// 72 hours</span>

<span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">zap</span><span class="p">(</span><span class="nx">account</span><span class="p">,</span> <span class="nx">age</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample Response</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell--cli"><code>Zapped!
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="o">{</span>
  <span class="s2">"success"</span>: <span class="nb">true</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">}</span>
</code></pre></div>
<p>Remove all pending transactions older than a specified age.</p>
<h3 id='http-request-9'>HTTP Request</h3>
<p><code>POST /wallet/:id/zap?age=3600</code></p>
<h3 id='post-parameters-2'>Post Parameters</h3>
<table><thead>
<tr>
<th>Parameters</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account <br> <em>string</em> or <em>number</em></td>
<td>account to zap from</td>
</tr>
<tr>
<td>age <br> <em>number</em></td>
<td>age threshold to zap up to (unix time)</td>
</tr>
</tbody></table>
<h2 id='unlock-wallet'>Unlock Wallet</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">pass</span><span class="p">,</span> <span class="nx">timeout</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s1">'primary'</span>
<span class="nv">pass</span><span class="o">=</span><span class="s1">'secret123'</span>
<span class="nb">timeout</span><span class="o">=</span>60
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli unlock <span class="nt">--id</span><span class="o">=</span><span class="nv">$id</span> <span class="nv">$pass</span> <span class="nv">$timeout</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/unlock <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"passphrase":"'</span><span class="nv">$pass</span><span class="s1">'", "timeout": '</span><span class="nv">$timeout</span><span class="s1">'}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">unlock</span><span class="p">(</span><span class="nx">pass</span><span class="p">,</span> <span class="nx">timeout</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample Response</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="o">{</span><span class="s2">"success"</span>: <span class="nb">true</span><span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="p">{</span><span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span><span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>Unlocked.
</code></pre></div>
<p>Derive the AES key from passphrase and hold it in memory for a specified number of seconds. Note: During this time, account creation and signing of transactions will not require a passphrase.</p>
<h3 id='http-request-10'>HTTP Request</h3>
<p><code>POST /wallet/:id/unlock</code></p>
<h3 id='body-parameters-2'>Body Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>passphrase <br> <em>string</em></td>
<td>Password used to encrypt the wallet being unlocked</td>
</tr>
<tr>
<td>timeout <br> <em>number</em></td>
<td>time to re-lock the wallet in seconds. (default=60)</td>
</tr>
</tbody></table>
<h2 id='lock-wallet'>Lock Wallet</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s1">'primary'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli lock <span class="nt">--id</span><span class="o">=</span><span class="nv">$id</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/lock <span class="se">\</span>
  <span class="nt">-X</span> POST
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">lock</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample Response</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="o">{</span><span class="s2">"success"</span>: <span class="nb">true</span><span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="p">{</span><span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span><span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>Locked.
</code></pre></div>
<p>If unlock was called, zero the derived AES key and revert to normal behavior.</p>
<h3 id='http-request-11'>HTTP Request</h3>
<p><code>POST /wallet/:id/lock</code></p>
<h2 id='import-public-private-key'>Import Public/Private Key</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">account</span><span class="p">,</span> <span class="nx">key</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s1">'primary'</span>
<span class="nv">watchid</span><span class="o">=</span><span class="s1">'watchonly1'</span>
<span class="nv">account</span><span class="o">=</span><span class="s1">'default'</span>
<span class="nv">pubkey</span><span class="o">=</span><span class="s1">'03b28be4fd749be06233452542e9d602f97a9b9c292aed4e4669c3fcc499e366de'</span>
<span class="nv">privkey</span><span class="o">=</span><span class="s1">'cNRiqwzRfcUfokNV8nSnDKb3NsKPhfRV2z5kBN11GKFb3GXkk1Hj'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli <span class="nt">--id</span><span class="o">=</span><span class="nv">$id</span> <span class="nt">--account</span><span class="o">=</span><span class="nv">$account</span> import <span class="nv">$privkey</span>
bwallet-cli <span class="nt">--id</span><span class="o">=</span><span class="nv">$watchid</span> <span class="nt">--account</span><span class="o">=</span><span class="nv">$account</span> import <span class="nv">$pubkey</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/import <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"account":"'</span><span class="nv">$account</span><span class="s1">'", "privateKey":"'</span><span class="nv">$privkey</span><span class="s1">'"}'</span>

curl <span class="nv">$walleturl</span>/<span class="nv">$watchid</span>/import <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"account":"'</span><span class="nv">$account</span><span class="s1">'", "publicKey":"'</span><span class="nv">$pubkey</span><span class="s1">'"}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">watchwallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">watchid</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">watchwallet</span><span class="p">.</span><span class="nx">importPublic</span><span class="p">(</span><span class="nx">account</span><span class="p">,</span> <span class="nx">pubkey</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">importPrivate</span><span class="p">(</span><span class="nx">account</span><span class="p">,</span> <span class="nx">privkey</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample Responses</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="err">Imported</span><span class="w"> </span><span class="err">private</span><span class="w"> </span><span class="err">key.</span><span class="w">

</span><span class="err">Imported</span><span class="w"> </span><span class="err">public</span><span class="w"> </span><span class="err">key.</span><span class="w">
</span></code></pre></div>
<p>Import a standard WIF key.</p>

<p>An import can be either a private key or a public key for watch-only. (Watch Only wallets will throw an error if trying to import a private key)</p>

<p>A rescan will be required to see any transaction history associated with the
key.</p>

<aside class="warning">
Note that imported keys do not exist anywhere in the wallet's HD tree. They can be associated with accounts but will not be properly backed up with only the mnemonic.
</aside>
<h3 id='http-request-12'>HTTP Request</h3>
<p><code>POST /wallet/:id/import</code></p>
<h3 id='body-paramters'>Body Paramters</h3>
<table><thead>
<tr>
<th>Paramter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id <br> <em>string</em></td>
<td>id of target wallet to import key into</td>
</tr>
<tr>
<td>privateKey <br> <em>string</em></td>
<td>Base58Check encoded private key</td>
</tr>
<tr>
<td>publicKey <br> <em>string</em></td>
<td>Hex encoded public key</td>
</tr>
</tbody></table>

<blockquote>
<p>Will return following error if incorrectly formatted:
<code>Bad key for import</code></p>
</blockquote>
<h2 id='import-address'>Import Address</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">account</span><span class="p">,</span> <span class="nx">address</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s1">'watchonly1'</span>
<span class="nv">account</span><span class="o">=</span><span class="s1">'default'</span>
<span class="nv">address</span><span class="o">=</span><span class="s1">'msKYwEVXcKBxatPMfFLdVwYug6bz4YS87J'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli watch <span class="nt">--id</span><span class="o">=</span><span class="nv">$id</span> <span class="nt">--account</span><span class="o">=</span><span class="nv">$account</span> <span class="nv">$address</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/import <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"account":"'</span><span class="nv">$account</span><span class="s1">'", "address":"'</span><span class="nv">$address</span><span class="s1">'"}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">importAddress</span><span class="p">(</span><span class="nx">account</span><span class="p">,</span> <span class="nx">address</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Import a Base58Check encoded address. Addresses (like public keys) can only be imported into watch-only wallets</p>

<p>The HTTP endpoint is the same as for key imports.</p>
<h3 id='http-request-13'>HTTP Request</h3>
<p><code>POST /wallet/:id/import</code></p>
<h3 id='body-paramters-2'>Body Paramters</h3>
<table><thead>
<tr>
<th>Paramter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id <br> <em>string</em></td>
<td>id of target wallet to import key into</td>
</tr>
<tr>
<td>address <br> <em>string</em></td>
<td>Base58Check encoded address</td>
</tr>
</tbody></table>
<h2 id='get-blocks-with-wallet-txs'>Get Blocks with Wallet Txs</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s2">"primary"</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/block
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli blocks <span class="nt">--id</span><span class="o">=</span><span class="nv">$id</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">getBlocks</span><span class="p">();</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w"> </span><span class="mi">1179720</span><span class="p">,</span><span class="w"> </span><span class="mi">1179721</span><span class="p">,</span><span class="w"> </span><span class="mi">1180146</span><span class="p">,</span><span class="w"> </span><span class="mi">1180147</span><span class="p">,</span><span class="w"> </span><span class="mi">1180148</span><span class="p">,</span><span class="w"> </span><span class="mi">1180149</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>List all block heights which contain any wallet transactions. Returns an array of block heights</p>
<h3 id='http-request-14'>HTTP Request</h3>
<p><code>GET /wallet/:id/block</code></p>

<table><thead>
<tr>
<th>Parameters</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id <br> <em>string</em></td>
<td>id of wallet to query blocks with its transactions in it</td>
</tr>
</tbody></table>
<h2 id='get-wallet-block-by-height'>Get Wallet Block by Height</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">height</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s2">"primary"</span>
<span class="nv">height</span><span class="o">=</span>50
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli <span class="nt">--id</span><span class="o">=</span><span class="nv">$id</span> block <span class="nv">$height</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/block/<span class="nv">$height</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">getBlock</span><span class="p">(</span><span class="nx">height</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5a630279111118885f4489471ddf6f7a318b3510e5e17aa73412088d19b8ba78"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
  </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1527181141</span><span class="p">,</span><span class="w">
  </span><span class="nl">"hashes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"4255c0784ae89cfe7ccf878be3a408d8c1f6c665d5df331e27962b4defe3beb8"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get block info by height.</p>
<h3 id='http-request-15'>HTTP Request</h3>
<p><code>GET /wallet/:id/block/:height</code></p>

<table><thead>
<tr>
<th>Parameters</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id <br> <em>string</em></td>
<td>id of wallet which has tx in the block being queried</td>
</tr>
<tr>
<td>height <br> <em>int</em></td>
<td>height of block being queried</td>
</tr>
</tbody></table>
<h2 id='add-xpubkey-multisig'>Add xpubkey (Multisig)</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">account</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s2">"multisig3"</span>
<span class="nv">account</span><span class="o">=</span><span class="s2">"default"</span>
<span class="nv">key</span><span class="o">=</span><span class="s2">"tpubDDkzvYzn2iJLqucWgnULe1x3DR5PCaZvWzpg13ZA395sFmbvKNG3XrPp3KpnbFrdE3R3c93w5ZVfU2XWBzde5LLCBR1YRy8XwMibN7sG39o"</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli <span class="nt">--id</span><span class="o">=</span><span class="nv">$id</span> <span class="nt">--account</span><span class="o">=</span><span class="nv">$account</span> shared add <span class="nv">$key</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/shared-key <span class="se">\</span>
  <span class="nt">-X</span> PUT <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"accountKey": "'</span><span class="nv">$key</span><span class="s1">'", "account": "'</span><span class="nv">$account</span><span class="s1">'"}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">addSharedKey</span><span class="p">(</span><span class="nx">account</span><span class="p">,</span> <span class="nx">key</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"addedKey"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Add a shared xpubkey to wallet. Must be a multisig wallet.</p>

<aside class="notice">
Note that since it must be a multisig, the wallet on creation should be set with <code>m</code> and <code>n</code> where <code>n</code> is greater than 1 (since the first key is always that wallet's own xpubkey). Creating new addresses from this account will not be possible until <code>n</code> number of xpubkeys are added to the account.
</aside>

<p>Response will return <code>addedKey: true</code> true if key was added on this request. Returns
<code>false</code> if key already added, but will still return <code>success: true</code> with status <code>200</code>.</p>
<h3 id='http-request-16'>HTTP Request</h3>
<p><code>PUT /wallet/:id/shared-key</code></p>
<h3 id='body-parameters-3'>Body Parameters</h3>
<table><thead>
<tr>
<th>Paramter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>accountKey <br> <em>string</em></td>
<td>xpubkey to add to the multisig wallet</td>
</tr>
<tr>
<td>account <br> <em>string</em></td>
<td>multisig account to add the xpubkey to (default=&#39;default&#39;)</td>
</tr>
</tbody></table>
<h2 id='remove-xpubkey-multisig'>Remove xpubkey (Multisig)</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">key</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s2">"multisig3"</span>
<span class="nv">account</span><span class="o">=</span><span class="s2">"default"</span>
<span class="nv">key</span><span class="o">=</span><span class="s2">"tpubDDkzvYzn2iJLqucWgnULe1x3DR5PCaZvWzpg13ZA395sFmbvKNG3XrPp3KpnbFrdE3R3c93w5ZVfU2XWBzde5LLCBR1YRy8XwMibN7sG39o"</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli <span class="nt">--id</span><span class="o">=</span><span class="nv">$id</span> <span class="nt">--account</span><span class="o">=</span><span class="nv">$account</span> shared remove <span class="nv">$key</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/shared-key <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"accountKey": "'</span><span class="nv">$key</span><span class="s1">'", "account": "'</span><span class="nv">$account</span><span class="s1">'"}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">removeSharedKey</span><span class="p">(</span><span class="nx">account</span><span class="p">,</span> <span class="nx">key</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"removedKey"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Remove shared xpubkey from wallet if present.</p>

<p>Response will return <code>removedKey: true</code> true if key was removed on this request. Returns
<code>false</code> if key was already removed, but will still return <code>success: true</code> with status <code>200</code>.</p>

<aside class="notice">
Remove Key is only available to a multisig wallet that is not yet "complete" -- as in,
<nobr><code>n-1</code></nobr> number of keys have not yet been added to the wallet's own original key.
Once a multisig wallet has the right number of keys to create m-of-n addresses, this function will return an error.
</aside>
<h3 id='http-request-17'>HTTP Request</h3>
<p><code>DEL /wallet/:id/shared-key</code></p>
<h3 id='body-parameters-4'>Body Parameters</h3>
<table><thead>
<tr>
<th>Paramter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>accountKey <br> <em>string</em></td>
<td>xpubkey to add to the multisig wallet</td>
</tr>
<tr>
<td>account <br> <em>string</em></td>
<td>multisig account to remove the key from (default=&#39;default&#39;)</td>
</tr>
</tbody></table>
<h2 id='get-public-key-by-address'>Get Public Key By Address</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">address</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s2">"primary"</span>
<span class="nv">address</span><span class="o">=</span><span class="s2">"msKYwEVXcKBxatPMfFLdVwYug6bz4YS87J"</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli <span class="nt">--id</span><span class="o">=</span><span class="nv">$id</span> key <span class="nv">$address</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/key/<span class="nv">$address</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">getKey</span><span class="p">(</span><span class="nx">address</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"branch"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nl">"witness"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"nested"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"publicKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"03b28be4fd749be06233452542e9d602f97a9b9c292aed4e4669c3fcc499e366de"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"program"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pubkeyhash"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"msKYwEVXcKBxatPMfFLdVwYug6bz4YS87J"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get wallet key by address. Returns wallet information with address and public key</p>
<h3 id='http-request-18'>HTTP Request</h3>
<p><code>GET /wallet/:id/key/:address</code></p>

<table><thead>
<tr>
<th>Parameters</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id <br> <em>string</em></td>
<td>id of wallet that holds the address being queried</td>
</tr>
<tr>
<td>address <br> <em>string</em></td>
<td>Base58 encoded address to get corresponding public key for</td>
</tr>
</tbody></table>
<h2 id='get-private-key-by-address'>Get Private Key By Address</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">address</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s1">'primary'</span>
<span class="nv">passphrase</span><span class="o">=</span><span class="s1">'secret123'</span>
<span class="nv">address</span><span class="o">=</span><span class="s1">'msKYwEVXcKBxatPMfFLdVwYug6bz4YS87J'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli <span class="nt">--id</span><span class="o">=</span><span class="nv">$id</span> <span class="nt">--passphrase</span><span class="o">=</span><span class="nv">$passphrase</span> dump <span class="nv">$address</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/wif/<span class="nv">$address</span>?passphrase<span class="o">=</span><span class="nv">$passphrase</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">getWIF</span><span class="p">(</span><span class="nx">address</span><span class="p">,</span> <span class="nx">passphrase</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"privateKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cNRiqwzRfcUfokNV8nSnDKb3NsKPhfRV2z5kBN11GKFb3GXkk1Hj"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get wallet private key (WIF format) by address. Returns just the private key</p>
<h3 id='http-request-19'>HTTP Request</h3>
<p><code>GET /wallet/:id/wif/:address</code></p>

<table><thead>
<tr>
<th>Parameters</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id <br> <em>string</em></td>
<td>id of wallet that holds the address being queried</td>
</tr>
<tr>
<td>address <br> <em>string</em></td>
<td>Base58 encoded address to get corresponding public key for</td>
</tr>
</tbody></table>
<h2 id='generate-receiving-address'>Generate Receiving Address</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">account</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s2">"primary"</span>
<span class="nv">account</span><span class="o">=</span><span class="s2">"default"</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli <span class="nt">--id</span><span class="o">=</span><span class="nv">$id</span> <span class="nt">--account</span><span class="o">=</span><span class="nv">$account</span> address
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/address <span class="nt">-X</span> POST <span class="nt">--data</span> <span class="s1">'{"account":"'</span><span class="nv">$account</span><span class="s1">'"}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">createAddress</span><span class="p">(</span><span class="nx">account</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"branch"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
  </span><span class="nl">"witness"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"nested"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"publicKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"03af169e5a186bbd7b380cb4553c72af243e18f243785b1597f192bbedd4a94fc3"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"program"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pubkeyhash"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"n2eoT9D8txT5ZymDvCFPA8PHs2CmTV6oJT"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Derive new receiving address for account.</p>

<aside class="notice">
Note that, except for the CLI which assumes 'default' account, an account must be passed for the call to work.
</aside>
<h3 id='http-request-20'>HTTP Request</h3>
<p><code>POST /wallet/:id/address</code></p>
<h3 id='post-paramters-3'>Post Paramters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account <br><em>string</em></td>
<td>BIP44 account to generate address from</td>
</tr>
</tbody></table>
<h2 id='generate-change-address'>Generate Change Address</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">account</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s2">"primary"</span>
<span class="nv">account</span><span class="o">=</span><span class="s2">"default"</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli <span class="nt">--id</span><span class="o">=</span><span class="nv">$id</span> <span class="nt">--account</span><span class="o">=</span><span class="nv">$account</span> change
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/change <span class="nt">-X</span> POST <span class="nt">--data</span> <span class="s1">'{"account":"'</span><span class="nv">$account</span><span class="s1">'"}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">createChange</span><span class="p">(</span><span class="nx">account</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"branch"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
  </span><span class="nl">"witness"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"nested"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"publicKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"03853852949194b426608b55074c54bbb78791a80c1eeece1e83343fb8babe6129"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"program"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pubkeyhash"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mppKe3yeSqnwX6pSVFqCT1AVGYPbnncKGh"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Derive new change address for account.</p>

<aside class="info">
Note that, except for the CLI which assumes 'default' account, an account must be passed for the call to work.
</aside>
<h3 id='http-request-21'>HTTP Request</h3>
<p><code>POST /wallet/:id/change</code></p>
<h3 id='post-paramters-4'>Post Paramters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account <br><em>string</em></td>
<td>BIP44 account to generate address from</td>
</tr>
</tbody></table>
<h2 id='derive-nested-address'>Derive Nested Address</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">account</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s2">"witness1"</span>
<span class="nv">account</span><span class="o">=</span><span class="s1">'default'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli <span class="nt">--id</span><span class="o">=</span><span class="nv">$id</span> nested <span class="nt">--account</span><span class="o">=</span><span class="nv">$account</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/nested <span class="nt">-X</span> POST <span class="nt">--data</span> <span class="s1">'{"account": "'</span><span class="nv">$account</span><span class="s1">'"}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">createNested</span><span class="p">(</span><span class="nx">account</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"branch"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"witness"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"nested"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"publicKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02d4ac18c8422e1ed65b007bfaef9f6b5b5c2e7070d56806f2928f24e3c92ba04d"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"program"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00142248d004cd1afca5fec1d8a92e3ef8de026b395d"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"scripthash"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NFQrQQSTWWCG3A9du6UNbDeDw1K3BQqQdu"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Derive new nested p2sh receiving address for account. Note that this can&#39;t be done on a non-witness account otherwise you will receive the following error:</p>

<p><code>[error] (node) Cannot derive nested on non-witness account.</code></p>
<h3 id='http-request-22'>HTTP Request</h3>
<p><code>POST /wallet/:id/nested</code></p>
<h3 id='post-paramters-5'>Post Paramters</h3>
<table><thead>
<tr>
<th>Paramter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account <br> <em>string</em></td>
<td>account to derive the nested address for (default=&#39;default&#39;)</td>
</tr>
</tbody></table>
<h2 id='get-balance'>Get Balance</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">account</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s1">'primary'</span>
<span class="nv">account</span><span class="o">=</span><span class="s1">'default'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli <span class="nt">--id</span><span class="o">=</span><span class="nv">$id</span> balance <span class="nt">--account</span><span class="o">=</span><span class="nv">$account</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/balance?account<span class="o">=</span><span class="nv">$account</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">getBalance</span><span class="p">(</span><span class="nx">account</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tx"</span><span class="p">:</span><span class="w"> </span><span class="mi">307</span><span class="p">,</span><span class="w">
  </span><span class="nl">"coin"</span><span class="p">:</span><span class="w"> </span><span class="mi">287</span><span class="p">,</span><span class="w">
  </span><span class="nl">"unconfirmed"</span><span class="p">:</span><span class="w"> </span><span class="mi">1122500000000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"confirmed"</span><span class="p">:</span><span class="w"> </span><span class="mi">1122500000000</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get wallet or account balance. If no account option is passed, the call defaults to wallet balance (with account index of <nobr><code>-1</code></nobr>). Balance values for <code>unconfimred</code> and <code>confirmed</code> are expressed in satoshis.</p>
<h3 id='http-request-23'>HTTP Request</h3>
<p><code>GET /wallet/:id/balance?account=:account</code></p>
<h3 id='request-paramters'>Request Paramters</h3>
<table><thead>
<tr>
<th>Paramters</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id <br> <em>string</em></td>
<td>wallet id to get balance of</td>
</tr>
<tr>
<td>account <br> <em>string</em></td>
<td>account name (optional, defaults to entire wallet balance)</td>
</tr>
</tbody></table>
<h2 id='list-all-coins'>List all Coins</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s2">"primary"</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/coin
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli <span class="nt">--id</span><span class="o">=</span><span class="nv">$id</span> coins
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">getCoins</span><span class="p">();</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">533</span><span class="p">,</span><span class="w">
    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">54145</span><span class="p">,</span><span class="w">
    </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0014b36ce46975f794a457ace76acf60e9e729afa9f6"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bcrt1qkdkwg6t47722g4avua4v7c8fuu56l20khg99xp"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"coinbase"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4d970cefa68cc09a4d591b106d551f2ab7ec5588fad34135e8bf0549acf1071f"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">533</span><span class="p">,</span><span class="w">
    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">34296708683</span><span class="p">,</span><span class="w">
    </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001478c6269acab13571f03ec97e6ef81c06a87d8b91"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bcrt1q0rrzdxk2ky6hrup7e9lxa7quq658mzu3yatkz4"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"coinbase"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"af4fc1e2490a01f028e837a9a4cc2deef7760ca7c7373e53e2bf0f4f71a7b808"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>List all wallet coins available.</p>
<h3 id='http-request-24'>HTTP Request</h3>
<p><code>GET /wallet/:id/coin</code></p>
<h2 id='lock-coin-outpoints'>Lock Coin/Outpoints</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">hash</span><span class="p">,</span> <span class="nx">index</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s2">"primary"</span>
<span class="nb">hash</span><span class="o">=</span><span class="s2">"52ada542512ea95be425087ee4b891842d81eb6f9a4e0350f14d0285b5fd40c1"</span>
<span class="nv">index</span><span class="o">=</span><span class="s2">"0"</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="c"># Not Supported in CLI</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/locked/<span class="nv">$hash</span>/<span class="nv">$index</span> <span class="nt">-X</span> PUT
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">lockCoin</span><span class="p">(</span><span class="nx">hash</span><span class="p">,</span> <span class="nx">index</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Lock outpoints. Also see <a href="#lockunspent">lockunspent</a> and <a href="#listlockunspent">listlockunspent</a>.</p>
<h3 id='http-request-25'>HTTP Request</h3>
<p><code>PUT /wallet/:id/locked/:hash/:index</code></p>
<h3 id='request-parameters'>Request Parameters</h3>
<table><thead>
<tr>
<th>Paramters</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id <br> <em>string</em></td>
<td>id of wallet that contains the outpoint</td>
</tr>
<tr>
<td>hash <br> <em>string</em></td>
<td>hash of transaction that created the outpoint</td>
</tr>
<tr>
<td>index <br> <em>string</em> or <em>int</em></td>
<td>index of the output in the transaction being referenced</td>
</tr>
</tbody></table>
<h3 id='body-paramters-3'>Body Paramters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>passphrase <br> <em>string</em></td>
<td>passphrase of wallet being referenced</td>
</tr>
</tbody></table>
<h2 id='unlock-outpoint'>Unlock Outpoint</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">passphrase</span><span class="p">,</span> <span class="nx">hash</span><span class="p">,</span> <span class="nx">index</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s2">"primary"</span>
<span class="nb">hash</span><span class="o">=</span><span class="s2">"52ada542512ea95be425087ee4b891842d81eb6f9a4e0350f14d0285b5fd40c1"</span>
<span class="nv">index</span><span class="o">=</span><span class="s2">"0"</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="c"># Not Supported in CLI</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/locked/<span class="nv">$hash</span>/<span class="nv">$index</span> <span class="nt">-X</span> DELETE
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">unlockCoin</span><span class="p">(</span><span class="nx">hash</span><span class="p">,</span> <span class="nx">index</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Unlock outpoints. Also see <a href="#lockunspent">lockunspent</a> and <a href="#listlockunspent">listlockunspent</a>.</p>
<h3 id='http-request-26'>HTTP Request</h3>
<p><code>DEL /wallet/:id/locked/:hash/:index</code></p>
<h3 id='request-parameters-2'>Request Parameters</h3>
<table><thead>
<tr>
<th>Paramters</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id <br> <em>string</em></td>
<td>id of wallet that contains the outpoint</td>
</tr>
<tr>
<td>hash <br> <em>string</em></td>
<td>hash of transaction that created the outpoint</td>
</tr>
<tr>
<td>index <br> <em>string</em> or <em>int</em></td>
<td>index of the output in the transaction being referenced</td>
</tr>
</tbody></table>
<h3 id='body-paramters-4'>Body Paramters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>passphrase <br> <em>string</em></td>
<td>passphrase of wallet being referenced</td>
</tr>
</tbody></table>
<h2 id='get-locked-outpoints'>Get Locked Outpoints</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s2">"primary"</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="c"># Not supported in CLI</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/locked
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">getLocked</span><span class="p">();</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"52ada542512ea95be425087ee4b891842d81eb6f9a4e0350f14d0285b5fd40c1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Get all locked outpoints. Also see <a href="#lockunspent">lockunspent</a> and <a href="#listlockunspent">listlockunspent</a>.</p>
<h3 id='http-request-27'>HTTP Request</h3>
<p><code>GET /wallet/:id/locked</code></p>
<h3 id='request-parameters-3'>Request Parameters</h3>
<table><thead>
<tr>
<th>Paramters</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id <br> <em>string</em></td>
<td>id of wallet to check for outpoints</td>
</tr>
</tbody></table>
<h2 id='get-wallet-coin'>Get Wallet Coin</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">hash</span><span class="p">,</span> <span class="nx">index</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s2">"primary"</span>
<span class="nb">hash</span><span class="o">=</span><span class="s2">"d07a4211a3633bedd737b850378872191c27fc6126dc8131c3b45f62611a7f36"</span>
<span class="nv">index</span><span class="o">=</span><span class="s2">"1"</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="c"># command is wallet agnostic, same as in vanilla coin command</span>

bcoin-cli coin <span class="nv">$hash</span> <span class="nv">$index</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/coin/<span class="nv">$hash</span>/<span class="nv">$index</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">getCoin</span><span class="p">(</span><span class="nx">hash</span><span class="p">,</span> <span class="nx">index</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">533</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">34296788338</span><span class="p">,</span><span class="w">
  </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001442079abdd9a01b9ccc5c6822413c06ce4e0c53d0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bcrt1qggre40we5qdeenzudq3yz0qxee8qc57s2fqygy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"coinbase"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d07a4211a3633bedd737b850378872191c27fc6126dc8131c3b45f62611a7f36"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get wallet coin</p>
<h3 id='http-request-28'>HTTP Request</h3>
<p><code>GET /wallet/:id/coin/:hash/:index</code></p>
<h3 id='request-parameters-4'>Request Parameters</h3>
<table><thead>
<tr>
<th>Paramters</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id <br> <em>string</em></td>
<td>id of wallet that contains the outpoint</td>
</tr>
<tr>
<td>hash <br> <em>string</em></td>
<td>hash of transaction that created the outpoint</td>
</tr>
<tr>
<td>index <br> <em>string</em> or <em>int</em></td>
<td>index of the output in the transaction being referenced</td>
</tr>
</tbody></table>
<h1 id='wallet-admin-commands'>Wallet Admin Commands</h1><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl http://x:api-key@127.0.0.1:48334 <span class="c"># will access admin functions for regtest (port 48334) wallets</span>

<span class="c"># examples in these docs will use an environment variable:</span>
<span class="nv">walletadminurl</span><span class="o">=</span>http://x:api-key@127.0.0.1:48334/
curl <span class="nv">$walletadminurl</span>/&lt;METHOD&gt;
</code></pre></div>
<p>Admin commands are simply commands no specific to any particular wallet, and may
impact all wallets on the system.</p>

<p>Additional security is available by specifying <code>admin-token</code> in your configuration
if <code>wallet-auth</code> is also enabled. If <code>admin-token</code> is specified, add <code>?token=</code>
to all admin requests.</p>

<p>This is highly recommended, especially on production instances.</p>
<h2 id='wallet-rescan'>Wallet Rescan</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">height</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">height</span><span class="o">=</span>50
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletadminurl</span>/rescan <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"height": '</span><span class="nv">$height</span><span class="s1">'}'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rescan <span class="nv">$height</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">rescan</span><span class="p">(</span><span class="nx">height</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>

</code></pre></div>
<blockquote>
<p>Response Body:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Initiates a blockchain rescan for the walletdb. Wallets will be rolled back to the specified height (transactions above this height will be unconfirmed). For SPV nodes, a wallet
reascan will be ineffective since there are no blocks stored on disk. Therefore a
chain <a href="#reset-blockchain"><code>reset</code></a> must be called instead.</p>
<h3 id='example-http-request'>Example HTTP Request</h3>
<p><code>POST /rescan?height=50</code></p>
<h2 id='wallet-resend'>Wallet Resend</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletadminurl</span>/resend <span class="se">\</span>
<span class="nt">-X</span> POST
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli resend
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">resend</span><span class="p">();</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Response Body:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">    </span><span class="p">{</span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Rebroadcast all pending transactions in all wallets.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST /resend</code></p>
<h2 id='wallet-backup'>Wallet Backup</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">path</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">path</span><span class="o">=</span><span class="s1">'/home/user/walletdb-backup.ldb'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletadminurl</span>/backup?path<span class="o">=</span><span class="nv">$path</span> <span class="se">\</span>
  <span class="nt">-X</span> POST
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli backup <span class="nv">$path</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">backup</span><span class="p">(</span><span class="nx">path</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Response Body:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Safely backup the wallet database to specified path (creates a clone of the database).</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>POST /backup?path=/home/user/walletdb-backup.ldb</code></p>
<h2 id='list-all-wallets'>List all Wallets</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletadminurl</span>/wallet
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli wallets
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">getWallets</span><span class="p">();</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample Response Body:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"primary"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"newWallet"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"multisig1"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"multisig2"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"watchonly1"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"multisig3"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"witness1"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>List all wallet IDs. Returns an array of strings.</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>GET /wallet</code></p>
<h1 id='wallet-transactions'>Wallet Transactions</h1><h2 id='get-wallet-tx-details'>Get Wallet TX Details</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">hash</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s2">"primary"</span>
<span class="nb">hash</span><span class="o">=</span><span class="s2">"c7dcd8f8923f8cd0d44d0d980ddd4da80f67290ef872aab0f7be5858210712f7"</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli <span class="nt">--id</span><span class="o">=</span><span class="nv">$id</span> tx <span class="nv">$hash</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/tx/<span class="nv">$hash</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">getTX</span><span class="p">(</span><span class="nx">hash</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"292fbf4fb037a5354465e0a183d664b99477248f1dd14f47493a2a66a66f40b4"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"block"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"mtime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571774862</span><span class="p">,</span><span class="w">
  </span><span class="nl">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1970-01-01T00:00:00Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"mdate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-22T20:07:42Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">226</span><span class="p">,</span><span class="w">
  </span><span class="nl">"virtualSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">226</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">4540</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">20088</span><span class="p">,</span><span class="w">
  </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"inputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">2500000000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mhX1xHbKGzw3r8FoN5bUkmRixHPEDNywxh"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"change"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"derivation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m/0'/0/1"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"outputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mxbdj9hHDLK2TXD3Cztiy8BLiEuKPcsM5x"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"change"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"derivation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m/0'/0/5"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">2489995460</span><span class="p">,</span><span class="w">
      </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mjQqy8E7WJLaybxHcpiaWQMppjizi6nG3Y"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"change"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"derivation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m/0'/1/6"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"tx"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0100000001a02535c04f1791c7cee4a299d55179d998c23c41c039778ce10d7d3150695b10000000006b483045022100c7ce594aadde910687a6a86ee48a865221066d47b8a2323d10683076d399938e022048844ec1ad29c3733d13ac191a3bc89a1f07abc0f240ae631e5d146acc11f6e901210336c99e45e00b73c863497a989fe6feb08439ca2d7cf98f55bc261ed70ed28a7bffffffff0280969800000000001976a914bb5cb80bfffca7ba777ff3a8f7c33098faf9769188acc4506a94000000001976a9142ab8b9f49d7c3559b4228aa69b1e8cba0a7558d088ac00000000"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get wallet transaction details.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /wallet/:id/tx/:hash</code></p>
<h3 id='request-parameters'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id <br> <em>string</em></td>
<td>id of wallet that handled the transaction</td>
</tr>
<tr>
<td>hash <br> <em>string</em></td>
<td>hash of the transaction you&#39;re trying to retrieve</td>
</tr>
</tbody></table>
<h2 id='delete-transaction'>Delete Transaction</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">hash</span><span class="p">,</span> <span class="nx">passphrase</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s2">"primary"</span>
<span class="nb">hash</span><span class="o">=</span><span class="s2">"a97a9993389ae321b263dffb68ba1312ad0655da83aeca75b2372d5abc70544a"</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="c"># Not available in CLI</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/tx/<span class="nv">$hash</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code> <span class="c1">// Not available in javascript wallet client.</span>
</code></pre></div>
<p>Abandon single pending transaction. Confirmed transactions will throw an error.
<code>&quot;TX not eligible&quot;</code></p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>DEL /wallet/:id/tx/:hash</code></p>

<table><thead>
<tr>
<th>Paramters</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id <br> <em>string</em></td>
<td>id of wallet where the transaction is that you want to remove</td>
</tr>
<tr>
<td>hash <br> <em>string</em></td>
<td>hash of transaction you would like to remove.</td>
</tr>
</tbody></table>
<h2 id='get-wallet-tx-history'>Get Wallet TX History</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s1">'primary'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli <span class="nt">--id</span><span class="o">=</span><span class="nv">$id</span> <span class="nb">history</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/tx/history
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">account</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">default</span><span class="dl">'</span><span class="p">;</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">getHistory</span><span class="p">(</span><span class="nx">account</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"292fbf4fb037a5354465e0a183d664b99477248f1dd14f47493a2a66a66f40b4"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"block"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mtime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571774862</span><span class="p">,</span><span class="w">
    </span><span class="nl">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1970-01-01T00:00:00Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mdate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-22T20:07:42Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">226</span><span class="p">,</span><span class="w">
    </span><span class="nl">"virtualSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">226</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">4540</span><span class="p">,</span><span class="w">
    </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">20088</span><span class="p">,</span><span class="w">
    </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"inputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">2500000000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mhX1xHbKGzw3r8FoN5bUkmRixHPEDNywxh"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"change"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"derivation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m/0'/0/1"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"outputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mxbdj9hHDLK2TXD3Cztiy8BLiEuKPcsM5x"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"change"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"derivation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m/0'/0/5"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">2489995460</span><span class="p">,</span><span class="w">
        </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mjQqy8E7WJLaybxHcpiaWQMppjizi6nG3Y"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"change"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"derivation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m/0'/1/6"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"tx"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0100000001a02535c04f1791c7cee4a299d55179d998c23c41c039778ce10d7d3150695b10000000006b483045022100c7ce594aadde910687a6a86ee48a865221066d47b8a2323d10683076d399938e022048844ec1ad29c3733d13ac191a3bc89a1f07abc0f240ae631e5d146acc11f6e901210336c99e45e00b73c863497a989fe6feb08439ca2d7cf98f55bc261ed70ed28a7bffffffff0280969800000000001976a914bb5cb80bfffca7ba777ff3a8f7c33098faf9769188acc4506a94000000001976a9142ab8b9f49d7c3559b4228aa69b1e8cba0a7558d088ac00000000"</span><span class="w">
  </span><span class="p">},</span><span class="w">
 </span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Get wallet TX history. Returns array of tx details.</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>GET /wallet/:id/tx/history</code></p>
<h3 id='request-parameters-2'>Request Parameters</h3>
<table><thead>
<tr>
<th>Paramter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id <br> <em>string</em></td>
<td>id of wallet to get history of</td>
</tr>
</tbody></table>
<h2 id='get-pending-transactions'>Get Pending Transactions</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s1">'primary'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli <span class="nt">--id</span><span class="o">=</span><span class="nv">$id</span> pending
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/tx/unconfirmed
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">getPending</span><span class="p">();</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<p>Get pending wallet transactions. Returns array of tx details.</p>
<h3 id='http-request-4'>HTTP Request</h3>
<p><code>GET /wallet/:id/tx/unconfirmed</code></p>
<h3 id='request-parameters-3'>Request Parameters</h3>
<table><thead>
<tr>
<th>Paramter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id <br> <em>string</em></td>
<td>id of wallet to get pending/unconfirmed txs</td>
</tr>
</tbody></table>
<h2 id='get-range-of-transactions'>Get Range of Transactions</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">account</span><span class="p">,</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">end</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s2">"primary"</span>
<span class="nv">account</span><span class="o">=</span><span class="s2">"default"</span>
<span class="nv">start</span><span class="o">=</span><span class="s2">"1527184612"</span>
<span class="nv">end</span><span class="o">=</span><span class="s2">"1527186612"</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="c"># range not available in CLI</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/tx/range?start<span class="o">=</span><span class="nv">$start</span><span class="s1">'&amp;'</span><span class="nv">end</span><span class="o">=</span><span class="nv">$end</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">getRange</span><span class="p">(</span><span class="nx">account</span><span class="p">,</span> <span class="p">{</span><span class="na">start</span><span class="p">:</span> <span class="nx">start</span><span class="p">,</span> <span class="na">end</span><span class="p">:</span> <span class="nx">end</span><span class="p">});</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"292fbf4fb037a5354465e0a183d664b99477248f1dd14f47493a2a66a66f40b4"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"block"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mtime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571774862</span><span class="p">,</span><span class="w">
    </span><span class="nl">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1970-01-01T00:00:00Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mdate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-22T20:07:42Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">226</span><span class="p">,</span><span class="w">
    </span><span class="nl">"virtualSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">226</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">4540</span><span class="p">,</span><span class="w">
    </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">20088</span><span class="p">,</span><span class="w">
    </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"inputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">2500000000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mhX1xHbKGzw3r8FoN5bUkmRixHPEDNywxh"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"change"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"derivation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m/0'/0/1"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"outputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mxbdj9hHDLK2TXD3Cztiy8BLiEuKPcsM5x"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"change"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"derivation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m/0'/0/5"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">2489995460</span><span class="p">,</span><span class="w">
        </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mjQqy8E7WJLaybxHcpiaWQMppjizi6nG3Y"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"change"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"derivation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m/0'/1/6"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"tx"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0100000001a02535c04f1791c7cee4a299d55179d998c23c41c039778ce10d7d3150695b10000000006b483045022100c7ce594aadde910687a6a86ee48a865221066d47b8a2323d10683076d399938e022048844ec1ad29c3733d13ac191a3bc89a1f07abc0f240ae631e5d146acc11f6e901210336c99e45e00b73c863497a989fe6feb08439ca2d7cf98f55bc261ed70ed28a7bffffffff0280969800000000001976a914bb5cb80bfffca7ba777ff3a8f7c33098faf9769188acc4506a94000000001976a9142ab8b9f49d7c3559b4228aa69b1e8cba0a7558d088ac00000000"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Get range of wallet transactions by timestamp. Returns array of tx details.</p>

<aside class="notice">
Note that there are other options documented that `getRange` accepts in the options body, `limit` and `reverse`. At the time of writing however they do not have any effect.
</aside>
<h3 id='http-request-5'>HTTP Request</h3>
<p><code>GET /wallet/:id/tx/range</code></p>
<h3 id='body-parameters'>Body Parameters</h3>
<table><thead>
<tr>
<th>Paramter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account <br><em>string</em></td>
<td>account to get the tx history from</td>
</tr>
<tr>
<td>start <br> <em>int</em></td>
<td>start time to get range from</td>
</tr>
<tr>
<td>end <br> <em>int</em></td>
<td>end time to get range from</td>
</tr>
</tbody></table>

<!-- ##GET /wallet/:id/tx/last

Get last N wallet transactions.

### HTTP Request

`GET /wallet/:id/tx/last` -->
<h1 id='wallet-accounts'>Wallet Accounts</h1><h2 id='account-object'>Account Object</h2>
<blockquote>
<p>An account object looks like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"initialized"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"witness"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"watchOnly"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pubkeyhash"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"m"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"n"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountIndex"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"receiveDepth"</span><span class="p">:</span><span class="w"> </span><span class="mi">152</span><span class="p">,</span><span class="w">
  </span><span class="nl">"changeDepth"</span><span class="p">:</span><span class="w"> </span><span class="mi">89</span><span class="p">,</span><span class="w">
  </span><span class="nl">"nestedDepth"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nl">"lookahead"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nl">"receiveAddress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bcrt1qp3kym2sv7k23ndpqrv4hhcpzcm392l97hq932m"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"changeAddress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bcrt1qkezyz65tq8k5gfyhs5v6jgzeplwsq84cscmczf"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"nestedAddress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NFQrQQSTWWCG3A9du6UNbDeDw1K3BQqQdu"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tpubDDkzvYzn2iJLqucWgnULe1x3DR5PCaZvWzpg13ZA395sFmbvKNG3XrPp3KpnbFrdE3R3c93w5ZVfU2XWBzde5LLCBR1YRy8XwMibN7sG39o"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"keys"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"tx"</span><span class="p">:</span><span class="w"> </span><span class="mi">157</span><span class="p">,</span><span class="w">
    </span><span class="nl">"coin"</span><span class="p">:</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w">
    </span><span class="nl">"unconfirmed"</span><span class="p">:</span><span class="w"> </span><span class="mi">102893658385</span><span class="p">,</span><span class="w">
    </span><span class="nl">"confirmed"</span><span class="p">:</span><span class="w"> </span><span class="mi">102893658385</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Represents a BIP44 Account belonging to a Wallet.
Note that this object does not enforce locks. Any method that does a write is internal API only and will lead to race conditions if used elsewhere.</p>

<p>From the <a href="https://github.com/bitcoin/bips/blob/master/bip-0044.mediawiki">BIP44 Specification</a>:</p>

<p><em>This level splits the key space into independent user identities, so the wallet never mixes the coins across different accounts.</em>
        <em>Users can use these accounts to organize the funds in the same fashion as bank accounts; for donation purposes (where all addresses are considered public), for saving purposes, for common expenses etc.</em>
        <em>Accounts are numbered from index 0 in sequentially increasing manner. This number is used as child index in BIP32 derivation.</em>
        <em>Hardened derivation is used at this level.</em></p>

<aside class="warning">
Accounts within the same wallet are all related by deterministic hierarchy. However, wallets are not related to each other in any way. This means that when a wallet seed is backed up, all of its accounts (and their keys) can be derived from that backup. However, each newly created wallet must be backed up separately.
</aside>
<h2 id='get-wallet-account-list'>Get Wallet Account List</h2><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s1">'primary'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/account
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli account <span class="nt">--id</span><span class="o">=</span><span class="nv">$id</span> list
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">getAccounts</span><span class="p">();</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"default"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>List all account names (array indices map directly to bip44 account indices) associated with a specific wallet id.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /wallet/:id/account</code></p>

<table><thead>
<tr>
<th>Parameters</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id <br> <em>string</em></td>
<td>id of wallet you would like to retrieve the account list for</td>
</tr>
</tbody></table>

<aside class="notice">
Note that command defaults to primary (default) wallet if no wallet id is passed
</aside>
<h2 id='get-account-information'>Get Account Information</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">account</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s1">'primary'</span>
<span class="nv">account</span><span class="o">=</span><span class="s1">'default'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/account/<span class="nv">$account</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli <span class="nt">--id</span><span class="o">=</span><span class="nv">$id</span> account get <span class="nv">$account</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">getAccount</span><span class="p">(</span><span class="nx">account</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"initialized"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"witness"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"watchOnly"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pubkeyhash"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"m"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"n"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountIndex"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"receiveDepth"</span><span class="p">:</span><span class="w"> </span><span class="mi">152</span><span class="p">,</span><span class="w">
  </span><span class="nl">"changeDepth"</span><span class="p">:</span><span class="w"> </span><span class="mi">89</span><span class="p">,</span><span class="w">
  </span><span class="nl">"nestedDepth"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nl">"lookahead"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nl">"receiveAddress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bcrt1qp3kym2sv7k23ndpqrv4hhcpzcm392l97hq932m"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"changeAddress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bcrt1qkezyz65tq8k5gfyhs5v6jgzeplwsq84cscmczf"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"nestedAddress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NFQrQQSTWWCG3A9du6UNbDeDw1K3BQqQdu"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tpubDDkzvYzn2iJLqucWgnULe1x3DR5PCaZvWzpg13ZA395sFmbvKNG3XrPp3KpnbFrdE3R3c93w5ZVfU2XWBzde5LLCBR1YRy8XwMibN7sG39o"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"keys"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"tx"</span><span class="p">:</span><span class="w"> </span><span class="mi">157</span><span class="p">,</span><span class="w">
    </span><span class="nl">"coin"</span><span class="p">:</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w">
    </span><span class="nl">"unconfirmed"</span><span class="p">:</span><span class="w"> </span><span class="mi">102893658385</span><span class="p">,</span><span class="w">
    </span><span class="nl">"confirmed"</span><span class="p">:</span><span class="w"> </span><span class="mi">102893658385</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get account info.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET /wallet/:id/account/:account</code></p>

<table><thead>
<tr>
<th>Parameters</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id <br> <em>string</em></td>
<td>id of wallet you would like to query</td>
</tr>
<tr>
<td>account <br> <em>string</em></td>
<td>id of account you would to retrieve information for</td>
</tr>
</tbody></table>
<h2 id='create-new-wallet-account'>Create new wallet account</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">passphrase</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">type</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s1">'primary'</span>
<span class="nv">passphrase</span><span class="o">=</span><span class="s1">'secret123'</span>
<span class="nv">name</span><span class="o">=</span><span class="s1">'menace'</span>
<span class="nb">type</span><span class="o">=</span><span class="s1">'multisig'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli <span class="nt">--id</span><span class="o">=</span><span class="nv">$id</span> account create <span class="nt">--name</span><span class="o">=</span><span class="nv">$name</span> <span class="nt">--type</span><span class="o">=</span><span class="nv">$type</span> <span class="nt">--passphrase</span><span class="o">=</span><span class="nv">$passphrase</span> 
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walleturl</span>/<span class="nv">$id</span>/account/<span class="nv">$name</span> <span class="se">\</span>
    <span class="nt">-X</span> PUT <span class="se">\</span>
    <span class="nt">--data</span> <span class="s1">'{"type": "'</span><span class="nv">$type</span><span class="s1">'", "passphrase": "'</span><span class="nv">$passphrase</span><span class="s1">'"}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">wallet</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="nx">name</span><span class="p">,</span> <span class="na">type</span><span class="p">:</span> <span class="nx">type</span><span class="p">,</span> <span class="na">passphrase</span><span class="p">:</span> <span class="nx">passphrase</span><span class="p">}</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">createAccount</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>Sample response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"null"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"initialized"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"witness"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"watchOnly"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pubkeyhash"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"m"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"n"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountIndex"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
  </span><span class="nl">"receiveDepth"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"changeDepth"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"nestedDepth"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"lookahead"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nl">"receiveAddress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"msciA3DK8mAAzj8u7MN53D8dYwXgHTwM59"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"changeAddress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mkJNMxC1j4BWUmexzBbyM2T4uvnAGCFCV6"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"nestedAddress"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tpubDC8ATY6G4mgAhJE9xRUEW2JNv6T5c1Vni7gKn1oUuwRzBh858H3Vx2baB8BG5Mh8UnLknZiT7nwnX8MHKKhKrUTduJXYdnskp43EJpSWdYB"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"keys"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"tx"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"coin"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"unconfirmed"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"confirmed"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Create account with specified account name.</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>PUT /wallet/:id/account/:name</code></p>
<h3 id='options-object'>Options object</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name <br> <em>string</em></td>
<td>name to give the account. Option can be <code>account</code> or <code>name</code></td>
</tr>
<tr>
<td>witness <br> <em>bool</em></td>
<td>whether or not to act as segregated witness wallet account</td>
</tr>
<tr>
<td>accountKey <br> <em>string</em></td>
<td>the extended public key for the account. This is ignored for non watch only wallets. Watch only accounts can&#39;t accept private keys for import (or sign transactions)</td>
</tr>
<tr>
<td>type <br> <em>string</em></td>
<td>what type of wallet to make it (&#39;multisig&#39;, &#39;pubkeyhash&#39;)</td>
</tr>
<tr>
<td>m <br> <em>int</em></td>
<td>for multisig accounts, what to make <code>m</code> in m-of-n</td>
</tr>
<tr>
<td>n <br> <em>int</em></td>
<td>for multisig accounts, what to make the <code>n</code> in m-of-n</td>
</tr>
</tbody></table>
<h1 id='rpc-calls-wallet'>RPC Calls - Wallet</h1><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="c"># examples in these docs will use a DIFFERENT environment variable</span>
<span class="c"># than the built-in bcoin wallet API calls above:</span>
<span class="nv">walletrpcurl</span><span class="o">=</span>http://x:api-key@127.0.0.1:48334/

curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{ "method": "&lt;method&gt;", "params": [...] "id": "some-id" }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc &lt;method&gt; &lt;params&gt;
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">&lt;method&gt;</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span> <span class="o">&lt;</span><span class="nx">params</span><span class="o">&gt;</span> <span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<p>Like the <a href="#rpc-calls-node">bcoin node RPC calls</a>, the wallet RPC calls mimic Bitcoin Core&#39;s RPC.</p>

<p>Refer to the sections on <a href="#the-wallet-client">the wallet client</a> and <a href="#the-walletdb-and-object">the wallet db object</a>
for host, port, and authentication information.</p>

<p>RPC Calls are accepted at:
<code>POST /</code></p>
<h3 id='wallet-rpc-post-parameters'>wallet RPC POST Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>method</td>
<td>Name of the RPC call</td>
</tr>
<tr>
<td>params</td>
<td>Parameters accepted by method</td>
</tr>
<tr>
<td>id</td>
<td><code>int</code> Will be returned with the response (cURL only)</td>
</tr>
</tbody></table>

<aside class='warning'>
A note about the <code>label</code> parameter:<br>
These RPC calls were designed to be backwards-compatible with Bitcoin Core, which has the option
to label addresses. bcoin ignores this parameter because it does not label addresses.
To match the order and sequence of RPC parameters with Bitcoin Core, a <code>label</code>
parameter MUST be passed in certain RPC calls, even though it will be ignored by bcoin.
The following calls are affected:<br>
<code><a href="#importprivkey">importprivkey</a></code><br>
<code><a href="#importaddress">importaddress</a></code><br>
<code><a href="#importpubkey">importpubkey</a></code><br>
<code><a href="#importprunedfunds">importprunedfunds</a></code><br>
<code><a href="#sendmany">sendmany</a></code><br>
<code><a href="#sendtoaddress">sendtoaddress</a></code>
</aside>
<h2 id='selectwallet'>selectwallet</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">id</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nb">id</span><span class="o">=</span><span class="s1">'primary'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "selectwallet",
    "params": [ "'</span><span class="nv">$id</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc selectwallet <span class="nv">$id</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">selectwallet</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">id</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="kc">null</span><span class="w">
</span></code></pre></div>
<p>Switch target wallet for all future RPC calls.</p>
<h3 id='params'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>id</td>
<td>Required</td>
<td>id of selected wallet</td>
</tr>
</tbody></table>
<h2 id='getwalletinfo'>getwalletinfo</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{ "method": "getwalletinfo" }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc getwalletinfo
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getwalletinfo</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"walletid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"primary"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"walletversion"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
    </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
    </span><span class="nl">"unconfirmed_balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
    </span><span class="nl">"txcount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"keypoololdest"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"keypoolsize"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"unlocked_until"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"paytxfee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get basic wallet details.</p>
<h3 id='params-2'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>None.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id='fundrawtransaction'>fundrawtransaction</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">tx</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">options</span><span class="o">=</span><span class="p">{</span><span class="dl">"</span><span class="s2">changeAddress</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">mfi6TVtSYsNk4ADkXbFT9d6f95kmDMXgKp</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">feeRate</span><span class="dl">"</span><span class="p">:</span> <span class="mf">0.00001000</span><span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">tx</span><span class="o">=</span><span class="s1">'0100000000024e61bc00000000001976a914fbdd46898a6d70a682cbd34420ccf0b6bb64493788acf67e4929010000001976a9141b002b6fc0f457bf8d092722510fce9f37f0423b88ac00000000'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="nv">options</span><span class="o">=</span><span class="s1">'{"changeAddress": "mfi6TVtSYsNk4ADkXbFT9d6f95kmDMXgKp", "feeRate": 0.00001000}'</span>

curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "fundrawtransaction",
    "params": [ "'</span><span class="nv">$tx</span><span class="s1">'", '</span><span class="s2">"</span><span class="nv">$options</span><span class="s2">"</span><span class="s1">']
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="nv">options</span><span class="o">=</span><span class="s1">'{"changeAddress": "mfi6TVtSYsNk4ADkXbFT9d6f95kmDMXgKp", "feeRate": 0.00001000}'</span>

bwallet-cli rpc fundrawtransaction <span class="nv">$tx</span> <span class="s2">"</span><span class="nv">$options</span><span class="s2">"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">fundrawtransaction</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">tx</span><span class="p">,</span> <span class="nx">options</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>

<!---
########
#  TODO: Currently this method does not work: https://github.com/bcoin-org/bcoin/issues/521
########
-->
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">
</span></code></pre></div>
<p>Add inputs to a transaction until it has enough in value to meet its out value.</p>
<h3 id='params-3'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>hexstring</td>
<td>Required</td>
<td>raw transaction</td>
</tr>
<tr>
<td>2</td>
<td>options</td>
<td>Optional</td>
<td>Object containing options</td>
</tr>
</tbody></table>
<h3 id='options'>Options</h3>
<table><thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>feeRate</td>
<td>Sets fee rate for transaction in BTC/kb</td>
</tr>
<tr>
<td>changeAddress</td>
<td>Bitcoin address for change output of transaction</td>
</tr>
</tbody></table>
<h2 id='resendwallettransactions'>resendwallettransactions</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{ "method": "resendwallettransactions" }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc resendwallettransactions
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">resendwallettransactions</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"147c2527e2bb7ddfa855cc4b933ab288e05aa7816c487db69db344971f1b0951"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"c3c92d6686442755d70d2ea44401437d9fab51bc7a504b041d6d6b950ba45e85"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"77f09f2f307aaa62c8d36a9b8efeac368381c84ebd195e8aabc8ba3023ade390"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"2c0fa5740c494e8c86637c1fad645511d0379d3b6f18f84c1e8f7b6a040a399c"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ef38a6b68afe74f637c1e1bc605f7dc810ef50c6f475a0a978bac9546cac25d8"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"1146d21bb5c46f1de745d9def68dafe97bbf917fe0f32cef31937731865f10e9"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Re-broadcasts all unconfirmed transactions to the network.</p>
<h3 id='params-4'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>None.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id='abandontransaction'>abandontransaction</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">tx</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">tx</span><span class="o">=</span><span class="s1">'a0a65cd0508450e8acae76f35ae622e7b1e7980e95f50026b98b2c6e025dae6c'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "abandontransaction",
    "params": [ "'</span><span class="nv">$tx</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc abandontransaction <span class="nv">$tx</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">abandontransaction</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">tx</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="kc">null</span><span class="w">
</span></code></pre></div>
<p>Remove transaction from the database. This allows &quot;stuck&quot; coins to be respent.</p>
<h3 id='params-5'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>txid</td>
<td>Required</td>
<td>Transaction ID to remove</td>
</tr>
</tbody></table>
<h2 id='addmultisigaddress'>addmultisigaddress</h2>
<p>Not implemented -- Impossible to implement in bcoin (no address book).</p>
<h2 id='addwitnessaddress'>addwitnessaddress</h2>
<p>Not implemented -- Deprecated in Bitcoin Core 0.16.0</p>
<h2 id='backupwallet'>backupwallet</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">path</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">path</span><span class="o">=</span><span class="s1">'/home/user/WalletBackup'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "backupwallet",
    "params": [ "'</span><span class="nv">$path</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc backupwallet <span class="nv">$path</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">backupwallet</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">path</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="kc">null</span><span class="w">
</span></code></pre></div>
<p>Back up wallet database and files to directory created at specified path.</p>
<h3 id='params-6'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>path</td>
<td>Required</td>
<td>Path and name of destination directory for backup</td>
</tr>
</tbody></table>
<h2 id='dumpprivkey'>dumpprivkey</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">address</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">address</span><span class="o">=</span><span class="s1">'msKYwEVXcKBxatPMfFLdVwYug6bz4YS87J'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "dumpprivkey",
    "params": [ "'</span><span class="nv">$address</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc dumpprivkey <span class="nv">$address</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">dumpprivkey</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">address</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>cNRiqwzRfcUfokNV8nSnDKb3NsKPhfRV2z5kBN11GKFb3GXkk1Hj
</code></pre></div>
<p>Get the private key (WIF format) corresponding to specified address.
Also see <a href="#importprivkey">importprivkey</a></p>
<h3 id='params-7'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>address</td>
<td>Required</td>
<td>Reveal the private key for this Bitcoin address</td>
</tr>
</tbody></table>
<h2 id='dumpwallet'>dumpwallet</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">path</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">path</span><span class="o">=</span><span class="s1">'/home/user-1/secretfiles/dump1.txt'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "dumpwallet",
    "params": [ "'</span><span class="nv">$path</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc dumpwallet <span class="nv">$path</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">dumpwallet</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">path</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="kc">null</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>The contents of the wallet dump file are formatted like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code># Wallet Dump created by Bcoin 2.0.0-dev
# * Created on 2019-10-22T18:29:15Z
# * Best block at time of backup was 845 (72365e9f4b4ed638bb1600116a67e3fa59b6ad6be2a449b675db607a984da4f8).
# * File: /home/user-1/secretfiles/dump1.txt

cNUUoZYmUGoJyodrNaohzfu6LmKy7pBk6yqubJcTeL5WPWw97DQ1 2019-10-22T18:29:15Z label= addr=mg54SV2ZubNQ5urTbd42mUsQ54byPvSg5j
cNH7YBw6haTB3yWkAndoPhwXRLNibXjWAYpqRQdvqPKLeW7JAj6h 2019-10-22T18:29:15Z change=1 addr=mgj4oGTbvCHxvx4EESYJKPkXWamxh2R6ef
cNmBeL4kpjLtNZcvjSezftq4ks6ajzZRi1z2AGpuBGy6XjxzytiQ 2019-10-22T18:29:15Z label= addr=mhX1xHbKGzw3r8FoN5bUkmRixHPEDNywxh
cUEfRrvPpKCy87QReCmPmd74Hz68kgZEHAErkuvEDFqwJKcCLsMn 2019-10-22T18:29:15Z label= addr=mhcx3M1AitoiwDQS3sz42CQLpVCEVkJLfq
cP4N8mxe81DhZfrgTz2GoV3croXD2o6Hern4DTB6Gr5jUwoLkT8h 2019-10-22T18:29:15Z change=1 addr=mhpSYq8bnM5XJVbpafdLNUtLZefr2d6xSq
...

# End of dump
</code></pre></div>
<p>Creates a new human-readable file at specified path with all wallet private keys in 
Wallet Import Format (base58).</p>
<h3 id='params-8'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>path</td>
<td>Required</td>
<td>Path and name of destination file for dump</td>
</tr>
</tbody></table>
<h2 id='encryptwallet'>encryptwallet</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">passphrase</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">passphrase</span><span class="o">=</span><span class="s1">'bikeshed'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "encryptwallet",
    "params": [ "'</span><span class="nv">$passphrase</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc encryptwallet <span class="nv">$passphrase</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">encryptwallet</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">passphrase</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>wallet encrypted; we do not need to stop!
</code></pre></div>
<p>Encrypts wallet with provided passphrase.
This action can only be done once on an unencrypted wallet.
See <a href="#walletpassphrasechange">walletpassphrasechange</a> or <a href="#change-passphrase">change passphrase</a>
if wallet has already been encrypted.</p>
<h3 id='params-9'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>passphrase</td>
<td>Required</td>
<td>Strong passphrase with which to encrypt wallet</td>
</tr>
</tbody></table>
<h2 id='getaccountaddress'>getaccountaddress</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">account</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">account</span><span class="o">=</span><span class="s1">'default'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "getaccountaddress",
    "params": [ "'</span><span class="nv">$account</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc getaccountaddress <span class="nv">$account</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getaccountaddress</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">account</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>bcrt1qp3kym2sv7k23ndpqrv4hhcpzcm392l97hq932m
</code></pre></div>
<p>Get the current receiving address for specified account.</p>
<h3 id='params-10'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>account</td>
<td>Required</td>
<td>Account to retrieve address from</td>
</tr>
</tbody></table>
<h2 id='getaccount'>getaccount</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">address</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">address</span><span class="o">=</span><span class="s1">'bcrt1qp3kym2sv7k23ndpqrv4hhcpzcm392l97hq932m'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "getaccount",
    "params": [ "'</span><span class="nv">$address</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc getaccount <span class="nv">$address</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getaccount</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">address</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>default
</code></pre></div>
<p>Get the account associated with a specified address.</p>
<h3 id='params-11'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>address</td>
<td>Required</td>
<td>Address to search for</td>
</tr>
</tbody></table>
<h2 id='getaddressesbyaccount'>getaddressesbyaccount</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">account</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">account</span><span class="o">=</span><span class="s1">'default'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "getaddressesbyaccount",
    "params": [ "'</span><span class="nv">$account</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc getaddressesbyaccount <span class="nv">$account</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getaddressesbyaccount</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">account</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"mg54SV2ZubNQ5urTbd42mUsQ54byPvSg5j"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"mgj4oGTbvCHxvx4EESYJKPkXWamxh2R6ef"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"mhX1xHbKGzw3r8FoN5bUkmRixHPEDNywxh"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"mhcx3M1AitoiwDQS3sz42CQLpVCEVkJLfq"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"mhpSYq8bnM5XJVbpafdLNUtLZefr2d6xSq"</span><span class="p">,</span><span class="w">
  </span><span class="err">...</span><span class="w">
  </span><span class="s2">"mjQqy8E7WJLaybxHcpiaWQMppjizi6nG3Y"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Get all addresses for a specified account.</p>
<h3 id='params-12'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>account</td>
<td>Required</td>
<td>Account name</td>
</tr>
</tbody></table>
<h2 id='getbalance'>getbalance</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{ "method": "getbalance" }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc getbalance 
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getbalance</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>50.01205819
</code></pre></div>
<p>Get total balance for entire wallet or a single, specified account.</p>
<h3 id='params-13'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>account</td>
<td>Optional</td>
<td>Account name</td>
</tr>
</tbody></table>
<h2 id='getnewaddress'>getnewaddress</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">account</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">account</span><span class="o">=</span><span class="s1">'default'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "getnewaddress",
    "params": [ "'</span><span class="nv">$account</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc getnewaddress <span class="nv">$account</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getnewaddress</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">account</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>msSaQkCXyrEefbSH9TCSWNjnacTwGGc55d
</code></pre></div>
<p>Get the next receiving address from specified account, or <code>default</code> account.</p>
<h3 id='params-14'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>account</td>
<td>Optional</td>
<td>Account name</td>
</tr>
</tbody></table>
<h2 id='getrawchangeaddress'>getrawchangeaddress</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{ "method": "getrawchangeaddress" }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc getrawchangeaddress
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getrawchangeaddress</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>moKaYJdRT19YUWSsfhnTQpo68wkVvzkk8y
</code></pre></div>
<p>Get the next change address from specified account.</p>
<h3 id='params-15'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>None.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id='getreceivedbyaccount'>getreceivedbyaccount</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">account</span><span class="p">,</span> <span class="nx">minconf</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">account</span><span class="o">=</span><span class="s1">'default'</span>
<span class="nv">minconf</span><span class="o">=</span>6
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "getreceivedbyaccount",
    "params": [ "'</span><span class="nv">$account</span><span class="s1">'", '</span><span class="nv">$minconf</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc getreceivedbyaccount <span class="nv">$account</span> <span class="nv">$minconf</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getreceivedbyaccount</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">account</span><span class="p">,</span> <span class="nx">minconf</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>50.00001234
</code></pre></div>
<p>Get total amount received by specified account. 
Optionally only count transactions with <code>minconf</code> number of confirmations.</p>
<h3 id='params-16'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>account</td>
<td>Required</td>
<td>Account name</td>
</tr>
<tr>
<td>2</td>
<td>minconf</td>
<td>Optional</td>
<td>Only include transactions with this many confirmations</td>
</tr>
</tbody></table>
<h2 id='getreceivedbyaddress'>getreceivedbyaddress</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">address</span><span class="p">,</span> <span class="nx">minconf</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">address</span><span class="o">=</span><span class="s1">'bcrt1quvydwldtduzjpdz8nm79d30g49nt6u5nurw0dt'</span>
<span class="nv">minconf</span><span class="o">=</span>6
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "getreceivedbyaddress",
    "params": [ "'</span><span class="nv">$address</span><span class="s1">'", '</span><span class="nv">$minconf</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc getreceivedbyaddress <span class="nv">$address</span> <span class="nv">$minconf</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getreceivedbyaddress</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">address</span><span class="p">,</span> <span class="nx">minconf</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>50.00001234
</code></pre></div>
<p>Get total amount received by specified address. 
Optionally only count transactions with <code>minconf</code> number of confirmations.</p>
<h3 id='params-17'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>address</td>
<td>Required</td>
<td>Address to request balance of</td>
</tr>
<tr>
<td>2</td>
<td>minconf</td>
<td>Optional</td>
<td>Only include transactions with this many confirmations</td>
</tr>
</tbody></table>
<h2 id='gettransaction'>gettransaction</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">address</span><span class="p">,</span> <span class="nx">minconf</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">txid</span><span class="o">=</span><span class="s1">'36cbb7ad0cc98ca86640a04c485f164dd741c20339af34516d359ecba2892c21'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "gettransaction",
    "params": [ "'</span><span class="nv">$txid</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc gettransaction <span class="nv">$txid</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">gettransaction</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">txid</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00072058</span><span class="p">,</span><span class="w">
  </span><span class="nl">"blockhash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1134065cc665e4f6df36202307ea1c9ad31287c45a7b9a5196e446885a76fc1c"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"blocktime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571760038</span><span class="p">,</span><span class="w">
  </span><span class="nl">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bc8336f7bb88e9613d5d1e81bef73837d8ec1c2bd47b9e19c3c4bf1eeb7e03b8"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"walletconflicts"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571759979</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timereceived"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571759979</span><span class="p">,</span><span class="w">
  </span><span class="nl">"bip125-replaceable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bcrt1qvjewtg83j8w7halz0h2axlwcn6c2ver4u75avy"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"receive"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00072058</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"vout"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"010000000001013384747e0e0d5f7a8dfff4220c5bc25479a4abf674abe9ac5e5b77da7b2973050400000000ffffffff038f8f0000000000001976a9149a006584ab0383ef07ad289395118ed9fba0e45688ac7a1901000000000016001464b2e5a0f191ddebf7e27dd5d37dd89eb0a66475d97249fc0700000016001449f1b89f0b09bbf77f33035ed3d4c30bd90eade90248304502210098989192ba64b6d1008e6137bbffffcfc7c8b7d4d05fb4a03b6906f9ce1e6ed302204bf8c7915ed4b35b6120901fc7459b2dcfe62567f7d6649d451a2136ba15f6700121029bf6c7b020b6e106b8492c6a3d396a265566c6294f553d10557a274d572a0e9e00000000"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get details about a transaction in the wallet.</p>
<h3 id='params-18'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>txid</td>
<td>Required</td>
<td>ID of transaction to fetch</td>
</tr>
<tr>
<td>2</td>
<td>watchonly</td>
<td>Optional</td>
<td>(bool) Whether to include watch-only addresses in balance details</td>
</tr>
</tbody></table>
<h2 id='getunconfirmedbalance'>getunconfirmedbalance</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{ "method": "getunconfirmedbalance" }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc getunconfirmedbalance
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getunconfirmedbalance</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>50
</code></pre></div>
<p>Get the unconfirmed balance from the wallet.
<aside class="notice">
In bcoin balances, <code>confirmed</code> refers to the total balance of coins
confirmed in the blockchain. <code>unconfirmed</code> refers to that total
IN ADDITION to any transactions still unconfirmed in the mempool.
Another way to think about it is your <code>unconfirmed</code> balance is the
FUTURE total value of your wallet after everything is confirmed.
</aside></p>
<h3 id='params-19'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>None.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id='importprivkey'>importprivkey</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">label</span><span class="p">,</span> <span class="nx">rescan</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">key</span><span class="o">=</span><span class="s1">'cNH7YBw6haTB3yWkAndoPhwXRLNibXjWAYpqRQdvqPKLeW7JAj6h'</span>
<span class="nv">label</span><span class="o">=</span><span class="s1">'this_is_ignored'</span>
<span class="nv">rescan</span><span class="o">=</span><span class="nb">false</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "importprivkey",
    "params": [ "'</span><span class="nv">$key</span><span class="s1">'", "'</span><span class="nv">$label</span><span class="s1">'", '</span><span class="nv">$rescan</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc importprivkey <span class="nv">$key</span> <span class="nv">$label</span> <span class="nv">$rescan</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">importprivkey</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">key</span><span class="p">,</span> <span class="nx">label</span><span class="p">,</span> <span class="nx">rescan</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>null
</code></pre></div>
<p>Import a private key into wallet. Also see <a href="#dumpprivkey">dumpprivkey</a>.</p>
<h3 id='params-20'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>key</td>
<td>Required</td>
<td>Private key to import (WIF format)</td>
</tr>
<tr>
<td>2</td>
<td>label</td>
<td>Optional</td>
<td><a href="#rpc-calls-wallet">Ignored but required if additional parameters are passed</a></td>
</tr>
<tr>
<td>3</td>
<td>rescan</td>
<td>Optional</td>
<td>(bool) Whether to rescan wallet after importing</td>
</tr>
</tbody></table>
<h2 id='importwallet'>importwallet</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">file</span><span class="p">,</span> <span class="nx">rescan</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">file</span><span class="o">=</span><span class="s1">'/home/user/WalletDump'</span>
<span class="nv">rescan</span><span class="o">=</span><span class="nb">false</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "importwallet",
    "params": [ "'</span><span class="nv">$file</span><span class="s1">'", '</span><span class="nv">$rescan</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc importwallet <span class="nv">$file</span> <span class="nv">$rescan</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">importwallet</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">file</span><span class="p">,</span> <span class="nx">rescan</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>null
</code></pre></div>
<p>Import all keys from a  wallet backup file. Also see <a href="#dumpwallet">dumpwallet</a>.</p>
<h3 id='params-21'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>file</td>
<td>Required</td>
<td>Path to wallet file</td>
</tr>
<tr>
<td>2</td>
<td>rescan</td>
<td>Optional</td>
<td>(bool) Whether to rescan wallet after importing</td>
</tr>
</tbody></table>
<h2 id='importaddress'>importaddress</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">address</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">address</span><span class="o">=</span><span class="s1">'mg54SV2ZubNQ5urTbd42mUsQ54byPvSg5j'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "importaddress",
    "params": [ "'</span><span class="nv">$address</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc importaddress <span class="nv">$address</span>

<span class="c"># P2SH example, imports script as address 2N57YNxkxUcUR9tXHsdEsvybTaAdsdc4fx</span>
bwallet-cli rpc importaddress 76a9145e50fb5b7475ebe2f7276ed3f29662e5321d1d7288ac <span class="s2">"this_is_ignored"</span> <span class="nb">true true</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">importaddress</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">address</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>null
</code></pre></div>
<p>Import address to a watch-only wallet.
May also import a Bitcoin script (in hex) as pay-to-script-hash (P2SH) address.</p>
<h3 id='params-22'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>address</td>
<td>Required</td>
<td>Address to watch in wallet</td>
</tr>
<tr>
<td>2</td>
<td>label</td>
<td>Optional</td>
<td><a href="#rpc-calls-wallet">Ignored but required if additional parameters are passed</a></td>
</tr>
<tr>
<td>3</td>
<td>rescan</td>
<td>Optional</td>
<td>(bool) Whether to rescan wallet after importing</td>
</tr>
<tr>
<td>4</td>
<td>p2sh</td>
<td>Optional</td>
<td>(bool) Whether to generate P2SH address from given script</td>
</tr>
</tbody></table>
<h2 id='importprunedfunds'>importprunedfunds</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">rawtx</span><span class="p">,</span> <span class="nx">txoutproof</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">rawtx</span><span class="o">=</span><span class="s1">'01000000010000000000000000000000000000000000000000000000000000000000000000ffffffff1e510e6d696e65642062792062636f696e048e0e9256080000000000000000ffffffff0100f2052a010000001976a9145e50fb5b7475ebe2f7276ed3f29662e5321d1d7288ac00000000'</span>
<span class="nv">txoutproof</span><span class="o">=</span><span class="s1">'0000002006226e46111a0b59caaf126043eb5bbf28c34f3a5e332a1fc7b2b73cf188910f212c89a2cb9e356d5134af3903c241d74d165f484ca04066a88cc90cadb7cb36e749355bffff7f20040000000100000001212c89a2cb9e356d5134af3903c241d74d165f484ca04066a88cc90cadb7cb360101'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "importprunedfunds",
    "params": [ "'</span><span class="nv">$rawtx</span><span class="s1">'", "'</span><span class="nv">$txoutproof</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc importprunedfunds <span class="nv">$rawtx</span> <span class="nv">$txoutproof</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">importprunedfunds</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">rawtx</span><span class="p">,</span> <span class="nx">txoutproof</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>null
</code></pre></div>
<p>Imports funds (without rescan) into pruned wallets.
Corresponding address or script must previously be included in wallet.
Does NOT check if imported coins are already spent, rescan may be required after
the point in time in which the specified transaciton was included in the blockchain.
See <a href="#gettxoutproof">gettxoutproof</a> and <a href="#removeprunedfunds">removeprunedfunds</a>.</p>
<h3 id='params-23'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>rawtx</td>
<td>Required</td>
<td>Raw transaction in hex that funds an address already in the wallet</td>
</tr>
<tr>
<td>2</td>
<td>txoutproof</td>
<td>Required</td>
<td>Hex output from <a href="#gettxoutproof">gettxoutproof</a> containing the tx</td>
</tr>
</tbody></table>
<h2 id='importpubkey'>importpubkey</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">pubkey</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">pubkey</span><span class="o">=</span><span class="s1">'02548e0a23b90505f1b4017f52cf2beeaa399fce7ff2961e29570c6afdfa9bfc5b'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "importpubkey",
    "params": [ "'</span><span class="nv">$pubkey</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc importpubkey <span class="nv">$pubkey</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">importpubkey</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">pubkey</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>null
</code></pre></div>
<p>Import public key to a watch-only wallet.</p>
<h3 id='params-24'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>pubkey</td>
<td>Required</td>
<td>Hex-encoded public key</td>
</tr>
<tr>
<td>2</td>
<td>label</td>
<td>Optional</td>
<td><a href="#rpc-calls-wallet">Ignored but required if additional parameters are passed</a></td>
</tr>
<tr>
<td>3</td>
<td>rescan</td>
<td>Optional</td>
<td>(bool) Whether to rescan wallet after importing</td>
</tr>
</tbody></table>
<h2 id='keypoolrefill'>keypoolrefill</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">newsize</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">newsize</span><span class="o">=</span>100
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "keypoolrefill",
    "params": [ '</span><span class="nv">$newsize</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc keypoolrefill <span class="nv">$newsize</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">keypoolrefill</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">newsize</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="kc">null</span><span class="w">
</span></code></pre></div>
<aside class="alert">
This method is preserved for backwards compatibility with Bitcoin Core,
but it has no effect on bcoin node or wallet.
</aside>
<h3 id='params-25'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>newsize</td>
<td>Required</td>
<td>The new keypool size</td>
</tr>
</tbody></table>
<h2 id='listaccounts'>listaccounts</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">minconf</span><span class="p">,</span> <span class="nx">watchonly</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">minconf</span><span class="o">=</span>6
<span class="nv">watchonly</span><span class="o">=</span><span class="nb">false</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "listaccounts",
    "params": [ '</span><span class="nv">$minconf</span><span class="s1">', '</span><span class="nv">$watchonly</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc listaccounts <span class="nv">$minconf</span> <span class="nv">$watchonly</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">listaccounts</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">minconf</span><span class="p">,</span> <span class="nx">watchonly</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="mf">46.87650028</span><span class="p">,</span><span class="w">
  </span><span class="nl">"savings"</span><span class="p">:</span><span class="w"> </span><span class="mf">9.37345432</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get list of account names and balances.</p>
<h3 id='params-26'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>minconf</td>
<td>Optional</td>
<td>Minimum confirmations for transaction to be included in balance</td>
</tr>
<tr>
<td>2</td>
<td>watchonly</td>
<td>Optional</td>
<td>(bool) Include watch-only addresses</td>
</tr>
</tbody></table>
<h2 id='listaddressgroupings'>listaddressgroupings</h2>
<p>Not implemented.</p>
<h2 id='lockunspent'>lockunspent</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">unlock</span><span class="p">,</span> <span class="nx">outputs</span><span class="p">;</span>
<span class="nx">outputs</span><span class="o">=</span><span class="p">[{</span> <span class="dl">"</span><span class="s2">txid</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">3962a06342fc62a733700d74c075a5d24c4f44f7108f6d9a318b66e92e3bdc72</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">vout</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}];</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">unlock</span><span class="o">=</span><span class="nb">false</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="nv">outputs</span><span class="o">=</span><span class="s1">'[{ "txid": "3962a06342fc62a733700d74c075a5d24c4f44f7108f6d9a318b66e92e3bdc72", "vout": 1 }]'</span>

curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "lockunspent",
    "params": [ '</span><span class="nv">$unlock</span><span class="s1">', '</span><span class="s2">"</span><span class="nv">$outputs</span><span class="s2">"</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="nv">outputs</span><span class="o">=</span><span class="s1">'[{ "txid": "3962a06342fc62a733700d74c075a5d24c4f44f7108f6d9a318b66e92e3bdc72", "vout": 1 }]'</span>

bwallet-cli rpc lockunspent <span class="nv">$unlock</span> <span class="s2">"</span><span class="nv">$outputs</span><span class="s2">"</span>

<span class="c"># unlock all coins</span>
bwallet-cli rpc lockunspent <span class="nb">true</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">lockunspent</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">unlock</span><span class="p">,</span> <span class="nx">outputs</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>true
</code></pre></div>
<p>Lock or unlock specified transaction outputs. If no outputs are specified,
ALL coins will be unlocked (<code>unlock</code> only).</p>
<h3 id='params-27'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>unlock</td>
<td>Required</td>
<td>(bool) <code>true</code> = unlock coins, <code>false</code> = lock coins</td>
</tr>
<tr>
<td>2</td>
<td>outputs</td>
<td>Optional</td>
<td>Array of outputs to lock or unlock</td>
</tr>
</tbody></table>
<h2 id='listlockunspent'>listlockunspent</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{ "method": "listlockunspent" }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc listlockunspent
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">listlockunspent</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3962a06342fc62a733700d74c075a5d24c4f44f7108f6d9a318b66e92e3bdc72"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"vout"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Get list of currently locked (unspendable) outputs.
See <a href="#lockunspent">lockunspent</a> and <a href="#lock-coin-outpoints">lock-coin-outpoints</a>.</p>
<h3 id='params-28'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>None.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id='listreceivedbyaccount'>listreceivedbyaccount</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">minconf</span><span class="p">,</span> <span class="nx">includeEmpty</span><span class="p">,</span> <span class="nx">watchOnly</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">minconf</span><span class="o">=</span>1
<span class="nv">includeEmpty</span><span class="o">=</span><span class="nb">true
</span><span class="nv">watchOnly</span><span class="o">=</span><span class="nb">true</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "listreceivedbyaccount",
    "params": [ '</span><span class="nv">$minconf</span><span class="s1">', '</span><span class="nv">$includeEmpty</span><span class="s1">', '</span><span class="nv">$watchOnly</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc listreceivedbyaccount <span class="nv">$minconf</span> <span class="nv">$includeEmpty</span> <span class="nv">$watchOnly</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">listreceivedbyaccount</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">minconf</span><span class="p">,</span> <span class="nx">includeEmpty</span><span class="p">,</span> <span class="nx">watchOnly</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"involvesWatchonly"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hot"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">6.2500454</span><span class="p">,</span><span class="w">
    </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"involvesWatchonly"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">96.87650028</span><span class="p">,</span><span class="w">
    </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"involvesWatchonly"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"savings"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">9.37345432</span><span class="p">,</span><span class="w">
    </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Get balances for all accounts in wallet.</p>
<h3 id='params-29'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>minconf</td>
<td>Optional</td>
<td>Minimum confirmations required to count a transaction</td>
</tr>
<tr>
<td>2</td>
<td>includeEmpty</td>
<td>Optional</td>
<td>(bool) Whether to include accounts with zero balance</td>
</tr>
<tr>
<td>3</td>
<td>watchOnly</td>
<td>Optional</td>
<td>(bool) Whether to include watch-only addresses</td>
</tr>
</tbody></table>
<h2 id='listreceivedbyaddress'>listreceivedbyaddress</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">minconf</span><span class="p">,</span> <span class="nx">includeEmpty</span><span class="p">,</span> <span class="nx">watchOnly</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">minconf</span><span class="o">=</span>1
<span class="nv">includeEmpty</span><span class="o">=</span><span class="nb">false
</span><span class="nv">watchOnly</span><span class="o">=</span><span class="nb">false</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "listreceivedbyaddress",
    "params": [ '</span><span class="nv">$minconf</span><span class="s1">', '</span><span class="nv">$includeEmpty</span><span class="s1">', '</span><span class="nv">$watchOnly</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc listreceivedbyaddress <span class="nv">$minconf</span> <span class="nv">$includeEmpty</span> <span class="nv">$watchOnly</span> 
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">listreceivedbyaddress</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">minconf</span><span class="p">,</span> <span class="nx">includeEmpty</span><span class="p">,</span> <span class="nx">watchOnly</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"involvesWatchonly"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bcrt1ql8ll4v0u83uf3ghafr9f6c5slhnn7dfrxm499g"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00030033</span><span class="p">,</span><span class="w">
    </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">313</span><span class="p">,</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"involvesWatchonly"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bcrt1qlfeauahf7jdpruxm6f2vax2yu3xsdkkw2z7n9g"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00015496</span><span class="p">,</span><span class="w">
    </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">321</span><span class="p">,</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"involvesWatchonly"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bcrt1qlaawtlmdcfjdegghxvdh5pqphk5fjhlevsup7s"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">342.97828963</span><span class="p">,</span><span class="w">
    </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">348</span><span class="p">,</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="err">...</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"involvesWatchonly"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bcrt1ql797szp8tvdday5r3zpeepc8fjfk4qs09uaq7t"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00091418</span><span class="p">,</span><span class="w">
    </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">337</span><span class="p">,</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Get balances for all addresses in wallet.</p>
<h3 id='params-30'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>minconf</td>
<td>Optional</td>
<td>Minimum confirmations required to count a transaction</td>
</tr>
<tr>
<td>2</td>
<td>includeEmpty</td>
<td>Optional</td>
<td>(bool) Whether to include addresses with zero balance</td>
</tr>
<tr>
<td>3</td>
<td>watchOnly</td>
<td>Optional</td>
<td>(bool) Whether to include watch-only addresses</td>
</tr>
</tbody></table>
<h2 id='listsinceblock'>listsinceblock</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">block</span><span class="p">,</span> <span class="nx">minconf</span><span class="p">,</span> <span class="nx">watchOnly</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">block</span><span class="o">=</span><span class="s1">'26b5e76dcdfc51b94e8e09ca1cf55b453e6c542b7abb863df0a306c6f00ebc8e'</span>
<span class="nv">minconf</span><span class="o">=</span>1
<span class="nv">watchOnly</span><span class="o">=</span><span class="nb">false</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "listsinceblock",
    "params": [ "'</span><span class="nv">$block</span><span class="s1">'", '</span><span class="nv">$minconf</span><span class="s1">', '</span><span class="nv">$watchOnly</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc listsinceblock <span class="nv">$block</span> <span class="nv">$minconf</span> <span class="nv">$watchOnly</span> 
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">listsinceblock</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">block</span><span class="p">,</span> <span class="nx">minconf</span><span class="p">,</span> <span class="nx">watchOnly</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bcrt1q730jd9qryjjd7wqyc3aw72mu8u3804m3qxz3qe"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"receive"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00036954</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"vout"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">314</span><span class="p">,</span><span class="w">
      </span><span class="nl">"blockhash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"142abcc5469da7684c84404f93b247b7948dc36933cd438360f611d05f3c62b8"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"blockindex"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"blocktime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571760040</span><span class="p">,</span><span class="w">
      </span><span class="nl">"blockheight"</span><span class="p">:</span><span class="w"> </span><span class="mi">532</span><span class="p">,</span><span class="w">
      </span><span class="nl">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f5f496a6095f729755e22eec19484c0e2ea4b144ab266be722e0fe7e5a2ea98"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"walletconflicts"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571759982</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timereceived"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571759982</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bip125-replaceable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bcrt1qy86kqv3cxfqkemu4e7f6kzxzk2cyt6j6vsxptz"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"receive"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00050209</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"vout"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">316</span><span class="p">,</span><span class="w">
      </span><span class="nl">"blockhash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34d0385c667319c5225c7f82e025681bae2fb5df28809cc7cf432b491125c83c"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"blockindex"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"blocktime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571760040</span><span class="p">,</span><span class="w">
      </span><span class="nl">"blockheight"</span><span class="p">:</span><span class="w"> </span><span class="mi">530</span><span class="p">,</span><span class="w">
      </span><span class="nl">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9b7899e0800389aa293578ea14d03f9c7d0249faaced52c2120c20cde8f0479b"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"walletconflicts"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571759982</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timereceived"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571759982</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bip125-replaceable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bcrt1q8nnvw4h09u6avx4tn8gkrx4t9ayd56v86q7ceg"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"receive"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00037547</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"vout"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">316</span><span class="p">,</span><span class="w">
      </span><span class="nl">"blockhash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34d0385c667319c5225c7f82e025681bae2fb5df28809cc7cf432b491125c83c"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"blockindex"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"blocktime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571760040</span><span class="p">,</span><span class="w">
      </span><span class="nl">"blockheight"</span><span class="p">:</span><span class="w"> </span><span class="mi">530</span><span class="p">,</span><span class="w">
      </span><span class="nl">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"77a39583060aa3ff2a705d401fea0c07e77e95d66cc10b744dc95098cad1bee1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"walletconflicts"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571759981</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timereceived"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571759981</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bip125-replaceable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"lastblock"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20b062aa8ff8a1611b86016c8ba4f0cec0a6c55b69f1f0431190018bd23d5aec"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get all transactions in blocks since a block specified by hash, or all
transactions if no block is specifiied.</p>
<h3 id='params-31'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>block</td>
<td>Optional</td>
<td>Hash of earliest block to start listing from</td>
</tr>
<tr>
<td>2</td>
<td>minconf</td>
<td>Optional</td>
<td>Minimum confirmations required to count a transaction</td>
</tr>
<tr>
<td>3</td>
<td>watchOnly</td>
<td>Optional</td>
<td>(bool) Whether to include watch-only addresses</td>
</tr>
</tbody></table>
<h2 id='listtransactions'>listtransactions</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">account</span><span class="p">,</span> <span class="nx">count</span><span class="p">,</span> <span class="k">from</span><span class="p">,</span> <span class="nx">watchOnly</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">account</span><span class="o">=</span><span class="s1">'hot'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "listtransactions",
    "params": [ "'</span><span class="nv">$account</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc listtransactions <span class="nv">$account</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">listtransactions</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">account</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bcrt1qpqgnssrdfkfv9pkdj23c7k9w02x8n9ezv4nm3z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"receive"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00013937</span><span class="p">,</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"vout"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">406</span><span class="p">,</span><span class="w">
    </span><span class="nl">"blockhash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad44c048bc555d18f06d31065856ab3ea24c9a749d579f036aef102bddeabf9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"blockindex"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"blocktime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571760025</span><span class="p">,</span><span class="w">
    </span><span class="nl">"blockheight"</span><span class="p">:</span><span class="w"> </span><span class="mi">440</span><span class="p">,</span><span class="w">
    </span><span class="nl">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"675d4f09e1da5e9d8268de41ecdbb77795d738333caf6a7c86775211c19b6550"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"walletconflicts"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571759957</span><span class="p">,</span><span class="w">
    </span><span class="nl">"timereceived"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571759957</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bip125-replaceable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bcrt1qh7jclanaex66gpkr5x4duyd45nltxvpppcqnw6"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"send"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.00125648</span><span class="p">,</span><span class="w">
    </span><span class="nl">"vout"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">404</span><span class="p">,</span><span class="w">
    </span><span class="nl">"blockhash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"53441b98c5286ef75e9aa431b2dd44adbef840b04a3b6c07ca79ff6a5e599373"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"blockindex"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"blocktime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571760025</span><span class="p">,</span><span class="w">
    </span><span class="nl">"blockheight"</span><span class="p">:</span><span class="w"> </span><span class="mi">442</span><span class="p">,</span><span class="w">
    </span><span class="nl">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"725ca556002481e4445110fa4c67fb31d4fdf436e4939bf3c8fa7ff93b1b6c89"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"walletconflicts"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571759957</span><span class="p">,</span><span class="w">
    </span><span class="nl">"timereceived"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571759957</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bip125-replaceable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bcrt1qpc0fu2fl3hdhf0kaheta67gzdfmfe90ga27pr6"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"receive"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00044896</span><span class="p">,</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"vout"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">407</span><span class="p">,</span><span class="w">
    </span><span class="nl">"blockhash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"39e8e1d9f19389a3b92c5e024e5d7070fe48f4ca7bd0d045b119c09a155cebbf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"blockindex"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"blocktime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571760024</span><span class="p">,</span><span class="w">
    </span><span class="nl">"blockheight"</span><span class="p">:</span><span class="w"> </span><span class="mi">439</span><span class="p">,</span><span class="w">
    </span><span class="nl">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e346029655b10a9cd4df74d87d4001b1fd11ee7a6f53ab556cadb27ce160be14"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"walletconflicts"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571759957</span><span class="p">,</span><span class="w">
    </span><span class="nl">"timereceived"</span><span class="p">:</span><span class="w"> </span><span class="mi">1571759957</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bip125-replaceable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Get all recent transactions for specified account up to a limit, starting from
a specified index.</p>
<h3 id='params-32'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>account</td>
<td>Optional</td>
<td>Account name</td>
</tr>
<tr>
<td>2</td>
<td>count</td>
<td>Optional</td>
<td>Max number of transactions to return</td>
</tr>
<tr>
<td>3</td>
<td>from</td>
<td>Optional</td>
<td>Number of oldest transactions to skip</td>
</tr>
<tr>
<td>4</td>
<td>watchOnly</td>
<td>Optional</td>
<td>Whether to include watch-only addresses</td>
</tr>
</tbody></table>
<h2 id='listunspent'>listunspent</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">minconf</span><span class="p">,</span> <span class="nx">maxconf</span><span class="p">,</span> <span class="nx">addrs</span><span class="p">;</span>
<span class="nx">addrs</span><span class="o">=</span><span class="p">[</span><span class="dl">"</span><span class="s2">bcrt1qggre40we5qdeenzudq3yz0qxee8qc57s2fqygy</span><span class="dl">"</span><span class="p">];</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">minconf</span><span class="o">=</span>0
<span class="nv">maxconf</span><span class="o">=</span>20
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="nv">addrs</span><span class="o">=</span><span class="s1">'["bcrt1qggre40we5qdeenzudq3yz0qxee8qc57s2fqygy"]'</span>


curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "listunspent",
    "params": [ '</span><span class="nv">$minconf</span><span class="s1">', '</span><span class="nv">$maxconf</span><span class="s1">', '</span><span class="s2">"</span><span class="nv">$addrs</span><span class="s2">"</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="nv">addrs</span><span class="o">=</span><span class="s1">'["bcrt1qggre40we5qdeenzudq3yz0qxee8qc57s2fqygy"]'</span>

bwallet-cli rpc listunspent <span class="nv">$minconf</span> <span class="nv">$maxconf</span> <span class="nv">$addrs</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">listunspent</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">minconf</span><span class="p">,</span> <span class="nx">maxconf</span><span class="p">,</span> <span class="nx">addrs</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d07a4211a3633bedd737b850378872191c27fc6126dc8131c3b45f62611a7f36"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"vout"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bcrt1qggre40we5qdeenzudq3yz0qxee8qc57s2fqygy"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"scriptPubKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001442079abdd9a01b9ccc5c6822413c06ce4e0c53d0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">342.96788338</span><span class="p">,</span><span class="w">
    </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">313</span><span class="p">,</span><span class="w">
    </span><span class="nl">"spendable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"solvable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Get unsepnt transaction outputs from all addreses, or a specific set
of addresses.</p>
<h3 id='params-33'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>minconf</td>
<td>Optional</td>
<td>Minimum confirmations required to return tx</td>
</tr>
<tr>
<td>2</td>
<td>maxconf</td>
<td>Optional</td>
<td>Maximum confirmations required to return tx</td>
</tr>
<tr>
<td>3</td>
<td>addrs</td>
<td>Optional</td>
<td>Array of addresses to filter</td>
</tr>
</tbody></table>
<h2 id='move'>move</h2>
<p>Not implemented -- Deprecated in Bitcoin Core</p>
<h2 id='sendfrom'>sendfrom</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">fromaccount</span><span class="p">,</span> <span class="nx">tobitcoinaddress</span><span class="p">,</span> <span class="nx">amount</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">fromaccount</span><span class="o">=</span><span class="s1">'hot'</span>
<span class="nv">tobitcoinaddress</span><span class="o">=</span><span class="s1">'bcrt1qggre40we5qdeenzudq3yz0qxee8qc57s2fqygy'</span>
<span class="nv">amount</span><span class="o">=</span>0.0195
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "sendfrom",
    "params": [ "'</span><span class="nv">$fromaccount</span><span class="s1">'", "'</span><span class="nv">$tobitcoinaddress</span><span class="s1">'", '</span><span class="nv">$amount</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc sendfrom <span class="nv">$fromaccount</span> <span class="nv">$tobitcoinaddress</span> <span class="nv">$amount</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">sendfrom</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">fromaccount</span><span class="p">,</span> <span class="nx">tobitcoinaddress</span><span class="p">,</span> <span class="nx">amount</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>94f8a6dbaea9b5863d03d3b606c24e2e588d9e82564972148d54058660308e6a
</code></pre></div>
<p>Send Bitcoin from an account to an address.</p>
<h3 id='params-34'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>fromaccount</td>
<td>Required</td>
<td>Wallet account to spend outputs from</td>
</tr>
<tr>
<td>2</td>
<td>tobitcoinaddress</td>
<td>Required</td>
<td>Bitcoin address to send funds to</td>
</tr>
<tr>
<td>3</td>
<td>amount</td>
<td>Required</td>
<td>Amount (in BTC) to send</td>
</tr>
<tr>
<td>4</td>
<td>minconf</td>
<td>Optional</td>
<td>Minimum confirmations for output to be spent from</td>
</tr>
<tr>
<td>5</td>
<td>comment</td>
<td>Optional</td>
<td><em>not implemented in bcoin</em></td>
</tr>
<tr>
<td>6</td>
<td>comment_to</td>
<td>Optional</td>
<td><em>not implemented in bcoin</em></td>
</tr>
</tbody></table>
<h2 id='sendmany'>sendmany</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">fromaccount</span><span class="p">,</span> <span class="nx">outputs</span><span class="p">,</span> <span class="nx">minconf</span><span class="p">,</span> <span class="nx">label</span><span class="p">,</span> <span class="nx">subtractFee</span><span class="p">;</span>
<span class="nx">outputs</span><span class="o">=</span><span class="p">{</span><span class="dl">"</span><span class="s2">msSaQkCXyrEefbSH9TCSWNjnacTwGGc55d</span><span class="dl">"</span><span class="p">:</span> <span class="mf">0.123</span><span class="p">,</span> <span class="dl">"</span><span class="s2">moKaYJdRT19YUWSsfhnTQpo68wkVvzkk8y</span><span class="dl">"</span><span class="p">:</span> <span class="mf">0.321</span><span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">fromaccount</span><span class="o">=</span><span class="s1">'hot'</span>
<span class="nv">minconf</span><span class="o">=</span>1
<span class="nv">label</span><span class="o">=</span><span class="s2">"this_is_ignored"</span>
<span class="nv">subtractfee</span><span class="o">=</span><span class="nb">false</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="nv">outputs</span><span class="o">=</span><span class="s1">'{"msSaQkCXyrEefbSH9TCSWNjnacTwGGc55d": 0.123, "moKaYJdRT19YUWSsfhnTQpo68wkVvzkk8y": 0.321}'</span>

curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "sendmany",
    "params": [ "'</span><span class="nv">$fromaccount</span><span class="s1">'", '</span><span class="s2">"</span><span class="nv">$outputs</span><span class="s2">"</span><span class="s1">', '</span><span class="nv">$minconf</span><span class="s1">', "'</span><span class="nv">$label</span><span class="s1">'", '</span><span class="nv">$subtractfee</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="nv">outputs</span><span class="o">=</span><span class="s1">'{"msSaQkCXyrEefbSH9TCSWNjnacTwGGc55d": 0.123, "moKaYJdRT19YUWSsfhnTQpo68wkVvzkk8y": 0.321}'</span>

bwallet-cli rpc sendmany <span class="nv">$fromaccount</span> <span class="s2">"</span><span class="nv">$outputs</span><span class="s2">"</span> <span class="nv">$minconf</span> <span class="nv">$label</span> <span class="nv">$subtractfee</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">sendmany</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">fromaccount</span><span class="p">,</span> <span class="nx">outputs</span><span class="p">,</span> <span class="nx">minconf</span><span class="p">,</span> <span class="nx">label</span><span class="p">,</span> <span class="nx">subtractfee</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>121d1e44f8125f02433e96c7b672a34af00be9906895f0ee51aaf504f4d76b78
</code></pre></div>
<p>Send different amounts of Bitcoin from an account to multiple addresses. </p>
<h3 id='params-35'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>fromaccount</td>
<td>Required</td>
<td>Wallet account to spend outputs from</td>
</tr>
<tr>
<td>2</td>
<td>outputs</td>
<td>Required</td>
<td>Array of Bitcoin addresses and amounts to send</td>
</tr>
<tr>
<td>3</td>
<td>minconf</td>
<td>Optional</td>
<td>Minimum confirmations for output to be spent from</td>
</tr>
<tr>
<td>5</td>
<td>label</td>
<td>Optional</td>
<td><a href="#rpc-calls-wallet">Ignored but required if additional parameters are passed</a></td>
</tr>
<tr>
<td>6</td>
<td>subtractfee</td>
<td>Optional</td>
<td>(bool) Subtract the transaction fee equally from the output amounts</td>
</tr>
</tbody></table>
<h2 id='sendtoaddress'>sendtoaddress</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">address</span><span class="p">,</span> <span class="nx">amount</span><span class="p">,</span> <span class="nx">comment</span><span class="p">,</span> <span class="nx">comment_to</span><span class="p">,</span> <span class="nx">subtractFee</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">address</span><span class="o">=</span><span class="s1">'moKaYJdRT19YUWSsfhnTQpo68wkVvzkk8y'</span>
<span class="nv">amount</span><span class="o">=</span>1.01010101
<span class="nv">comment</span><span class="o">=</span><span class="s2">"this_is_ignored"</span>
<span class="nv">comment_to</span><span class="o">=</span><span class="s2">"this_is_ignored"</span>
<span class="nv">subtractfee</span><span class="o">=</span><span class="nb">true</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "sendtoaddress",
    "params": [ "'</span><span class="nv">$address</span><span class="s1">'", '</span><span class="nv">$amount</span><span class="s1">', "'</span><span class="nv">$comment</span><span class="s1">'", "'</span><span class="nv">$comment_to</span><span class="s1">'", '</span><span class="nv">$subtractfee</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc sendtoaddress <span class="nv">$address</span> <span class="nv">$amount</span> <span class="nv">$comment</span> <span class="nv">$commnt_to</span> <span class="nv">$subtractfee</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">sendtoaddress</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">address</span><span class="p">,</span> <span class="nx">amount</span><span class="p">,</span> <span class="nx">comment</span><span class="p">,</span> <span class="nx">comment_to</span><span class="p">,</span> <span class="nx">subtractfee</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>552006b288266ab26fa30d9048b758a469a4101fd8235eff2384141ca5cf604d
</code></pre></div>
<p>Send Bitcoin to an address.</p>
<h3 id='params-36'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>address</td>
<td>Required</td>
<td>Bitcoin address to send funds to</td>
</tr>
<tr>
<td>2</td>
<td>amount</td>
<td>Required</td>
<td>Amount (in BTC) to send</td>
</tr>
<tr>
<td>4</td>
<td>comment</td>
<td>Optional</td>
<td><a href="#rpc-calls-wallet">Ignored but required if additional parameters are passed</a></td>
</tr>
<tr>
<td>5</td>
<td>comment_to</td>
<td>Optional</td>
<td><a href="#rpc-calls-wallet">Ignored but required if additional parameters are passed</a></td>
</tr>
<tr>
<td>6</td>
<td>subtractfee</td>
<td>Optional</td>
<td>(bool) Subtract the transaction fee equally from the output amount</td>
</tr>
</tbody></table>
<h2 id='setaccount'>setaccount</h2>
<p>Not implemented </p>
<h2 id='settxfee'>settxfee</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">rate</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">rate</span><span class="o">=</span>0.00001
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "settxfee",
    "params": [ '</span><span class="nv">$rate</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc settxfee <span class="nv">$rate</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">settxfee</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">rate</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>true
</code></pre></div>
<p>Set the fee rate for all new transactions until the fee is
changed again, or set to <code>0</code> (will return to automatic fee).</p>
<h3 id='params-37'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>rate</td>
<td>Required</td>
<td>Fee rate in BTC/kB</td>
</tr>
</tbody></table>
<h2 id='signmessage'>signmessage</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">address</span><span class="p">,</span> <span class="nx">message</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">address</span><span class="o">=</span><span class="s1">'moKaYJdRT19YUWSsfhnTQpo68wkVvzkk8y'</span>
<span class="nv">message</span><span class="o">=</span><span class="s1">'Satoshi'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "signmessage",
    "params": [ "'</span><span class="nv">$address</span><span class="s1">'", "'</span><span class="nv">$message</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc signmessage <span class="nv">$address</span> <span class="nv">$message</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">signmessage</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">address</span><span class="p">,</span> <span class="nx">message</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>MEUCIQC5Zzr+JoenWHy7m9XxpbDVVeg3DvKvJVQNyYPvLOuB2gIgP/BT3dRItxarNbE8ajEoTI66q3eB4lo+/SLsp7bbP70=
</code></pre></div>
<p>Sign an arbitrary message with the private key corresponding to a
specified Bitcoin address in the wallet.</p>

<aside>Note: Due to behavior of some shells like bash, if your message contains spaces you may need to add additional quotes like this: <code>"'"$message"'"</code></aside>
<h3 id='params-38'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>address</td>
<td>Required</td>
<td>Wallet address to use for signing</td>
</tr>
<tr>
<td>2</td>
<td>message</td>
<td>Required</td>
<td>The message to sign</td>
</tr>
</tbody></table>
<h2 id='walletlock'>walletlock</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{ "method": "walletlock" }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc walletlock
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">walletlock</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>null
</code></pre></div>
<p>Locks the wallet by removing the decryption key from memory.
See <a href="#walletpassphrase">walletpassphrase</a>.</p>
<h3 id='params-39'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>None.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id='walletpassphrasechange'>walletpassphrasechange</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">old</span><span class="p">,</span> <span class="nx">passphrase</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">old</span><span class="o">=</span><span class="s1">'OneTwoThreeFour'</span>
<span class="nv">passphrase</span><span class="o">=</span><span class="s1">'CorrectHorseBatteryStaple'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "walletpassphrasechange",
    "params": [ "'</span><span class="nv">$old</span><span class="s1">'", "'</span><span class="nv">$passphrase</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc walletpassphrasechange <span class="nv">$old</span> <span class="nv">$passphrase</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">walletpassphrasechange</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">old</span><span class="p">,</span> <span class="nx">passphrase</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>null
</code></pre></div>
<p>Change the wallet encryption pasphrase</p>
<h3 id='params-40'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>old</td>
<td>Required</td>
<td>The current wallet passphrase</td>
</tr>
<tr>
<td>2</td>
<td>passphrase</td>
<td>Required</td>
<td>New passphrase</td>
</tr>
</tbody></table>
<h2 id='walletpassphrase'>walletpassphrase</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">passphrase</span><span class="p">,</span> <span class="nx">timeout</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">passphrase</span><span class="o">=</span><span class="s1">'CorrectHorseBatteryStaple'</span>
<span class="nb">timeout</span><span class="o">=</span>600
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "walletpassphrase",
    "params": [ "'</span><span class="nv">$passphrase</span><span class="s1">'", '</span><span class="nv">$timeout</span><span class="s1">' ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc walletpassphrase <span class="nv">$passphrase</span> <span class="nv">$timeout</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">walletpassphrase</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">passphrase</span><span class="p">,</span> <span class="nx">timeout</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>null
</code></pre></div>
<p>Store wallet decryption key in memory, unlocking the wallet keys.</p>
<h3 id='params-41'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>passphrase</td>
<td>Required</td>
<td>The current wallet passphrase</td>
</tr>
<tr>
<td>2</td>
<td>timeout</td>
<td>Required</td>
<td>Amount of time in seconds decryption key will stay in memory</td>
</tr>
</tbody></table>
<h2 id='removeprunedfunds'>removeprunedfunds</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">txid</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">txid</span><span class="o">=</span><span class="s1">'6478cafe0c91e5ed4c55ade3b1726209caa0d290c8a3a84cc345caad60073ad5'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "removeprunedfunds",
    "params": [ "'</span><span class="nv">$txid</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc removeprunedfunds <span class="nv">$txid</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">removeprunedfunds</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">txid</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>null
</code></pre></div>
<p>Deletes the specified transaction from the wallet database.
See <a href="#importprunedfunds">importprunedfunds</a>.</p>
<h3 id='params-42'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>txid</td>
<td>Required</td>
<td>txid of the transaction to remove</td>
</tr>
</tbody></table>
<h2 id='wallet-getmemoryinfo'>wallet getmemoryinfo</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{ "method": "getmemoryinfo" }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc getmemoryinfo
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">getmemoryinfo</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">133</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsHeap"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsHeapTotal"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
  </span><span class="nl">"nativeHeap"</span><span class="p">:</span><span class="w"> </span><span class="mi">112</span><span class="p">,</span><span class="w">
  </span><span class="nl">"external"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get information about memory usage.
Identical to node RPC call <a href="#getmemoryinfo">getmemoryinfo</a>.</p>
<h3 id='params-43'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>None.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id='wallet-setloglevel'>wallet setloglevel</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">level</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--vars"><code><span class="nv">level</span><span class="o">=</span><span class="s1">'debug'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "method": "setloglevel",
    "params": [ "'</span><span class="nv">$level</span><span class="s1">'" ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc setloglevel <span class="nv">$level</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">setloglevel</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">level</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>null
</code></pre></div>
<p>Change Log level of the running node.</p>

<p>Levels are: <code>NONE</code>, <code>ERROR</code>, <code>WARNING</code>, <code>INFO</code>, <code>DEBUG</code>, <code>SPAM</code></p>
<h3 id='params-44'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>level</td>
<td>Required</td>
<td>Level for the logger</td>
</tr>
</tbody></table>
<h2 id='wallet-stop'>wallet stop</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nv">$walletrpcurl</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{ "method": "stop" }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>bwallet-cli rpc stop
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">stop</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON &quot;result&quot; like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>"Stopping."
</code></pre></div>
<p>Closes the wallet database.</p>
<h3 id='params-45'>Params</h3>
<table><thead>
<tr>
<th>N.</th>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>None.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h1 id='sockets'>Sockets</h1>
<p>Socket events use the socket.io protocol.</p>

<p>Socket IO implementations:</p>

<ul>
<li>JS: <a href="https://github.com/socketio/socket.io-client">https://github.com/socketio/socket.io-client</a></li>
<li>Python: <a href="https://github.com/miguelgrinberg/python-socketio">https://github.com/miguelgrinberg/python-socketio</a></li>
<li>Go: <a href="https://github.com/googollee/go-socket.io">https://github.com/googollee/go-socket.io</a></li>
<li>C++: <a href="https://github.com/socketio/socket.io-client-cpp">https://github.com/socketio/socket.io-client-cpp</a></li>
<li>bsock: <a href="https://github.com/bcoin-org/bsock">https://github.com/bcoin-org/bsock</a> (recommended!)</li>
</ul>

<p><code>bsock</code> is a minimal websocket-only implementation of the socket.io protocol,
complete with ES6/ES7 features, developed by the bcoin team. <code>bsock</code> is used
throughout the bcoin ecosystem including
<a href="https://github.com/bcoin-org/bclient"><code>bclient</code></a> and <a href="https://github.com/bpanel-org/bpanel"><code>bpanel</code></a>.
Examples below describe usage with <code>bsock</code> specifically.</p>

<p>For a deeper dive into events and sockets in bcoin, including a tutorial
on using <code>bsock</code> and <code>bclient</code>, see the <a href="https://bcoin.io/guides/events.html">bcoin.io Events and Sockets Guide.</a></p>
<h1 id='node-sockets'>Node Sockets</h1><h2 id='node-sockets-bsock'>Node sockets - bsock</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="o">(</span>See JavaScript example<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="o">(</span>See JavaScript example<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">ChainEntry</span><span class="p">,</span> <span class="nx">TX</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">bsock</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bsock</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">nodeSocket</span> <span class="o">=</span> <span class="nx">bsock</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="dl">'</span><span class="s1">&lt;network node RPC port&gt;</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// Authenticate and subscribe to channels after connection</span>
<span class="nx">nodeSocket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">connect</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Auth</span>
  <span class="k">await</span> <span class="nx">nodeSocket</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="dl">'</span><span class="s1">auth</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">&lt;api-key&gt;</span><span class="dl">'</span><span class="p">);</span>

  <span class="c1">// Subscribe to chain events to listen for blocks</span>
  <span class="k">await</span> <span class="nx">nodeSocket</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="dl">'</span><span class="s1">watch chain</span><span class="dl">'</span><span class="p">);</span>

  <span class="c1">// Subscribe to mempool events to listen for transactions</span>
  <span class="k">await</span> <span class="nx">nodeSocket</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="dl">'</span><span class="s1">watch mempool</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// Listen for new blocks -- from chain channel</span>
<span class="nx">nodeSocket</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="dl">'</span><span class="s1">chain connect</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">raw</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Node -- Chain Connect Event:</span><span class="se">\n</span><span class="dl">'</span><span class="p">,</span> <span class="nx">ChainEntry</span><span class="p">.</span><span class="nx">fromRaw</span><span class="p">(</span><span class="nx">raw</span><span class="p">));</span>
<span class="p">});</span>

<span class="c1">// Listen for new transactions -- from mempool channel (bloom filter required)</span>
<span class="nx">nodeSocket</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="dl">'</span><span class="s1">tx</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">raw</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Node -- TX Event:</span><span class="se">\n</span><span class="dl">'</span><span class="p">,</span> <span class="nx">TX</span><span class="p">.</span><span class="nx">fromRaw</span><span class="p">(</span><span class="nx">raw</span><span class="p">));</span>
<span class="p">});</span>
</code></pre></div><h3 id='node-socket-authentication'>Node Socket Authentication</h3>
<p>Authentication with the API server must be completed before any other events
will be accepted.</p>
<h3 id='joining-a-channel'>Joining a channel</h3>
<p>Instead of joining wallets, the node server offers two &quot;channels&quot; of events:
<code>chain</code> and <code>mempool</code>. When the node has no mempool (for example in SPV mode)
transaction events will be relayed from the pool of peers instead. In both
channels, transactions are only returned if they match a bloom filter sent in
advance (see <a href="#code-set-filter-code">set filter</a>).</p>
<h3 id='listening-for-events'>Listening for events</h3>
<p>Unlike the wallet events, data returned by node events are not converted into
JSON format. The results are raw Buffers or arrays of Buffers. Be sure to observe
how the examples use library modules from bcoin and <code>fromRaw()</code> methods to recreate
the objects.</p>
<h3 id='making-calls'>Making calls</h3>
<p>The node socket server can also respond to more calls than the wallet socket
server.</p>
<h2 id='node-sockets-bclient'>Node sockets - bclient</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="o">(</span>See JavaScript example<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="o">(</span>See JavaScript example<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">NodeClient</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bclient</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="p">{</span><span class="nx">Network</span><span class="p">,</span> <span class="nx">ChainEntry</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">nodeOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">rpcPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">&lt;api-key&gt;</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">nodeClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeClient</span><span class="p">(</span><span class="nx">nodeOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Connection and both channel subscriptions handled by opening client</span>
  <span class="k">await</span> <span class="nx">nodeClient</span><span class="p">.</span><span class="nx">open</span><span class="p">();</span>
<span class="p">})();</span>

<span class="c1">// Listen for new blocks</span>
<span class="nx">nodeClient</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="dl">'</span><span class="s1">chain connect</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">raw</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Node -- Chain Connect Event:</span><span class="se">\n</span><span class="dl">'</span><span class="p">,</span> <span class="nx">ChainEntry</span><span class="p">.</span><span class="nx">fromRaw</span><span class="p">(</span><span class="nx">raw</span><span class="p">));</span>
<span class="p">});</span>
</code></pre></div>
<p><code>bclient</code> abstracts away the connection, subscription, and authentication steps
to make listening for events much easier.</p>
<h2 id='node-sockets-calls'>Node sockets - Calls</h2><h2 id='code-watch-chain-code'><code>watch chain</code></h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="o">(</span>See JavaScript example<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="o">(</span>See JavaScript example<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">bsock</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bsock</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">nodeSocket</span> <span class="o">=</span> <span class="nx">bsock</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="dl">'</span><span class="s1">&lt;network node RPC port&gt;</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">nodeSocket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">connect</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Auth</span>
  <span class="k">await</span> <span class="nx">nodeSocket</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="dl">'</span><span class="s1">auth</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">&lt;api-key&gt;</span><span class="dl">'</span><span class="p">);</span>

  <span class="c1">// Subscribe to chain events to listen for blocks</span>
  <span class="k">await</span> <span class="nx">nodeSocket</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="dl">'</span><span class="s1">watch chain</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Subscribe to chain events:</p>

<p><a href="#code-chain-connect-code"><code>chain connect</code></a></p>

<p><a href="#code-block-connect-code"><code>block connect</code></a></p>

<p><a href="#code-chain-disconnect-code"><code>chain disconnect</code></a></p>

<p><a href="#code-block-disconnect-code"><code>block disconnect</code></a></p>

<p><a href="#code-chain-reset-code"><code>chain reset</code></a></p>

<p>Unsubscribe by calling <code>unwatch chain</code>.</p>
<h2 id='code-watch-mempool-code'><code>watch mempool</code></h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="o">(</span>See JavaScript example<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="o">(</span>See JavaScript example<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">bsock</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bsock</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">nodeSocket</span> <span class="o">=</span> <span class="nx">bsock</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="dl">'</span><span class="s1">&lt;network node RPC port&gt;</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">nodeSocket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">connect</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Auth</span>
  <span class="k">await</span> <span class="nx">nodeSocket</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="dl">'</span><span class="s1">auth</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">&lt;api-key&gt;</span><span class="dl">'</span><span class="p">);</span>

  <span class="c1">// Subscribe to chain events to listen for blocks</span>
  <span class="k">await</span> <span class="nx">nodeSocket</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="dl">'</span><span class="s1">watch mempool</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Subscribe to mempool/pool events:</p>

<p><a href="#node-code-tx-code"><code>tx</code></a></p>

<p>Unsubscribe by calling <code>unwatch mempool</code>.</p>
<h2 id='code-set-filter-code'><code>set filter</code></h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="o">(</span>See JavaScript example<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="o">(</span>See JavaScript example<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">Address</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="p">{</span><span class="nx">BloomFilter</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bfilter</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">bsock</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bsock</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">nodeSocket</span> <span class="o">=</span> <span class="nx">bsock</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="dl">'</span><span class="s1">&lt;network node RPC port&gt;</span><span class="dl">'</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Authentication required</span>

  <span class="c1">// Create new Bloom filter with standard false-positive parameters</span>
  <span class="kd">const</span> <span class="nx">filter</span> <span class="o">=</span> <span class="nx">BloomFilter</span><span class="p">.</span><span class="nx">fromRate</span><span class="p">(</span><span class="mi">20000</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">,</span> <span class="nx">BloomFilter</span><span class="p">.</span><span class="nx">flags</span><span class="p">.</span><span class="nx">ALL</span><span class="p">);</span>

  <span class="c1">// Add address hash to Bloom filter</span>
  <span class="kd">const</span> <span class="nx">addr</span> <span class="o">=</span> <span class="nx">Address</span><span class="p">.</span><span class="nx">fromString</span><span class="p">(</span><span class="dl">'</span><span class="s1">2NGZrVvZG92qGYqzTLjCAewvPZ7JE8S8VxE</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">filter</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">addr</span><span class="p">.</span><span class="nx">getHash</span><span class="p">());</span>

  <span class="c1">// Send the entire serialized BloomFilter to server.</span>
  <span class="nx">nodeSocket</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="dl">'</span><span class="s1">set filter</span><span class="dl">'</span><span class="p">,</span> <span class="nx">filter</span><span class="p">.</span><span class="nx">toRaw</span><span class="p">());</span>
<span class="p">})();</span>
</code></pre></div>
<p>Load a bloom filter to the node socket server. Only transactions matching the filter
will be returned. Applies to node <a href="#node-code-tx-code"><code>tx</code></a> events and the array
of transactions returned by the <a href="#code-block-connect-code"><code>block connect</code></a> event.</p>
<h2 id='code-add-filter-code'><code>add filter</code></h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="o">(</span>See JavaScript example<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="o">(</span>See JavaScript example<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">Address</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">bsock</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bsock</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">nodeSocket</span> <span class="o">=</span> <span class="nx">bsock</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="dl">'</span><span class="s1">&lt;network node RPC port&gt;</span><span class="dl">'</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Authentication required</span>
  <span class="c1">// Bloom filter set required</span>

  <span class="c1">// Get address hash</span>
  <span class="kd">const</span> <span class="nx">addr</span> <span class="o">=</span> <span class="nx">Address</span><span class="p">.</span><span class="nx">fromString</span><span class="p">(</span><span class="dl">'</span><span class="s1">mp33NDe153Umb4AbRgPDFKyKmmkYEVx1fX</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

  <span class="c1">// Send to server to add to filter.</span>
  <span class="nx">nodeSocket</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="dl">'</span><span class="s1">add filter</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">addr</span><span class="p">.</span><span class="nx">getHash</span><span class="p">()]);</span>
<span class="p">})();</span>
</code></pre></div>
<p>Add an array of Buffers to the existing Bloom filter. <a href="#code-set-filter-code"><code>set filter</code></a>
required in advance.</p>
<h2 id='code-reset-filter-code'><code>reset filter</code></h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="o">(</span>See JavaScript example<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="o">(</span>See JavaScript example<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">bsock</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bsock</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">nodeSocket</span> <span class="o">=</span> <span class="nx">bsock</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="dl">'</span><span class="s1">&lt;network node RPC port&gt;</span><span class="dl">'</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Authentication required</span>
  <span class="c1">// Bloom filter set required</span>

  <span class="nx">nodeSocket</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="dl">'</span><span class="s1">reset filter</span><span class="dl">'</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<p>Resets the Bloom filter on the server to an empty buffer.</p>
<h2 id='code-get-tip-code'><code>get tip</code></h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="o">(</span>See JavaScript example<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="o">(</span>See JavaScript example<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">ChainEntry</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">bsock</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bsock</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">nodeSocket</span> <span class="o">=</span> <span class="nx">bsock</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="dl">'</span><span class="s1">&lt;network node RPC port&gt;</span><span class="dl">'</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Authentication required</span>

  <span class="kd">const</span> <span class="nx">tip</span> <span class="o">=</span> <span class="nx">nodeSocket</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="dl">'</span><span class="s1">get tip</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">ChainEntry</span><span class="p">.</span><span class="nx">fromRaw</span><span class="p">(</span><span class="nx">tip</span><span class="p">));</span>
<span class="p">})();</span>
</code></pre></div>
<p>Returns the chain tip.</p>
<h2 id='code-get-entry-code'><code>get entry</code></h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="o">(</span>See JavaScript example<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="o">(</span>See JavaScript example<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">ChainEntry</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">bsock</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bsock</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">nodeSocket</span> <span class="o">=</span> <span class="nx">bsock</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="dl">'</span><span class="s1">&lt;regtest node RPC port&gt;</span><span class="dl">'</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Authentication required</span>

  <span class="c1">// Get the regtest genesis block by REVERSE hash</span>
  <span class="kd">const</span> <span class="nx">hash</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="dl">'</span><span class="s1">06226e46111a0b59caaf126043eb5bbf28c34f3a5e332a1fc7b2b73cf188910f</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">hex</span><span class="dl">'</span><span class="p">)</span>
  <span class="kd">const</span> <span class="nx">entryByHash</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">nodeSocket</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="dl">'</span><span class="s1">get entry</span><span class="dl">'</span><span class="p">,</span> <span class="nx">hash</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">ChainEntry</span><span class="p">.</span><span class="nx">fromRaw</span><span class="p">(</span><span class="nx">entryByHash</span><span class="p">));</span>

  <span class="c1">// Get block at height 5</span>
  <span class="kd">const</span> <span class="nx">entryByHeight</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">nodeSocket</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="dl">'</span><span class="s1">get entry</span><span class="dl">'</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">ChainEntry</span><span class="p">.</span><span class="nx">fromRaw</span><span class="p">(</span><span class="nx">entryByHeight</span><span class="p">));</span>
<span class="p">})();</span>
</code></pre></div>
<p>Returns a chain entry requested by little-endian block hash or by integer height.
No response if entry is not found.</p>
<h2 id='code-get-hashes-code'><code>get hashes</code></h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="o">(</span>See JavaScript example<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="o">(</span>See JavaScript example<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">bsock</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bsock</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">nodeSocket</span> <span class="o">=</span> <span class="nx">bsock</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="dl">'</span><span class="s1">&lt;network node RPC port&gt;</span><span class="dl">'</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Authentication required</span>

  <span class="c1">// Get all block hashes from height 10 through 20</span>
  <span class="kd">const</span> <span class="nx">hashes</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">nodeSocket</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="dl">'</span><span class="s1">get hashes</span><span class="dl">'</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">hashes</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<p>Returns an array of block hashes (as Buffers) in the specified range of height
(inclusive).</p>
<h2 id='code-estimate-fee-code'><code>estimate fee</code></h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="o">(</span>See JavaScript example<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="o">(</span>See JavaScript example<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">bsock</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bsock</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">nodeSocket</span> <span class="o">=</span> <span class="nx">bsock</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="dl">'</span><span class="s1">&lt;network node RPC port&gt;</span><span class="dl">'</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Authentication required</span>

  <span class="c1">// Request fee estimation for inclusion within 6 blocks</span>
  <span class="kd">const</span> <span class="nx">estimate</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">nodeSocket</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="dl">'</span><span class="s1">estimate fee</span><span class="dl">'</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">estimate</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<p>Returns an estimated fee rate (in satoshis per kB) necessary to include a
transaction in the specified number of blocks.</p>
<h2 id='code-send-code'><code>send</code></h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="o">(</span>See JavaScript example<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="o">(</span>See JavaScript example<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">bsock</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bsock</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">nodeSocket</span> <span class="o">=</span> <span class="nx">bsock</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="dl">'</span><span class="s1">&lt;network node RPC port&gt;</span><span class="dl">'</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Authentication required</span>

  <span class="c1">// Send raw transaction</span>
  <span class="kd">const</span> <span class="nx">rawtx</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span>
    <span class="dl">'</span><span class="s1">01000000018613693410cbaba5aec0d2660fa17efa70bc6e6951a190f61b5c7096c2b58</span><span class="dl">'</span> <span class="o">+</span>
    <span class="dl">'</span><span class="s1">10f000000006a47304402202e6bc4acbcc6dc823cd188e7d4179ff2ebdee0bad1b2ef66</span><span class="dl">'</span> <span class="o">+</span>
    <span class="dl">'</span><span class="s1">21b73e9f28145a7e022051fdfe89c4322312038eb81193665b688b002c15d6b2ca8a5a1</span><span class="dl">'</span> <span class="o">+</span>
    <span class="dl">'</span><span class="s1">8505e90918ba20121036297333416f91d1db918882ec637c009f180b1f54b7c21663c2a</span><span class="dl">'</span> <span class="o">+</span>
    <span class="dl">'</span><span class="s1">53df48e09e57ffffffff02809698000000000017a9147bd7f36e8f4504f4eaf9ab0a74d</span><span class="dl">'</span> <span class="o">+</span>
    <span class="dl">'</span><span class="s1">65f3d2995e8d887ec496d29010000001976a914c1a47957fda3fdba2a7b5761f86c1dc4</span><span class="dl">'</span> 
    <span class="dl">'</span><span class="s1">03e23f8f88ac00000000</span><span class="dl">'</span><span class="p">,</span>
    <span class="dl">'</span><span class="s1">hex</span><span class="dl">'</span>
  <span class="p">);</span>
  <span class="nx">nodeSocket</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="dl">'</span><span class="s1">send</span><span class="dl">'</span><span class="p">,</span> <span class="nx">rawtx</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<p>Send a raw transaction (as Buffer) to node server to broadcast. Server will attempt
to broadcast the transaction without any checks.</p>
<h2 id='code-rescan-code'><code>rescan</code></h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="o">(</span>See JavaScript example<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="o">(</span>See JavaScript example<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">bsock</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bsock</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">nodeSocket</span> <span class="o">=</span> <span class="nx">bsock</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="dl">'</span><span class="s1">&lt;regtest node RPC port&gt;</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// Establish a socket hook to process the filter-matched blocks and transactions</span>
<span class="nx">nodeSocket</span><span class="p">.</span><span class="nx">hook</span><span class="p">(</span><span class="dl">'</span><span class="s1">block rescan</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">entry</span><span class="p">,</span> <span class="nx">txs</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Do something (like update your wallet DB)</span>
<span class="p">});</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Authentication required</span>
  <span class="c1">// Bloom filter set required</span>

  <span class="c1">// Rescan the blockchain from height 5</span>
  <span class="kd">const</span> <span class="nx">entry</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">nodeSocket</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="dl">'</span><span class="s1">rescan</span><span class="dl">'</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div>
<p>Rescan the chain from the specified integer height OR little-endian block
hash (as Buffer). Requires Bloom filter. Returns a call <em>back to the client</em>
after scanning each block:</p>

<p><code>socket.call(&#39;block rescan&#39;, block, txs)</code></p>

<p>Where <code>block</code> is a raw <code>ChainEntry</code> and <code>txs</code> is an array of filter-matched
transactions (as Buffers).</p>

<p>Note that this is NOT a wallet rescan, but the returned data can be used by a
client-side wallet to update its state.</p>
<h2 id='node-sockets-events'>Node sockets - Events</h2><h2 id='code-chain-connect-code'><code>chain connect</code></h2>
<blockquote>
<p>Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code># ChainEntry.fromRaw(raw)
{
  hash:
   '5e3b0f5ea3eb2305936191c7255625abee9890fb68625ca2279647533c7eac35',
  version: '30000001',
  prevBlock:
   '5e585c5828132bead36f684ab4e2d23e78d563ab743081823d3a96c0077885b5',
  merkleRoot:
   '2090e1be81e0d9f740bd68bc42ab790cfc3edb8ce04451ff88dda50107bba103',
  time: 1553614114,
  bits: 545259519,
  nonce: 0,
  height: 234,
  chainwork:
   '00000000000000000000000000000000000000000000000000000000000001d6'
}
</code></pre></div><h3 id='channel-code-chain-code'>Channel: <code>chain</code></h3>
<p>Emitted when a block is added to the chain. Returns raw <code>ChainEntry</code> of new
block.</p>
<h2 id='code-block-connect-code'><code>block connect</code></h2>
<blockquote>
<p>Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code># ChainEntry.fromRaw(raw), txs
{ 
  hash:
   '5e3b0f5ea3eb2305936191c7255625abee9890fb68625ca2279647533c7eac35',
  version: '30000001',
  prevBlock:
   '5e585c5828132bead36f684ab4e2d23e78d563ab743081823d3a96c0077885b5',
  merkleRoot:
   '2090e1be81e0d9f740bd68bc42ab790cfc3edb8ce04451ff88dda50107bba103',
  time: 1553614114,
  bits: 545259519,
  nonce: 0,
  height: 234,
  chainwork:
   '00000000000000000000000000000000000000000000000000000000000001d6'
}

[
  &lt;Buffer 01 00 00 00 00 01 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ... &gt;,
  &lt;Buffer 01 00 00 00 01 2f 32 30 94 24 88 42 4e b8 e4 08 9d 0d aa ee 3a  ... &gt;,
  &lt;Buffer 01 00 00 00 01 2f 9e 7d 93 16 1c 0f 0a 48 93 79 63 a8 2c 9f 6c  ... &gt;,
  &lt;Buffer 01 00 00 00 01 e2 47 a2 d1 2b 90 03 39 94 09 f2 bf d9 7a ff 6b  ... &gt;
]
</code></pre></div><h3 id='channel-code-chain-code-2'>Channel: <code>chain</code></h3>
<p>Emitted when a block is added to the chain. Returns raw <code>ChainEntry</code> of new
block. If a <a href="#code-set-filter-code">Bloom filter has been loaded in advance</a>,
this call will also return an array of filter-matching transactions (as raw
Buffers).</p>
<h2 id='code-chain-disconnect-code'><code>chain disconnect</code></h2>
<blockquote>
<p>Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code># ChainEntry.fromRaw(raw)
{
  hash:
   '0fcf0745e15e9b05098e7d82628c2b3e3693a26779ecf18b728e2acbbb2c9d2f',
  version: '30000001',
  prevBlock:
   '0d60d46a80201c8d50fb62bb8ff73dec62f0f90de6d14c0419ab57e06d46f888',
  merkleRoot:
   '0112fe4c48685b8bee773a939b3a5c1361e4c7fc0f9c1b7a0ee310be9431b12a',
  time: 1553784886,
  bits: 545259519,
  nonce: 0,
  height: 229,
  chainwork:
   '00000000000000000000000000000000000000000000000000000000000001cc'
}
</code></pre></div><h3 id='channel-code-chain-code-3'>Channel: <code>chain</code></h3>
<p>Emitted when a block is removed from the chain. Returns raw <code>ChainEntry</code> of the
block being removed.</p>
<h2 id='code-block-disconnect-code'><code>block disconnect</code></h2>
<p>Identical to <a href="#code-chain-disconnect-code"><code>chain disconnect</code></a></p>
<h2 id='code-chain-reset-code'><code>chain reset</code></h2>
<blockquote>
<p>Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code># ChainEntry.fromRaw(raw)
{ 
  hash:
   '7b3e9c3b8ea3924f44a1c3ac8b539be1a019cb1d5c384cb603aa99f44c8f9c55',
  version: '30000001',
  prevBlock:
   '4a1871311ec860a82dc56d0b198757217b751458e03f5bbe557685d1e883c9fb',
  merkleRoot:
   '0fffb562f0aba5edd566047b4a226328a2284a361391ef477b9351f39a472771',
  time: 1553783915,
  bits: 545259519,
  nonce: 1,
  height: 226,
  chainwork:
   '00000000000000000000000000000000000000000000000000000000000001c6'
}
</code></pre></div><h3 id='channel-code-chain-code-4'>Channel: <code>chain</code></h3>
<p>Returns raw <code>ChainEntry</code> of the new current tip.</p>
<h2 id='node-code-tx-code'>Node <code>tx</code></h2>
<blockquote>
<p>Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code> # TX.fromRaw(raw)
 {
  hash:
   'c6ff80856c192179f1ee5a9462dcf9992fa145fc16e7332ead0dd58bdd8c5e12',
  witnessHash:
   'c6ff80856c192179f1ee5a9462dcf9992fa145fc16e7332ead0dd58bdd8c5e12',
  size: 223,
  virtualSize: 223,
  value: '49.999955',
  fee: '0.0',
  rate: '0.0',
  minFee: '0.00000223',
  height: -1,
  block: null,
  time: 0,
  date: null,
  index: -1,
  version: 1,
  inputs:
   [ { type: 'pubkeyhash',
       subtype: null,
       address:
        &lt;Address: type=pubkeyhash version=-1 str=1EMhzKJsFARX1To4nf8ZSkEitsSu1uPAAQ&gt;,
       script:
        &lt;Script: 0x47 0x304402201619988d47c70c0834bd0c0c407b116654f0fb29faabc68129ab66487ca86ba802204a683fa071f177db960b9bd98e62703c3cb1a7a0888ccc41ee854cb0633dcfe501 0x21 0x02c9e389af9245e7e38c64c46465d6d281e7cc822e909f20454dada561c47e0d3e&gt;,
       witness: &lt;Witness: &gt;,
       redeem: null,
       sequence: 4294967295,
       prevout:
        &lt;Outpoint: a0b3d51f320493660af2f92171f1ed01bc1e85e1c66e2785fe42cb20069b4fb8/0&gt;,
       coin: null } ],
  outputs:
   [ { type: 'scripthash',
       value: '0.1',
       script:
        &lt;Script: OP_HASH160 0x14 0x7bd7f36e8f4504f4eaf9ab0a74d65f3d2995e8d8 OP_EQUAL&gt;,
       address:
        &lt;Address: type=scripthash version=-1 str=3Cyqjfs5KaLzS5mMsBzznwN9SAx814WVe2&gt; },
     { type: 'pubkeyhash',
       value: '49.899955',
       script:
        &lt;Script: OP_DUP OP_HASH160 0x14 0x31cb0ced3ff113b82e5e7d935a5c0e23a9f659c3 OP_EQUALVERIFY OP_CHECKSIG&gt;,
       address:
        &lt;Address: type=pubkeyhash version=-1 str=15YHMbY1rFgss64CaqMZyGVDUqZKqHHetM&gt; } ],
  locktime: 0
}
</code></pre></div><h3 id='channel-code-mempool-code'>Channel: <code>mempool</code></h3>
<p>Emitted when a transaction that matches a previously set Bloom filter is received
by the node server. Returns transaction as raw Buffer.</p>
<h1 id='wallet-sockets'>Wallet Sockets</h1><h2 id='wallet-sockets-bsock'>Wallet sockets - bsock</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="o">(</span>See JavaScript example<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="o">(</span>See JavaScript example<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">bsock</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bsock</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">walletSocket</span> <span class="o">=</span> <span class="nx">bsock</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="dl">'</span><span class="s1">&lt;network wallet RPC port&gt;</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// Authenticate and join wallet after connection to listen for events</span>
<span class="nx">walletSocket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">connect</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Auth</span>
  <span class="k">await</span> <span class="nx">walletSocket</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="dl">'</span><span class="s1">auth</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">&lt;api-key&gt;</span><span class="dl">'</span><span class="p">);</span>

  <span class="c1">// Join - All wallets</span>
  <span class="k">await</span> <span class="nx">walletSocket</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="dl">'</span><span class="s1">join</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">*</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">&lt;admin token&gt;</span><span class="dl">'</span><span class="p">);</span>

  <span class="c1">// Join - Specific wallet</span>
  <span class="k">await</span> <span class="nx">walletSocket</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="dl">'</span><span class="s1">join</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">&lt;wallet id&gt;</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">&lt;wallet token&gt;</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// Listen for new transactions</span>
<span class="nx">walletSocket</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="dl">'</span><span class="s1">tx</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">walletID</span><span class="p">,</span> <span class="nx">details</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Wallet -- TX Event, Wallet ID:</span><span class="se">\n</span><span class="dl">'</span><span class="p">,</span> <span class="nx">walletID</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Wallet -- TX Event, TX Details:</span><span class="se">\n</span><span class="dl">'</span><span class="p">,</span> <span class="nx">details</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// Leave</span>
<span class="nx">walletSocket</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="dl">'</span><span class="s1">leave</span><span class="dl">'</span><span class="p">,</span> <span class="o">&lt;</span><span class="nx">wallet</span> <span class="nx">id</span><span class="o">&gt;</span><span class="p">);</span>
</code></pre></div><h3 id='wallet-socket-authentication'>Wallet Socket Authentication</h3>
<p>Authentication with the API server must be completed before any other events
will be accepted.</p>
<h3 id='joining-a-wallet'>Joining a wallet</h3>
<p>After creating a websocket and authing with the server, you must send a <code>join</code>
event to listen for events on a wallet. Join all wallets by passing <code>&#39;*&#39;</code>.
Leave a wallet with the <code>leave</code> event.
Wallet or admin token is required if <code>wallet-auth</code> is <code>true</code>.</p>
<h3 id='listening-for-events'>Listening for events</h3>
<p>All wallet events return the <code>wallet-id</code> in addition to the JSON data described below.</p>
<h2 id='wallet-sockets-bclient'>Wallet sockets - bclient</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="o">(</span>See JavaScript example<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="o">(</span>See JavaScript example<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">WalletClient</span><span class="p">,</span> <span class="nx">Network</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bcoin</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">Network</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">regtest</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">walletOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">network</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">walletPort</span><span class="p">,</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">&lt;api-key&gt;</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">walletClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WalletClient</span><span class="p">(</span><span class="nx">walletOptions</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Connection and auth handled by opening client</span>
  <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">open</span><span class="p">();</span>
  <span class="k">await</span> <span class="nx">walletClient</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="dl">'</span><span class="s1">*</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">&lt;admin token&gt;</span><span class="dl">'</span><span class="p">);</span>
<span class="p">})();</span>

<span class="c1">// Listen for new transactions</span>
<span class="nx">walletClient</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="dl">'</span><span class="s1">tx</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">walletID</span><span class="p">,</span> <span class="nx">details</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Wallet -- TX Event, Wallet ID:</span><span class="se">\n</span><span class="dl">'</span><span class="p">,</span> <span class="nx">walletID</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Wallet -- TX Event, TX Details:</span><span class="se">\n</span><span class="dl">'</span><span class="p">,</span> <span class="nx">details</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// Leave all wallets</span>
<span class="nx">walletClient</span><span class="p">.</span><span class="nx">leave</span><span class="p">(</span><span class="dl">'</span><span class="s1">&lt;wallet id&gt;</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div>
<p><code>bclient</code> abstracts away the connection and authentication steps to make listening
for events much easier.</p>
<h2 id='wallet-sockets-calls'>Wallet sockets - Calls</h2>
<p>The only wallet calls available are covered in the <a href="#wallet-sockets-bsock">previous section.</a></p>

<p>They are:</p>

<p><code>auth</code>
<code>join</code>
<code>leave</code></p>
<h2 id='wallet-sockets-events'>Wallet sockets - Events</h2><h2 id='wallet-code-tx-code'>wallet <code>tx</code></h2>
<blockquote>
<p>Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>{
  "hash": "e0ef577e307b9b798bf98a7aa56ebab431d1918f6c8b29ddd8a89dce5314acca",
  "height": -1,
  "block": null,
  "time": 0,
  "mtime": 1571774743,
  "date": "1970-01-01T00:00:00Z",
  "mdate": "2019-10-22T20:05:43Z",
  "size": 226,
  "virtualSize": 226,
  "fee": 4540,
  "rate": 20088,
  "confirmations": 0,
  "inputs": [
    {
      "value": 2500000000,
      "address": "mhX1xHbKGzw3r8FoN5bUkmRixHPEDNywxh",
      "path": {
        "name": "default",
        "account": 0,
        "change": false,
        "derivation": "m/0'/0/1"
      }
    }
  ],
  "outputs": [
    {
      "value": 10000000,
      "address": "msSaQkCXyrEefbSH9TCSWNjnacTwGGc55d",
      "path": {
        "name": "default",
        "account": 0,
        "change": false,
        "derivation": "m/0'/0/4"
      }
    },
    {
      "value": 2489995460,
      "address": "mtwN3Z4R7Mjdn1Dt6eDCUwoPdYKNFu6oiX",
      "path": {
        "name": "default",
        "account": 0,
        "change": true,
        "derivation": "m/0'/1/5"
      }
    }
  ],
  "tx": "0100000001bf932f6585ce47d552c9f18463820bb4064b97b032606a122947aba4e14f77e6000000006b4830450221009aa7abc5bcc058bbb3c85ea53fdc19bae9351a81ad3f6027b6dfc0437fb1010502202e768a07a9e073833fc7039bebfd5b9b4edc373159e93d5917f074c53355187201210336c99e45e00b73c863497a989fe6feb08439ca2d7cf98f55bc261ed70ed28a7bffffffff0280969800000000001976a91482cd93c2cbdd094599a92ce3317d3087a1975e0a88acc4506a94000000001976a9149337719ab611d0da2ec1317dd195844661e3732f88ac00000000"
}
</code></pre></div>
<p>Emitted on transaction.</p>

<p>Returns tx details.</p>
<h2 id='code-conflict-code'><code>conflict</code></h2>
<p>Emitted on double spend.</p>

<p>Returns tx details of removed double spender.</p>
<h2 id='code-confirmed-code'><code>confirmed</code></h2>
<blockquote>
<p>Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>{
  "hash": "e0ef577e307b9b798bf98a7aa56ebab431d1918f6c8b29ddd8a89dce5314acca",
  "height": 846,
  "block": "636982487fccf820bc1ca825b2cdd94be1bdd9863e8dec01979b62b45d894e73",
  "time": 1571774818,
  "mtime": 1571774743,
  "date": "2019-10-22T20:06:58Z",
  "mdate": "2019-10-22T20:05:43Z",
  "size": 226,
  "virtualSize": 226,
  "fee": 4540,
  "rate": 20088,
  "confirmations": 1,
  "inputs": [
    {
      "value": 2500000000,
      "address": "mhX1xHbKGzw3r8FoN5bUkmRixHPEDNywxh",
      "path": {
        "name": "default",
        "account": 0,
        "change": false,
        "derivation": "m/0'/0/1"
      }
    }
  ],
  "outputs": [
    {
      "value": 10000000,
      "address": "msSaQkCXyrEefbSH9TCSWNjnacTwGGc55d",
      "path": {
        "name": "default",
        "account": 0,
        "change": false,
        "derivation": "m/0'/0/4"
      }
    },
    {
      "value": 2489995460,
      "address": "mtwN3Z4R7Mjdn1Dt6eDCUwoPdYKNFu6oiX",
      "path": {
        "name": "default",
        "account": 0,
        "change": true,
        "derivation": "m/0'/1/5"
      }
    }
  ],
  "tx": "0100000001bf932f6585ce47d552c9f18463820bb4064b97b032606a122947aba4e14f77e6000000006b4830450221009aa7abc5bcc058bbb3c85ea53fdc19bae9351a81ad3f6027b6dfc0437fb1010502202e768a07a9e073833fc7039bebfd5b9b4edc373159e93d5917f074c53355187201210336c99e45e00b73c863497a989fe6feb08439ca2d7cf98f55bc261ed70ed28a7bffffffff0280969800000000001976a91482cd93c2cbdd094599a92ce3317d3087a1975e0a88acc4506a94000000001976a9149337719ab611d0da2ec1317dd195844661e3732f88ac00000000"
}
</code></pre></div>
<p>Emitted when a transaction is confirmed.</p>

<p>Returns tx details.</p>
<h2 id='code-unconfirmed-code'><code>unconfirmed</code></h2>
<p>Emitted if a transaction was changed from
confirmed-&gt;unconfirmed as the result of a reorg.</p>

<p>Returns tx details.</p>
<h2 id='code-balance-code'><code>balance</code></h2>
<blockquote>
<p>Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>{
  account: -1,
  tx: 113,
  coin: 113,
  unconfirmed: 539999990920,
  confirmed: 540000000000
}
</code></pre></div>
<p>Emitted on balance update. Only emitted for
entire wallet balance (not individual accounts).</p>

<p>Returns Balance object.</p>
<h2 id='code-address-code'><code>address</code></h2>
<blockquote>
<p>Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>[
  {
    "name": "default",
    "account": 0,
    "branch": 0,
    "index": 16,
    "witness": false,
    "nested": false,
    "publicKey": "0370d759cf5170e718ab02fccf844bc69a3c9ad6ece9899be55455930fb85ff674",
    "script": null,
    "program": null,
    "type": "pubkeyhash",
    "address": "mfzcPvKYNjzULJRjbaAhdR8fEJsTg7SSsV"
  }
]
</code></pre></div>
<p>Emitted when a transaction is received by the wallet account&#39;s current receive address,
causing the wallet to derive a new receive address.</p>

<p>Returns an array of <a href="https://github.com/bcoin-org/bcoin/blob/master/lib/primitives/keyring.js">KeyRing</a> objects with new address details.</p>
<h1 id='errors'>Errors</h1>
<p>Any errors will be returned with an http status code other than 200, containing a JSON object in the form:</p>

<p><code>{&quot;error&quot;: { message: &quot;message&quot; } }</code></p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell--curl">cURL</a>
                <a href="#" data-language-name="shell--cli">CLI</a>
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
